
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <title>äº‹ä»¶å¾ªç¯ &#8212; Python 3.8.2 æ–‡æ¡£</title>
    <link rel="stylesheet" href="pydoctheme.css" tppabs="https://docs.python.org/zh-cn/3/_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="pygments.css" tppabs="https://docs.python.org/zh-cn/3/_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="documentation_options.js" tppabs="https://docs.python.org/zh-cn/3/_static/documentation_options.js"></script>
    <script type="text/javascript" src="jquery.js" tppabs="https://docs.python.org/zh-cn/3/_static/jquery.js"></script>
    <script type="text/javascript" src="underscore.js" tppabs="https://docs.python.org/zh-cn/3/_static/underscore.js"></script>
    <script type="text/javascript" src="doctools.js" tppabs="https://docs.python.org/zh-cn/3/_static/doctools.js"></script>
    <script type="text/javascript" src="language_data.js" tppabs="https://docs.python.org/zh-cn/3/_static/language_data.js"></script>
    <script type="text/javascript" src="translations.js" tppabs="https://docs.python.org/zh-cn/3/_static/translations.js"></script>
    
    <script type="text/javascript" src="sidebar.js" tppabs="https://docs.python.org/zh-cn/3/_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="åœ¨ Python 3.8.2 æ–‡æ¡£ ä¸­æœç´¢"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="å…³äºè¿™äº›æ–‡æ¡£" href="../about.html" />
    <link rel="index" title="ç´¢å¼•" href="../genindex.html" />
    <link rel="search" title="æœç´¢" href="../search.html" />
    <link rel="copyright" title="ç‰ˆæƒæ‰€æœ‰" href="../copyright.html" />
    <link rel="next" title="Futures" href="asyncio-future.html" />
    <link rel="prev" title="å¼‚å¸¸" href="asyncio-exceptions.html" />
    <link rel="canonical" href="https://docs.python.org/3/library/asyncio-eventloop.html" />
    
      
      <script type="text/javascript" src="switchers.js" tppabs="https://docs.python.org/zh-cn/3/_static/switchers.js"></script>
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>

    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    
    <script type="text/javascript" src="copybutton.js" tppabs="https://docs.python.org/zh-cn/3/_static/copybutton.js"></script>
    
     


  </head><body>
  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>å¯¼èˆª</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" tppabs="https://docs.python.org/zh-cn/3/genindex.html" title="æ€»ç›®å½•"
             accesskey="I">ç´¢å¼•</a></li>
        <li class="right" >
          <a href="py-modindex.html" tppabs="https://docs.python.org/zh-cn/3/py-modindex.html" title="Python æ¨¡å—ç´¢å¼•"
             >æ¨¡å—</a> |</li>
        <li class="right" >
          <a href="asyncio-future.html" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-future.html" title="Futures"
             accesskey="N">ä¸‹ä¸€é¡µ</a> |</li>
        <li class="right" >
          <a href="asyncio-exceptions.html" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-exceptions.html" title="å¼‚å¸¸"
             accesskey="P">ä¸Šä¸€é¡µ</a> |</li>

    <li><img src="py.png" tppabs="https://docs.python.org/zh-cn/3/_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="javascript:if(confirm('https://www.python.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.python.org/'" tppabs="https://www.python.org/">Python</a> &#187;</li>
    

    <li>
      <span class="language_switcher_placeholder">zh_CN</span>
      <span class="version_switcher_placeholder">3.8.2</span>
      <a href="index-11.html" tppabs="https://docs.python.org/zh-cn/3/index.html">æ–‡æ¡£</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index-2.html" tppabs="https://docs.python.org/zh-cn/3/library/index.html" >Python æ ‡å‡†åº“</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="ipc.html" tppabs="https://docs.python.org/zh-cn/3/library/ipc.html" >ç½‘ç»œå’Œè¿›ç¨‹é—´é€šä¿¡</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="asyncio.html" tppabs="https://docs.python.org/zh-cn/3/library/asyncio.html" accesskey="U"><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code> --- å¼‚æ­¥ I/O</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="https://docs.python.org/zh-cn/3/search.html" method="get">
          <input placeholder="å¿«é€Ÿæœç´¢" type="text" name="q" />
          <input type="submit" value="è½¬å‘" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="event-loop">
<h1>äº‹ä»¶å¾ªç¯<a class="headerlink" href="#event-loop" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h1>
<p><strong>Source code:</strong> <a class="reference external" href="javascript:if(confirm('https://github.com/python/cpython/tree/3.8/Lib/asyncio/issue38086  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/python/cpython/tree/3.8/Lib/asyncio/issue38086'" tppabs="https://github.com/python/cpython/tree/3.8/Lib/asyncio/events.py">Lib/asyncio/events.py</a>,
<a class="reference external" href="javascript:if(confirm('https://github.com/python/cpython/tree/3.8/Lib/asyncio/issue39718  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/python/cpython/tree/3.8/Lib/asyncio/issue39718'" tppabs="https://github.com/python/cpython/tree/3.8/Lib/asyncio/base_events.py">Lib/asyncio/base_events.py</a></p>
<hr class="docutils" />
<p class="rubric">å‰è¨€</p>
<p>äº‹ä»¶å¾ªç¯æ˜¯æ¯ä¸ª asyncio åº”ç”¨çš„æ ¸å¿ƒã€‚ äº‹ä»¶å¾ªç¯ä¼šè¿è¡Œå¼‚æ­¥ä»»åŠ¡å’Œå›è°ƒï¼Œæ‰§è¡Œç½‘ç»œ IO æ“ä½œï¼Œä»¥åŠè¿è¡Œå­è¿›ç¨‹ã€‚</p>
<p>åº”ç”¨å¼€å‘è€…é€šå¸¸åº”å½“ä½¿ç”¨é«˜å±‚çº§çš„ asyncio å‡½æ•°ï¼Œä¾‹å¦‚ <a class="reference internal" href="asyncio-task.html#asyncio.run" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-task.html#asyncio.run" title="asyncio.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.run()</span></code></a>ï¼Œåº”å½“å¾ˆå°‘æœ‰å¿…è¦å¼•ç”¨å¾ªç¯å¯¹è±¡æˆ–è°ƒç”¨å…¶æ–¹æ³•ã€‚ æœ¬èŠ‚æ‰€é’ˆå¯¹çš„ä¸»è¦æ˜¯ä½å±‚çº§ä»£ç ã€åº“å’Œæ¡†æ¶çš„ç¼–å†™è€…ï¼Œä»–ä»¬éœ€è¦æ›´ç»†è‡´åœ°æ§åˆ¶äº‹ä»¶å¾ªç¯è¡Œä¸ºã€‚</p>
<p class="rubric">è·å–äº‹ä»¶å¾ªç¯</p>
<p>ä»¥ä¸‹ä½å±‚çº§å‡½æ•°å¯è¢«ç”¨äºè·å–ã€è®¾ç½®æˆ–åˆ›å»ºäº‹ä»¶å¾ªç¯:</p>
<dl class="function">
<dt id="asyncio.get_running_loop">
<code class="sig-prename descclassname">asyncio.</code><code class="sig-name descname">get_running_loop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.get_running_loop" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è¿”å›å½“å‰ OS çº¿ç¨‹ä¸­æ­£åœ¨è¿è¡Œçš„äº‹ä»¶å¾ªç¯ã€‚</p>
<p>å¦‚æœæ²¡æœ‰æ­£åœ¨è¿è¡Œçš„äº‹ä»¶å¾ªç¯åˆ™ä¼šå¼•å‘ <a class="reference internal" href="exceptions.html#RuntimeError" tppabs="https://docs.python.org/zh-cn/3/library/exceptions.html#RuntimeError" title="RuntimeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">RuntimeError</span></code></a>ã€‚ æ­¤å‡½æ•°åªèƒ½ç”±åç¨‹æˆ–å›è°ƒæ¥è°ƒç”¨ã€‚</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 æ–°ç‰ˆåŠŸèƒ½.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="asyncio.get_event_loop">
<code class="sig-prename descclassname">asyncio.</code><code class="sig-name descname">get_event_loop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.get_event_loop" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Get the current event loop.</p>
<p>If there is no current event loop set in the current OS thread,
the OS thread is main, and <a class="reference internal" href="#asyncio.set_event_loop" title="asyncio.set_event_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_event_loop()</span></code></a> has not yet
been called, asyncio will create a new event loop and set it as the
current one.</p>
<p>ç”±äºæ­¤å‡½æ•°å…·æœ‰ç›¸å½“å¤æ‚çš„è¡Œä¸ºï¼ˆç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨äº†è‡ªå®šä¹‰äº‹ä»¶å¾ªç¯ç­–ç•¥çš„æ—¶å€™ï¼‰ï¼Œæ›´æ¨èåœ¨åç¨‹å’Œå›è°ƒä¸­ä½¿ç”¨ <a class="reference internal" href="#asyncio.get_running_loop" title="asyncio.get_running_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_running_loop()</span></code></a> å‡½æ•°è€Œé <a class="reference internal" href="#asyncio.get_event_loop" title="asyncio.get_event_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_event_loop()</span></code></a>ã€‚</p>
<p>åº”è¯¥è€ƒè™‘ä½¿ç”¨ <a class="reference internal" href="asyncio-task.html#asyncio.run" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-task.html#asyncio.run" title="asyncio.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.run()</span></code></a> å‡½æ•°è€Œéä½¿ç”¨ä½å±‚çº§å‡½æ•°æ¥æ‰‹åŠ¨åˆ›å»ºå’Œå…³é—­äº‹ä»¶å¾ªç¯ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="asyncio.set_event_loop">
<code class="sig-prename descclassname">asyncio.</code><code class="sig-name descname">set_event_loop</code><span class="sig-paren">(</span><em class="sig-param">loop</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.set_event_loop" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å°† <em>loop</em> è®¾ç½®ä¸ºå½“å‰ OS çº¿ç¨‹çš„å½“å‰äº‹ä»¶å¾ªç¯ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="asyncio.new_event_loop">
<code class="sig-prename descclassname">asyncio.</code><code class="sig-name descname">new_event_loop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.new_event_loop" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹ä»¶å¾ªç¯ã€‚</p>
</dd></dl>

<p>è¯·æ³¨æ„ <a class="reference internal" href="#asyncio.get_event_loop" title="asyncio.get_event_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_event_loop()</span></code></a>, <a class="reference internal" href="#asyncio.set_event_loop" title="asyncio.set_event_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_event_loop()</span></code></a> ä»¥åŠ <a class="reference internal" href="#asyncio.new_event_loop" title="asyncio.new_event_loop"><code class="xref py py-func docutils literal notranslate"><span class="pre">new_event_loop()</span></code></a> å‡½æ•°çš„è¡Œä¸ºå¯ä»¥é€šè¿‡ <a class="reference internal" href="asyncio-policy.html#asyncio-policies" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-policy.html#asyncio-policies"><span class="std std-ref">è®¾ç½®è‡ªå®šä¹‰äº‹ä»¶å¾ªç¯ç­–ç•¥</span></a> æ¥æ”¹å˜ã€‚</p>
<p class="rubric">å†…å®¹</p>
<p>æœ¬æ–‡æ¡£åŒ…å«ä¸‹åˆ—å°èŠ‚:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#event-loop-methods">äº‹ä»¶å¾ªç¯æ–¹æ³•é›†</a> ç« èŠ‚æ˜¯äº‹ä»¶å¾ªç¯APIsçš„å‚è€ƒæ–‡æ¡£ï¼›</p></li>
<li><p><a class="reference internal" href="#callback-handles">å›è°ƒå¤„ç†</a> ç« èŠ‚æ˜¯ä»è°ƒåº¦æ–¹æ³• ä¾‹å¦‚ <a class="reference internal" href="#asyncio.loop.call_soon" title="asyncio.loop.call_soon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.call_soon()</span></code></a>  å’Œ <a class="reference internal" href="#asyncio.loop.call_later" title="asyncio.loop.call_later"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.call_later()</span></code></a> ä¸­è¿”å› <a class="reference internal" href="#asyncio.Handle" title="asyncio.Handle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Handle</span></code></a>Â å’Œ <a class="reference internal" href="#asyncio.TimerHandle" title="asyncio.TimerHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimerHandle</span></code></a>Â å®ä¾‹çš„æ–‡æ¡£ã€‚</p></li>
<li><p><a class="reference internal" href="#server-objects">Server Objects</a> ç« èŠ‚è®°å½•äº†ä»äº‹ä»¶å¾ªç¯æ–¹æ³•è¿”å›çš„ç±»å‹ï¼Œæ¯”å¦‚ <a class="reference internal" href="#asyncio.loop.create_server" title="asyncio.loop.create_server"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.create_server()</span></code></a> ï¼›</p></li>
<li><p><a class="reference internal" href="#event-loop-implementations">Event Loop Implementations</a> ç« èŠ‚è®°å½•äº† <a class="reference internal" href="#asyncio.SelectorEventLoop" title="asyncio.SelectorEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelectorEventLoop</span></code></a> å’Œ <a class="reference internal" href="#asyncio.ProactorEventLoop" title="asyncio.ProactorEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProactorEventLoop</span></code></a> ç±»ï¼›</p></li>
<li><p><a class="reference internal" href="#examples">Examples</a> ç« èŠ‚å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨æŸäº›äº‹ä»¶å¾ªç¯APIã€‚</p></li>
</ul>
<div class="section" id="event-loop-methods">
<span id="asyncio-event-loop"></span><h2>äº‹ä»¶å¾ªç¯æ–¹æ³•é›†<a class="headerlink" href="#event-loop-methods" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>äº‹ä»¶å¾ªç¯æœ‰ä¸‹åˆ— <strong>ä½çº§</strong> APIsï¼š</p>
<div class="contents local topic" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#running-and-stopping-the-loop" id="id2">è¿è¡Œå’Œåœæ­¢å¾ªç¯</a></p></li>
<li><p><a class="reference internal" href="#scheduling-callbacks" id="id3">è°ƒåº¦å›è°ƒ</a></p></li>
<li><p><a class="reference internal" href="#scheduling-delayed-callbacks" id="id4">è°ƒåº¦å»¶è¿Ÿå›è°ƒ</a></p></li>
<li><p><a class="reference internal" href="#creating-futures-and-tasks" id="id5">åˆ›å»º Futures å’Œ Tasks</a></p></li>
<li><p><a class="reference internal" href="#opening-network-connections" id="id6">æ‰“å¼€ç½‘ç»œè¿æ¥</a></p></li>
<li><p><a class="reference internal" href="#creating-network-servers" id="id7">åˆ›å»ºç½‘ç»œæœåŠ¡</a></p></li>
<li><p><a class="reference internal" href="#transferring-files" id="id8">ä¼ è¾“æ–‡ä»¶</a></p></li>
<li><p><a class="reference internal" href="#tls-upgrade" id="id9">TLS å‡çº§</a></p></li>
<li><p><a class="reference internal" href="#watching-file-descriptors" id="id10">ç›‘æ§æ–‡ä»¶æè¿°ç¬¦</a></p></li>
<li><p><a class="reference internal" href="#working-with-socket-objects-directly" id="id11">ç›´æ¥ä½¿ç”¨ socket å¯¹è±¡</a></p></li>
<li><p><a class="reference internal" href="#dns" id="id12">DNS</a></p></li>
<li><p><a class="reference internal" href="#working-with-pipes" id="id13">ä½¿ç”¨ç®¡é“</a></p></li>
<li><p><a class="reference internal" href="#unix-signals" id="id14">Unix ä¿¡å·</a></p></li>
<li><p><a class="reference internal" href="#executing-code-in-thread-or-process-pools" id="id15">åœ¨çº¿ç¨‹æˆ–è€…è¿›ç¨‹æ± ä¸­æ‰§è¡Œä»£ç ã€‚</a></p></li>
<li><p><a class="reference internal" href="#error-handling-api" id="id16">é”™è¯¯å¤„ç†API</a></p></li>
<li><p><a class="reference internal" href="#enabling-debug-mode" id="id17">å¼€å¯è°ƒè¯•æ¨¡å¼</a></p></li>
<li><p><a class="reference internal" href="#running-subprocesses" id="id18">è¿è¡Œå­è¿›ç¨‹</a></p></li>
</ul>
</div>
<div class="section" id="running-and-stopping-the-loop">
<h3><a class="toc-backref" href="#id2">è¿è¡Œå’Œåœæ­¢å¾ªç¯</a><a class="headerlink" href="#running-and-stopping-the-loop" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<dl class="method">
<dt id="asyncio.loop.run_until_complete">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">run_until_complete</code><span class="sig-paren">(</span><em class="sig-param">future</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.run_until_complete" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è¿è¡Œç›´åˆ° <em>future</em> (  <a class="reference internal" href="asyncio-future.html#asyncio.Future" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-future.html#asyncio.Future" title="asyncio.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">Future</span></code></a> çš„å®ä¾‹ ) è¢«å®Œæˆã€‚</p>
<p>å¦‚æœå‚æ•°æ˜¯ <a class="reference internal" href="asyncio-task.html#coroutine" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-task.html#coroutine"><span class="std std-ref">coroutine object</span></a> ï¼Œå°†è¢«éšå¼è°ƒåº¦ä¸º <a class="reference internal" href="asyncio-task.html#asyncio.Task" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-task.html#asyncio.Task" title="asyncio.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Task</span></code></a> æ¥è¿è¡Œã€‚</p>
<p>è¿”å› Future çš„ç»“æœ æˆ–è€…å¼•å‘ç›¸å…³å¼‚å¸¸ã€‚</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.run_forever">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">run_forever</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.run_forever" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è¿è¡Œäº‹ä»¶å¾ªç¯ç›´åˆ° <a class="reference internal" href="#asyncio.loop.stop" title="asyncio.loop.stop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stop()</span></code></a> è¢«è°ƒç”¨ã€‚</p>
<p>If <a class="reference internal" href="#asyncio.loop.stop" title="asyncio.loop.stop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stop()</span></code></a> is called before <a class="reference internal" href="#asyncio.loop.run_forever" title="asyncio.loop.run_forever"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_forever()</span></code></a> is called,
the loop will poll the I/O selector once with a timeout of zero,
run all callbacks scheduled in response to I/O events (and
those that were already scheduled), and then exit.</p>
<p>If <a class="reference internal" href="#asyncio.loop.stop" title="asyncio.loop.stop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stop()</span></code></a> is called while <a class="reference internal" href="#asyncio.loop.run_forever" title="asyncio.loop.run_forever"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_forever()</span></code></a> is running,
the loop will run the current batch of callbacks and then exit.
Note that new callbacks scheduled by callbacks will not run in this
case; instead, they will run the next time <a class="reference internal" href="#asyncio.loop.run_forever" title="asyncio.loop.run_forever"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_forever()</span></code></a> or
<a class="reference internal" href="#asyncio.loop.run_until_complete" title="asyncio.loop.run_until_complete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_until_complete()</span></code></a> is called.</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.stop">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.stop" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>åœæ­¢äº‹ä»¶å¾ªç¯ã€‚</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.is_running">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">is_running</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.is_running" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è¿”å› <code class="docutils literal notranslate"><span class="pre">True</span></code> å¦‚æœäº‹ä»¶å¾ªç¯å½“å‰æ­£åœ¨è¿è¡Œã€‚</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.is_closed">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">is_closed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.is_closed" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å¦‚æœäº‹ä»¶å¾ªç¯å·²ç»è¢«å…³é—­ï¼Œè¿”å› <code class="docutils literal notranslate"><span class="pre">True</span></code> ã€‚</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.close">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.close" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å…³é—­äº‹ä»¶å¾ªç¯ã€‚</p>
<p>å½“è¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå¾ªç¯å¿…é¡»å¤„äºéè¿è¡ŒçŠ¶æ€ã€‚pendingçŠ¶æ€çš„å›è°ƒå°†è¢«ä¸¢å¼ƒã€‚</p>
<p>æ­¤æ–¹æ³•æ¸…é™¤æ‰€æœ‰çš„é˜Ÿåˆ—å¹¶ç«‹å³å…³é—­æ‰§è¡Œå™¨ï¼Œä¸ä¼šç­‰å¾…æ‰§è¡Œå™¨å®Œæˆã€‚</p>
<p>è¿™ä¸ªæ–¹æ³•æ˜¯å¹‚ç­‰çš„å’Œä¸å¯é€†çš„ã€‚äº‹ä»¶å¾ªç¯å…³é—­åï¼Œä¸åº”è°ƒç”¨å…¶ä»–æ–¹æ³•ã€‚</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.shutdown_asyncgens">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">shutdown_asyncgens</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.shutdown_asyncgens" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Schedule all currently open <a class="reference internal" href="glossary.html#term-asynchronous-generator" tppabs="https://docs.python.org/zh-cn/3/glossary.html#term-asynchronous-generator"><span class="xref std std-term">asynchronous generator</span></a> objects to
close with an <a class="reference internal" href="expressions.html#agen.aclose" tppabs="https://docs.python.org/zh-cn/3/reference/expressions.html#agen.aclose" title="agen.aclose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aclose()</span></code></a> call.  After calling this method,
the event loop will issue a warning if a new asynchronous generator
is iterated. This should be used to reliably finalize all scheduled
asynchronous generators.</p>
<p>è¿è¡Œè¯·æ³¨æ„ï¼Œå½“ä½¿ç”¨ <a class="reference internal" href="asyncio-task.html#asyncio.run" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-task.html#asyncio.run" title="asyncio.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.run()</span></code></a> æ—¶ï¼Œæ— éœ€è°ƒç”¨æ­¤å‡½æ•°ã€‚</p>
<p>ç¤ºä¾‹:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">run_forever</span><span class="p">()</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">loop</span><span class="o">.</span><span class="n">shutdown_asyncgens</span><span class="p">())</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.6 æ–°ç‰ˆåŠŸèƒ½.</span></p>
</div>
</dd></dl>

</div>
<div class="section" id="scheduling-callbacks">
<h3><a class="toc-backref" href="#id3">è°ƒåº¦å›è°ƒ</a><a class="headerlink" href="#scheduling-callbacks" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<dl class="method">
<dt id="asyncio.loop.call_soon">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">call_soon</code><span class="sig-paren">(</span><em class="sig-param">callback</em>, <em class="sig-param">*args</em>, <em class="sig-param">context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.call_soon" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å®‰æ’åœ¨ä¸‹ä¸€æ¬¡äº‹ä»¶å¾ªç¯çš„è¿­ä»£ä¸­ä½¿ç”¨ <em>args</em> å‚æ•°è°ƒç”¨ <em>callback</em> ã€‚</p>
<p>å›è°ƒæŒ‰å…¶æ³¨å†Œé¡ºåºè¢«è°ƒç”¨ã€‚æ¯ä¸ªå›è°ƒä»…è¢«è°ƒç”¨ä¸€æ¬¡ã€‚</p>
<p>å¯é€‰çš„ä»…å…³é”®å­—å‹å‚æ•° <em>context</em> å…è®¸ä¸ºè¦è¿è¡Œçš„ <em>callback</em> æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰ <a class="reference internal" href="contextvars.html#contextvars.Context" tppabs="https://docs.python.org/zh-cn/3/library/contextvars.html#contextvars.Context" title="contextvars.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">contextvars.Context</span></code></a> ã€‚å¦‚æœæ²¡æœ‰æä¾› <em>context</em> ï¼Œåˆ™ä½¿ç”¨å½“å‰ä¸Šä¸‹æ–‡ã€‚</p>
<p>è¿”å›ä¸€ä¸ªèƒ½ç”¨æ¥å–æ¶ˆå›è°ƒçš„ <a class="reference internal" href="#asyncio.Handle" title="asyncio.Handle"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Handle</span></code></a> å®ä¾‹ã€‚</p>
<p>è¿™ä¸ªæ–¹æ³•ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.call_soon_threadsafe">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">call_soon_threadsafe</code><span class="sig-paren">(</span><em class="sig-param">callback</em>, <em class="sig-param">*args</em>, <em class="sig-param">context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.call_soon_threadsafe" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p><a class="reference internal" href="#asyncio.loop.call_soon" title="asyncio.loop.call_soon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">call_soon()</span></code></a> çš„çº¿ç¨‹å®‰å…¨å˜ä½“ã€‚å¿…é¡»è¢«ç”¨äºå®‰æ’ <em>æ¥è‡ªå…¶ä»–çº¿ç¨‹</em> çš„å›è°ƒã€‚</p>
<p>æŸ¥çœ‹ <a class="reference internal" href="asyncio-dev.html#asyncio-multithreading" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-dev.html#asyncio-multithreading"><span class="std std-ref">å¹¶å‘å’Œå¤šçº¿ç¨‹</span></a> ç« èŠ‚çš„æ–‡æ¡£ã€‚</p>
</dd></dl>

<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.7 ç‰ˆæ›´æ”¹: </span>ä»…ç”¨äºå…³é”®å­—å½¢å‚çš„å‚æ•°  <em>context</em>  å·²ç»è¢«æ·»åŠ ã€‚è¯·å‚é˜…ï¼š <span class="target" id="index-10"></span><a class="pep reference external" href="javascript:if(confirm('https://www.python.org/dev/peps/pep-0567  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.python.org/dev/peps/pep-0567'" tppabs="https://www.python.org/dev/peps/pep-0567"><strong>PEP 567</strong></a> æŸ¥çœ‹æ›´å¤šç»†èŠ‚ã€‚</p>
</div>
<div class="admonition note" id="asyncio-pass-keywords">
<p class="admonition-title">æ³¨è§£</p>
<p>å¤§å¤šæ•° <a class="reference internal" href="asyncio.html#module-asyncio" tppabs="https://docs.python.org/zh-cn/3/library/asyncio.html#module-asyncio" title="asyncio: Asynchronous I/O."><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code></a> çš„è°ƒåº¦å‡½æ•°ä¸è®©ä¼ é€’å…³é”®å­—å‚æ•°ã€‚ä¸ºæ­¤ï¼Œè¯·ä½¿ç”¨ <a class="reference internal" href="functools.html#functools.partial" tppabs="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial" title="functools.partial"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code></a> ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># will schedule &quot;print(&quot;Hello&quot;, flush=True)&quot;</span>
<span class="n">loop</span><span class="o">.</span><span class="n">call_soon</span><span class="p">(</span>
    <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="nb">print</span><span class="p">,</span> <span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
<p>ä½¿ç”¨ partial å¯¹è±¡é€šå¸¸æ¯”ä½¿ç”¨lambdaæ›´æ–¹ä¾¿ï¼Œasyncio åœ¨è°ƒè¯•å’Œé”™è¯¯æ¶ˆæ¯ä¸­èƒ½æ›´å¥½çš„å‘ˆç° partial å¯¹è±¡ã€‚</p>
</div>
</div>
<div class="section" id="scheduling-delayed-callbacks">
<span id="asyncio-delayed-calls"></span><h3><a class="toc-backref" href="#id4">è°ƒåº¦å»¶è¿Ÿå›è°ƒ</a><a class="headerlink" href="#scheduling-delayed-callbacks" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>äº‹ä»¶å¾ªç¯æä¾›å®‰æ’è°ƒåº¦å‡½æ•°åœ¨å°†æ¥æŸä¸ªæ—¶åˆ»è°ƒç”¨çš„æœºåˆ¶ã€‚äº‹ä»¶å¾ªç¯ä½¿ç”¨å•è°ƒæ—¶é’Ÿæ¥è·Ÿè¸ªæ—¶é—´ã€‚</p>
<dl class="method">
<dt id="asyncio.loop.call_later">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">call_later</code><span class="sig-paren">(</span><em class="sig-param">delay</em>, <em class="sig-param">callback</em>, <em class="sig-param">*args</em>, <em class="sig-param">context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.call_later" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å®‰æ’ <em>callback</em> åœ¨ç»™å®šçš„ <em>delay</em> ç§’ï¼ˆå¯ä»¥æ˜¯ int æˆ–è€… floatï¼‰åè¢«è°ƒç”¨ã€‚</p>
<p>è¿”å›ä¸€ä¸ª <a class="reference internal" href="#asyncio.TimerHandle" title="asyncio.TimerHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.TimerHandle</span></code></a> å®ä¾‹ï¼Œè¯¥å®ä¾‹èƒ½ç”¨äºå–æ¶ˆå›è°ƒã€‚</p>
<p><em>callback</em> åªè¢«è°ƒç”¨ä¸€æ¬¡ã€‚å¦‚æœä¸¤ä¸ªå›è°ƒè¢«å®‰æ’åœ¨åŒæ ·çš„æ—¶é—´ç‚¹ï¼Œæ‰§è¡Œé¡ºåºæœªé™å®šã€‚</p>
<p>å¯é€‰çš„ä½ç½®å‚æ•° <em>args</em> åœ¨è¢«è°ƒç”¨çš„æ—¶å€™ä¼ é€’ç»™  <em>callback</em>Â  ã€‚ å¦‚æœä½ æƒ³æŠŠå…³é”®å­—å‚æ•°ä¼ é€’ç»™ <em>callback</em> ï¼Œè¯·ä½¿ç”¨ <a class="reference internal" href="functools.html#functools.partial" tppabs="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial" title="functools.partial"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code></a> ã€‚</p>
<p>å¯é€‰çš„ä»…å…³é”®å­—å‹å‚æ•° <em>context</em> å…è®¸ä¸ºè¦è¿è¡Œçš„ <em>callback</em> æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰ <a class="reference internal" href="contextvars.html#contextvars.Context" tppabs="https://docs.python.org/zh-cn/3/library/contextvars.html#contextvars.Context" title="contextvars.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">contextvars.Context</span></code></a> ã€‚å¦‚æœæ²¡æœ‰æä¾› <em>context</em> ï¼Œåˆ™ä½¿ç”¨å½“å‰ä¸Šä¸‹æ–‡ã€‚</p>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.7 ç‰ˆæ›´æ”¹: </span>ä»…ç”¨äºå…³é”®å­—å½¢å‚çš„å‚æ•°  <em>context</em>  å·²ç»è¢«æ·»åŠ ã€‚è¯·å‚é˜…ï¼š <span class="target" id="index-11"></span><a class="pep reference external" href="javascript:if(confirm('https://www.python.org/dev/peps/pep-0567  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.python.org/dev/peps/pep-0567'" tppabs="https://www.python.org/dev/peps/pep-0567"><strong>PEP 567</strong></a> æŸ¥çœ‹æ›´å¤šç»†èŠ‚ã€‚</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.8 ç‰ˆæ›´æ”¹: </span>In Python 3.7 and earlier with the default event loop implementation,
the <em>delay</em> could not exceed one day.
This has been fixed in Python 3.8.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.call_at">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">call_at</code><span class="sig-paren">(</span><em class="sig-param">when</em>, <em class="sig-param">callback</em>, <em class="sig-param">*args</em>, <em class="sig-param">context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.call_at" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å®‰æ’ <em>callback</em> åœ¨ç»™å®šçš„ç»å¯¹æ—¶é—´æˆ³çš„ <em>æ—¶é—´</em> ï¼ˆä¸€ä¸ª int æˆ–è€… floatï¼‰è¢«è°ƒç”¨ï¼Œä½¿ç”¨ä¸ <a class="reference internal" href="#asyncio.loop.time" title="asyncio.loop.time"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.time()</span></code></a> åŒæ ·çš„æ—¶é—´å‚è€ƒã€‚</p>
<p>è¿™ä¸ªå‡½æ•°çš„è¡Œä¸ºä¸ <a class="reference internal" href="#asyncio.loop.call_later" title="asyncio.loop.call_later"><code class="xref py py-meth docutils literal notranslate"><span class="pre">call_later()</span></code></a> ç›¸åŒã€‚</p>
<p>è¿”å›ä¸€ä¸ª <a class="reference internal" href="#asyncio.TimerHandle" title="asyncio.TimerHandle"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.TimerHandle</span></code></a> å®ä¾‹ï¼Œè¯¥å®ä¾‹èƒ½ç”¨äºå–æ¶ˆå›è°ƒã€‚</p>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.7 ç‰ˆæ›´æ”¹: </span>ä»…ç”¨äºå…³é”®å­—å½¢å‚çš„å‚æ•°  <em>context</em>  å·²ç»è¢«æ·»åŠ ã€‚è¯·å‚é˜…ï¼š <span class="target" id="index-12"></span><a class="pep reference external" href="javascript:if(confirm('https://www.python.org/dev/peps/pep-0567  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.python.org/dev/peps/pep-0567'" tppabs="https://www.python.org/dev/peps/pep-0567"><strong>PEP 567</strong></a> æŸ¥çœ‹æ›´å¤šç»†èŠ‚ã€‚</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.8 ç‰ˆæ›´æ”¹: </span>In Python 3.7 and earlier with the default event loop implementation,
the difference between <em>when</em> and the current time could not exceed
one day.  This has been fixed in Python 3.8.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.time">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">time</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.time" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>æ ¹æ®æ—¶é—´å¾ªç¯å†…éƒ¨çš„å•è°ƒæ—¶é’Ÿï¼Œè¿”å›å½“å‰æ—¶é—´ï¼Œ <a class="reference internal" href="functions.html#float" tppabs="https://docs.python.org/zh-cn/3/library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> å€¼ã€‚</p>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">æ³¨è§£</p>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.8 ç‰ˆæ›´æ”¹: </span>In Python 3.7 and earlier timeouts (relative <em>delay</em> or absolute <em>when</em>)
should not exceed one day.  This has been fixed in Python 3.8.</p>
</div>
</div>
<div class="admonition seealso">
<p class="admonition-title">å‚è§</p>
<p><a class="reference internal" href="asyncio-task.html#asyncio.sleep" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-task.html#asyncio.sleep" title="asyncio.sleep"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.sleep()</span></code></a> å‡½æ•°</p>
</div>
</div>
<div class="section" id="creating-futures-and-tasks">
<h3><a class="toc-backref" href="#id5">åˆ›å»º Futures å’Œ Tasks</a><a class="headerlink" href="#creating-futures-and-tasks" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<dl class="method">
<dt id="asyncio.loop.create_future">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">create_future</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.create_future" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>åˆ›å»ºä¸€ä¸ªé™„åŠ åˆ°äº‹ä»¶å¾ªç¯ä¸­çš„ <a class="reference internal" href="asyncio-future.html#asyncio.Future" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-future.html#asyncio.Future" title="asyncio.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Future</span></code></a> å¯¹è±¡ã€‚</p>
<p>è¿™æ˜¯åœ¨asyncioä¸­åˆ›å»ºFuturesçš„é¦–é€‰æ–¹å¼ã€‚è¿™è®©ç¬¬ä¸‰æ–¹äº‹ä»¶å¾ªç¯å¯ä»¥æä¾›Future å¯¹è±¡çš„æ›¿ä»£å®ç°(æ›´å¥½çš„æ€§èƒ½æˆ–è€…åŠŸèƒ½)ã€‚</p>
<div class="versionadded">
<p><span class="versionmodified added">3.5.2 æ–°ç‰ˆåŠŸèƒ½.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.create_task">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">create_task</code><span class="sig-paren">(</span><em class="sig-param">coro</em>, <em class="sig-param">*</em>, <em class="sig-param">name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.create_task" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å®‰æ’ä¸€ä¸ª <a class="reference internal" href="asyncio-task.html#coroutine" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-task.html#coroutine"><span class="std std-ref">åç¨‹</span></a> çš„æ‰§è¡Œã€‚è¿”å›ä¸€ä¸ª  <a class="reference internal" href="asyncio-task.html#asyncio.Task" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-task.html#asyncio.Task" title="asyncio.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a>  å¯¹è±¡ã€‚</p>
<p>ä¸‰æ–¹çš„äº‹ä»¶å¾ªç¯å¯ä»¥ä½¿ç”¨å®ƒä»¬è‡ªå·±å®šä¹‰çš„ <a class="reference internal" href="asyncio-task.html#asyncio.Task" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-task.html#asyncio.Task" title="asyncio.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a> ç±»çš„å­ç±»æ¥å®ç°äº’æ“ä½œæ€§ã€‚è¿™ä¸ªä¾‹å­é‡Œï¼Œè¿”å›å€¼çš„ç±»å‹æ˜¯ <a class="reference internal" href="asyncio-task.html#asyncio.Task" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-task.html#asyncio.Task" title="asyncio.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a> çš„å­ç±»ã€‚</p>
<p>If the <em>name</em> argument is provided and not <code class="docutils literal notranslate"><span class="pre">None</span></code>, it is set as
the name of the task using <a class="reference internal" href="asyncio-task.html#asyncio.Task.set_name" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-task.html#asyncio.Task.set_name" title="asyncio.Task.set_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Task.set_name()</span></code></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.8 ç‰ˆæ›´æ”¹: </span>æ·»åŠ äº† <code class="docutils literal notranslate"><span class="pre">name</span></code> å½¢å‚ã€‚</p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.set_task_factory">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">set_task_factory</code><span class="sig-paren">(</span><em class="sig-param">factory</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.set_task_factory" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è®¾ç½®ä¸€ä¸ª task å·¥å‚ ï¼Œ è¢«ç”¨äº  <a class="reference internal" href="#asyncio.loop.create_task" title="asyncio.loop.create_task"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.create_task()</span></code></a> ã€‚</p>
<p>If <em>factory</em> is <code class="docutils literal notranslate"><span class="pre">None</span></code> the default task factory will be set.
Otherwise, <em>factory</em> must be a <em>callable</em> with the signature matching
<code class="docutils literal notranslate"><span class="pre">(loop,</span> <span class="pre">coro)</span></code>, where <em>loop</em> is a reference to the active
event loop, and <em>coro</em> is a coroutine object.  The callable
must return a <a class="reference internal" href="asyncio-future.html#asyncio.Future" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-future.html#asyncio.Future" title="asyncio.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Future</span></code></a>-compatible object.</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.get_task_factory">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">get_task_factory</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.get_task_factory" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Return a task factory or <code class="docutils literal notranslate"><span class="pre">None</span></code> if the default one is in use.</p>
</dd></dl>

</div>
<div class="section" id="opening-network-connections">
<h3><a class="toc-backref" href="#id6">æ‰“å¼€ç½‘ç»œè¿æ¥</a><a class="headerlink" href="#opening-network-connections" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<dl class="method">
<dt id="asyncio.loop.create_connection">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">create_connection</code><span class="sig-paren">(</span><em class="sig-param">protocol_factory</em>, <em class="sig-param">host=None</em>, <em class="sig-param">port=None</em>, <em class="sig-param">*</em>, <em class="sig-param">ssl=None</em>, <em class="sig-param">family=0</em>, <em class="sig-param">proto=0</em>, <em class="sig-param">flags=0</em>, <em class="sig-param">sock=None</em>, <em class="sig-param">local_addr=None</em>, <em class="sig-param">server_hostname=None</em>, <em class="sig-param">ssl_handshake_timeout=None</em>, <em class="sig-param">happy_eyeballs_delay=None</em>, <em class="sig-param">interleave=None</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.create_connection" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Open a streaming transport connection to a given
address specified by <em>host</em> and <em>port</em>.</p>
<p>The socket family can be either <a class="reference internal" href="socket.html#socket.AF_INET" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.AF_INET" title="socket.AF_INET"><code class="xref py py-data docutils literal notranslate"><span class="pre">AF_INET</span></code></a> or
<a class="reference internal" href="socket.html#socket.AF_INET6" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.AF_INET6" title="socket.AF_INET6"><code class="xref py py-data docutils literal notranslate"><span class="pre">AF_INET6</span></code></a> depending on <em>host</em> (or the <em>family</em>
argument, if provided).</p>
<p>The socket type will be <a class="reference internal" href="socket.html#socket.SOCK_STREAM" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.SOCK_STREAM" title="socket.SOCK_STREAM"><code class="xref py py-data docutils literal notranslate"><span class="pre">SOCK_STREAM</span></code></a>.</p>
<p><em>protocol_factory</em> must be a callable returning an
<a class="reference internal" href="asyncio-protocol.html#asyncio-protocol" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio-protocol"><span class="std std-ref">asyncio protocol</span></a> implementation.</p>
<p>è¿™ä¸ªæ–¹æ³•ä¼šå°è¯•åœ¨åå°åˆ›å»ºè¿æ¥ã€‚å½“åˆ›å»ºæˆåŠŸï¼Œè¿”å› <code class="docutils literal notranslate"><span class="pre">(transport,</span> <span class="pre">protocol)</span></code> ç»„åˆã€‚</p>
<p>åŸºæœ¬æ“ä½œçš„æ—¶é—´é¡ºåºå¦‚ä¸‹ï¼š</p>
<ol class="arabic simple">
<li><p>The connection is established and a <a class="reference internal" href="asyncio-protocol.html#asyncio-transport" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio-transport"><span class="std std-ref">transport</span></a>
is created for it.</p></li>
<li><p><em>protocol_factory</em> is called without arguments and is expected to
return a <a class="reference internal" href="asyncio-protocol.html#asyncio-protocol" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio-protocol"><span class="std std-ref">protocol</span></a> instance.</p></li>
<li><p>The protocol instance is coupled with the transport by calling its
<a class="reference internal" href="asyncio-protocol.html#asyncio.BaseProtocol.connection_made" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio.BaseProtocol.connection_made" title="asyncio.BaseProtocol.connection_made"><code class="xref py py-meth docutils literal notranslate"><span class="pre">connection_made()</span></code></a> method.</p></li>
<li><p>æˆåŠŸæ—¶è¿”å›ä¸€ä¸ª <code class="docutils literal notranslate"><span class="pre">(transport,</span> <span class="pre">protocol)</span></code> å…ƒç»„ã€‚</p></li>
</ol>
<p>åˆ›å»ºçš„transportæ˜¯ä¸€ä¸ªå®ç°ç›¸å…³çš„åŒå‘æµã€‚</p>
<p>å…¶ä»–å‚æ•°ï¼š</p>
<ul>
<li><p><em>ssl</em>: if given and not false, a SSL/TLS transport is created
(by default a plain TCP transport is created).  If <em>ssl</em> is
a <a class="reference internal" href="ssl.html#ssl.SSLContext" tppabs="https://docs.python.org/zh-cn/3/library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ssl.SSLContext</span></code></a> object, this context is used to create
the transport; if <em>ssl</em> is <a class="reference internal" href="constants.html#True" tppabs="https://docs.python.org/zh-cn/3/library/constants.html#True" title="True"><code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code></a>, a default context returned
from <a class="reference internal" href="ssl.html#ssl.create_default_context" tppabs="https://docs.python.org/zh-cn/3/library/ssl.html#ssl.create_default_context" title="ssl.create_default_context"><code class="xref py py-func docutils literal notranslate"><span class="pre">ssl.create_default_context()</span></code></a> is used.</p>
<div class="admonition seealso">
<p class="admonition-title">å‚è§</p>
<p><a class="reference internal" href="ssl.html#ssl-security" tppabs="https://docs.python.org/zh-cn/3/library/ssl.html#ssl-security"><span class="std std-ref">SSL/TLSå®‰å…¨äº‹é¡¹</span></a></p>
</div>
</li>
<li><p><em>server_hostname</em> sets or overrides the hostname that the target
server's certificate will be matched against.  Should only be passed
if <em>ssl</em> is not <code class="docutils literal notranslate"><span class="pre">None</span></code>.  By default the value of the <em>host</em> argument
is used.  If <em>host</em> is empty, there is no default and you must pass a
value for <em>server_hostname</em>.  If <em>server_hostname</em> is an empty
string, hostname matching is disabled (which is a serious security
risk, allowing for potential man-in-the-middle attacks).</p></li>
<li><p><em>family</em>ï¼Œ<em>proto</em>ï¼Œ<em>flags</em> æ˜¯å¯é€‰çš„åœ°å€æ—ï¼Œåè®®å’Œæ ‡å¿—ï¼Œé€šè¿‡ä¼ é€’ç»™ getaddrinfo() æ¥è§£æ <em>host</em>ã€‚å¦‚æœç»™å‡ºï¼Œè¿™äº›åº”è¯¥éƒ½æ˜¯æ¥è‡ª <a class="reference internal" href="socket.html#module-socket" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#module-socket" title="socket: Low-level networking interface."><code class="xref py py-mod docutils literal notranslate"><span class="pre">socket</span></code></a> æ¨¡å—ç›¸åº”çš„å¸¸é‡çš„æ•´æ•°ã€‚</p></li>
<li><p><em>happy_eyeballs_delay</em>, if given, enables Happy Eyeballs for this
connection. It should
be a floating-point number representing the amount of time in seconds
to wait for a connection attempt to complete, before starting the next
attempt in parallel. This is the &quot;Connection Attempt Delay&quot; as defined
in <span class="target" id="index-3"></span><a class="rfc reference external" href="javascript:if(confirm('https://tools.ietf.org/html/issue37251  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://tools.ietf.org/html/issue37251'" tppabs="https://tools.ietf.org/html/rfc8305.html"><strong>RFC 8305</strong></a>. A sensible default value recommended by the RFC is <code class="docutils literal notranslate"><span class="pre">0.25</span></code>
(250 milliseconds).</p></li>
<li><p><em>interleave</em> controls address reordering when a host name resolves to
multiple IP addresses.
If <code class="docutils literal notranslate"><span class="pre">0</span></code> or unspecified, no reordering is done, and addresses are
tried in the order returned by <a class="reference internal" href="#asyncio.loop.getaddrinfo" title="asyncio.loop.getaddrinfo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getaddrinfo()</span></code></a>. If a positive integer
is specified, the addresses are interleaved by address family, and the
given integer is interpreted as &quot;First Address Family Count&quot; as defined
in <span class="target" id="index-4"></span><a class="rfc reference external" href="javascript:if(confirm('https://tools.ietf.org/html/issue37251  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://tools.ietf.org/html/issue37251'" tppabs="https://tools.ietf.org/html/rfc8305.html"><strong>RFC 8305</strong></a>. The default is <code class="docutils literal notranslate"><span class="pre">0</span></code> if <em>happy_eyeballs_delay</em> is not
specified, and <code class="docutils literal notranslate"><span class="pre">1</span></code> if it is.</p></li>
<li><p><em>sock</em>, if given, should be an existing, already connected
<a class="reference internal" href="socket.html#socket.socket" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.socket" title="socket.socket"><code class="xref py py-class docutils literal notranslate"><span class="pre">socket.socket</span></code></a> object to be used by the transport.
If <em>sock</em> is given, none of <em>host</em>, <em>port</em>, <em>family</em>, <em>proto</em>, <em>flags</em>,
<em>happy_eyeballs_delay</em>, <em>interleave</em>
and <em>local_addr</em> should be specified.</p></li>
<li><p><em>local_addr</em>, if given, is a <code class="docutils literal notranslate"><span class="pre">(local_host,</span> <span class="pre">local_port)</span></code> tuple used
to bind the socket to locally.  The <em>local_host</em> and <em>local_port</em>
are looked up using <code class="docutils literal notranslate"><span class="pre">getaddrinfo()</span></code>, similarly to <em>host</em> and <em>port</em>.</p></li>
<li><p><em>ssl_handshake_timeout</em> is (for a TLS connection) the time in seconds
to wait for the TLS handshake to complete before aborting the connection.
<code class="docutils literal notranslate"><span class="pre">60.0</span></code> seconds if <code class="docutils literal notranslate"><span class="pre">None</span></code> (default).</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">3.8 æ–°ç‰ˆåŠŸèƒ½: </span>Added the <em>happy_eyeballs_delay</em> and <em>interleave</em> parameters.</p>
<p>Happy Eyeballs Algorithm: Success with Dual-Stack Hosts.
When a server's IPv4 path and protocol are working, but the server's
IPv6 path and protocol are not working, a dual-stack client
application experiences significant connection delay compared to an
IPv4-only client.  This is undesirable because it causes the dual-
stack client to have a worse user experience.  This document
specifies requirements for algorithms that reduce this user-visible
delay and provides an algorithm.</p>
<p>For more information: <a class="reference external" href="javascript:if(confirm('https://tools.ietf.org/html/issue38037  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://tools.ietf.org/html/issue38037'" tppabs="https://tools.ietf.org/html/rfc6555">https://tools.ietf.org/html/rfc6555</a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.7 æ–°ç‰ˆåŠŸèƒ½: </span><em>ssl_handshake_timeout</em> å½¢å‚ã€‚</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.6 ç‰ˆæ›´æ”¹: </span>The socket option <code class="xref py py-data docutils literal notranslate"><span class="pre">TCP_NODELAY</span></code> is set by default
for all TCP connections.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.5 ç‰ˆæ›´æ”¹: </span><a class="reference internal" href="#asyncio.ProactorEventLoop" title="asyncio.ProactorEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProactorEventLoop</span></code></a> ç±»ä¸­æ·»åŠ  SSL/TLS æ”¯æŒã€‚</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">å‚è§</p>
<p>The <a class="reference internal" href="asyncio-stream.html#asyncio.open_connection" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-stream.html#asyncio.open_connection" title="asyncio.open_connection"><code class="xref py py-func docutils literal notranslate"><span class="pre">open_connection()</span></code></a> function is a high-level alternative
API.  It returns a pair of (<a class="reference internal" href="asyncio-stream.html#asyncio.StreamReader" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-stream.html#asyncio.StreamReader" title="asyncio.StreamReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamReader</span></code></a>, <a class="reference internal" href="asyncio-stream.html#asyncio.StreamWriter" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-stream.html#asyncio.StreamWriter" title="asyncio.StreamWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamWriter</span></code></a>)
that can be used directly in async/await code.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.create_datagram_endpoint">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">create_datagram_endpoint</code><span class="sig-paren">(</span><em class="sig-param">protocol_factory</em>, <em class="sig-param">local_addr=None</em>, <em class="sig-param">remote_addr=None</em>, <em class="sig-param">*</em>, <em class="sig-param">family=0</em>, <em class="sig-param">proto=0</em>, <em class="sig-param">flags=0</em>, <em class="sig-param">reuse_address=None</em>, <em class="sig-param">reuse_port=None</em>, <em class="sig-param">allow_broadcast=None</em>, <em class="sig-param">sock=None</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.create_datagram_endpoint" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">æ³¨è§£</p>
<p>å½¢å‚ <em>reuse_address</em> å·²ä¸å†å—æ”¯æŒï¼Œå› ä¸ºä½¿ç”¨ <code class="xref py py-data docutils literal notranslate"><span class="pre">SO_REUSEADDR</span></code> ä¼šå¯¹ UDP é€ æˆæ˜¾è‘—çš„å®‰å…¨é—®é¢˜ã€‚ æ˜¾å¼åœ°ä¼ å…¥ <code class="docutils literal notranslate"><span class="pre">reuse_address=True</span></code> å°†ä¼šå¼•å‘å¼‚å¸¸ã€‚</p>
<p>When multiple processes with differing UIDs assign sockets to an
identical UDP socket address with <code class="docutils literal notranslate"><span class="pre">SO_REUSEADDR</span></code>, incoming packets can
become randomly distributed among the sockets.</p>
<p>å¯¹äºå—æ”¯æŒçš„å¹³å°ï¼Œ<em>reuse_port</em> å¯ä»¥è¢«ç”¨ä½œç±»ä¼¼åŠŸèƒ½çš„æ›¿ä»£ã€‚ é€šè¿‡ <em>reuse_port</em> å°†æ”¹ç”¨ <code class="xref py py-data docutils literal notranslate"><span class="pre">SO_REUSEPORT</span></code>ï¼Œå®ƒèƒ½å¤Ÿé˜²æ­¢å…·æœ‰ä¸åŒ UID çš„è¿›ç¨‹å°†å¥—æ¥å­—èµ‹ç»™ç›¸åŒçš„å¥—æ¥å­—åœ°å€ã€‚</p>
</div>
<p>åˆ›å»ºä¸€ä¸ªæ•°æ®æŠ¥è¿æ¥ã€‚</p>
<p>The socket family can be either <a class="reference internal" href="socket.html#socket.AF_INET" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.AF_INET" title="socket.AF_INET"><code class="xref py py-data docutils literal notranslate"><span class="pre">AF_INET</span></code></a>,
<a class="reference internal" href="socket.html#socket.AF_INET6" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.AF_INET6" title="socket.AF_INET6"><code class="xref py py-data docutils literal notranslate"><span class="pre">AF_INET6</span></code></a>, or <a class="reference internal" href="socket.html#socket.AF_UNIX" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.AF_UNIX" title="socket.AF_UNIX"><code class="xref py py-data docutils literal notranslate"><span class="pre">AF_UNIX</span></code></a>,
depending on <em>host</em> (or the <em>family</em> argument, if provided).</p>
<p>socketç±»å‹å°†æ˜¯ <a class="reference internal" href="socket.html#socket.SOCK_DGRAM" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.SOCK_DGRAM" title="socket.SOCK_DGRAM"><code class="xref py py-data docutils literal notranslate"><span class="pre">SOCK_DGRAM</span></code></a> ã€‚</p>
<p><em>protocol_factory</em> must be a callable returning a
<a class="reference internal" href="asyncio-protocol.html#asyncio-protocol" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio-protocol"><span class="std std-ref">protocol</span></a> implementation.</p>
<p>A tuple of <code class="docutils literal notranslate"><span class="pre">(transport,</span> <span class="pre">protocol)</span></code> is returned on success.</p>
<p>å…¶ä»–å‚æ•°ï¼š</p>
<ul class="simple">
<li><p><em>local_addr</em>ï¼Œå¦‚æœæŒ‡å®šçš„è¯ï¼Œå°±æ˜¯ä¸€ä¸ª <code class="docutils literal notranslate"><span class="pre">(local_host,</span> <span class="pre">local_port)</span></code> å…ƒç»„ï¼Œç”¨äºåœ¨æœ¬åœ°ç»‘å®šå¥—æ¥å­—ã€‚ <em>local_host</em> å’Œ <em>local_port</em> æ˜¯ä½¿ç”¨ <a class="reference internal" href="#asyncio.loop.getaddrinfo" title="asyncio.loop.getaddrinfo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getaddrinfo()</span></code></a> æ¥æŸ¥æ‰¾çš„ã€‚</p></li>
<li><p><em>remote_addr</em>ï¼Œå¦‚æœæŒ‡å®šçš„è¯ï¼Œå°±æ˜¯ä¸€ä¸ª <code class="docutils literal notranslate"><span class="pre">(remote_host,</span> <span class="pre">remote_port)</span></code> å…ƒç»„ï¼Œç”¨äºåŒä¸€ä¸ªè¿œç¨‹åœ°å€è¿æ¥ã€‚<em>remote_host</em> å’Œ <em>remote_port</em> æ˜¯ä½¿ç”¨ <a class="reference internal" href="#asyncio.loop.getaddrinfo" title="asyncio.loop.getaddrinfo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getaddrinfo()</span></code></a> æ¥æŸ¥æ‰¾çš„ã€‚</p></li>
<li><p><em>family</em>, <em>proto</em>, <em>flags</em> æ˜¯å¯é€‰çš„åœ°å€æ—ï¼Œåè®®å’Œæ ‡å¿—ï¼Œå…¶ä¼šè¢«ä¼ é€’ç»™ <a class="reference internal" href="#asyncio.loop.getaddrinfo" title="asyncio.loop.getaddrinfo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getaddrinfo()</span></code></a> æ¥å®Œæˆ <em>host</em> çš„è§£æã€‚å¦‚æœè¦æŒ‡å®šçš„è¯ï¼Œè¿™äº›éƒ½åº”è¯¥æ˜¯æ¥è‡ªäº <a class="reference internal" href="socket.html#module-socket" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#module-socket" title="socket: Low-level networking interface."><code class="xref py py-mod docutils literal notranslate"><span class="pre">socket</span></code></a> æ¨¡å—çš„å¯¹åº”å¸¸é‡ã€‚</p></li>
<li><p><em>reuse_port</em> tells the kernel to allow this endpoint to be bound to the
same port as other existing endpoints are bound to, so long as they all
set this flag when being created. This option is not supported on Windows
and some Unixes. If the <code class="xref py py-data docutils literal notranslate"><span class="pre">SO_REUSEPORT</span></code> constant is not
defined then this capability is unsupported.</p></li>
<li><p><em>allow_broadcast</em> å‘ŠçŸ¥å†…æ ¸å…è®¸æ­¤ç«¯ç‚¹å‘å¹¿æ’­åœ°å€å‘é€æ¶ˆæ¯ã€‚</p></li>
<li><p><em>sock</em> å¯é€‰æ‹©é€šè¿‡æŒ‡å®šæ­¤å€¼ç”¨äºä½¿ç”¨ä¸€ä¸ªé¢„å…ˆå­˜åœ¨çš„ï¼Œå·²ç»å¤„äºè¿æ¥çŠ¶æ€çš„ <a class="reference internal" href="socket.html#socket.socket" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.socket" title="socket.socket"><code class="xref py py-class docutils literal notranslate"><span class="pre">socket.socket</span></code></a> å¯¹è±¡ï¼Œå¹¶å°†å…¶æä¾›ç»™æ­¤ä¼ è¾“å¯¹è±¡ä½¿ç”¨ã€‚å¦‚æœæŒ‡å®šäº†è¿™ä¸ªå€¼ï¼Œ <em>local_addr</em> å’Œ <em>remote_addr</em> å°±åº”è¯¥è¢«å¿½ç•¥ (å¿…é¡»ä¸º <a class="reference internal" href="constants.html#None" tppabs="https://docs.python.org/zh-cn/3/library/constants.html#None" title="None"><code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a>)ã€‚</p></li>
</ul>
<p>å‚è§ <a class="reference internal" href="asyncio-protocol.html#asyncio-udp-echo-client-protocol" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio-udp-echo-client-protocol"><span class="std std-ref">UDP echo å®¢æˆ·ç«¯åè®®</span></a>  å’Œ <a class="reference internal" href="asyncio-protocol.html#asyncio-udp-echo-server-protocol" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio-udp-echo-server-protocol"><span class="std std-ref">UDP echo æœåŠ¡ç«¯åè®®</span></a> çš„ä¾‹å­ã€‚</p>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.4.4 ç‰ˆæ›´æ”¹: </span>æ·»åŠ äº† <em>family</em>, <em>proto</em>, <em>flags</em>, <em>reuse_address</em>, <em>reuse_port</em>, <em>allow_broadcast</em> å’Œ <em>sock</em> ç­‰å‚æ•°ã€‚</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.8.1 ç‰ˆæ›´æ”¹: </span>The <em>reuse_address</em> parameter is no longer supported due to security
concerns.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.8 ç‰ˆæ›´æ”¹: </span>æ·»åŠ WIndowsçš„æ”¯æŒã€‚</p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.create_unix_connection">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">create_unix_connection</code><span class="sig-paren">(</span><em class="sig-param">protocol_factory</em>, <em class="sig-param">path=None</em>, <em class="sig-param">*</em>, <em class="sig-param">ssl=None</em>, <em class="sig-param">sock=None</em>, <em class="sig-param">server_hostname=None</em>, <em class="sig-param">ssl_handshake_timeout=None</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.create_unix_connection" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>åˆ›å»ºUnix è¿æ¥</p>
<p>The socket family will be <a class="reference internal" href="socket.html#socket.AF_UNIX" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.AF_UNIX" title="socket.AF_UNIX"><code class="xref py py-data docutils literal notranslate"><span class="pre">AF_UNIX</span></code></a>; socket
type will be <a class="reference internal" href="socket.html#socket.SOCK_STREAM" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.SOCK_STREAM" title="socket.SOCK_STREAM"><code class="xref py py-data docutils literal notranslate"><span class="pre">SOCK_STREAM</span></code></a>.</p>
<p>A tuple of <code class="docutils literal notranslate"><span class="pre">(transport,</span> <span class="pre">protocol)</span></code> is returned on success.</p>
<p><em>path</em> is the name of a Unix domain socket and is required,
unless a <em>sock</em> parameter is specified.  Abstract Unix sockets,
<a class="reference internal" href="stdtypes.html#str" tppabs="https://docs.python.org/zh-cn/3/library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference internal" href="stdtypes.html#bytes" tppabs="https://docs.python.org/zh-cn/3/library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, and <a class="reference internal" href="pathlib.html#pathlib.Path" tppabs="https://docs.python.org/zh-cn/3/library/pathlib.html#pathlib.Path" title="pathlib.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a> paths are
supported.</p>
<p>See the documentation of the <a class="reference internal" href="#asyncio.loop.create_connection" title="asyncio.loop.create_connection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.create_connection()</span></code></a> method
for information about arguments to this method.</p>
<p class="availability"><a class="reference internal" href="intro.html#availability" tppabs="https://docs.python.org/zh-cn/3/library/intro.html#availability"><span class="std std-ref">å¯ç”¨æ€§</span></a>: Unixã€‚</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 æ–°ç‰ˆåŠŸèƒ½: </span><em>ssl_handshake_timeout</em> å½¢å‚ã€‚</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.7 ç‰ˆæ›´æ”¹: </span><em>path</em> å½¢å‚ç°åœ¨å¯ä»¥æ˜¯ <a class="reference internal" href="glossary.html#term-path-like-object" tppabs="https://docs.python.org/zh-cn/3/glossary.html#term-path-like-object"><span class="xref std std-term">path-like object</span></a> å¯¹è±¡ã€‚</p>
</div>
</dd></dl>

</div>
<div class="section" id="creating-network-servers">
<h3><a class="toc-backref" href="#id7">åˆ›å»ºç½‘ç»œæœåŠ¡</a><a class="headerlink" href="#creating-network-servers" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<dl class="method">
<dt id="asyncio.loop.create_server">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">create_server</code><span class="sig-paren">(</span><em class="sig-param">protocol_factory</em>, <em class="sig-param">host=None</em>, <em class="sig-param">port=None</em>, <em class="sig-param">*</em>, <em class="sig-param">family=socket.AF_UNSPEC</em>, <em class="sig-param">flags=socket.AI_PASSIVE</em>, <em class="sig-param">sock=None</em>, <em class="sig-param">backlog=100</em>, <em class="sig-param">ssl=None</em>, <em class="sig-param">reuse_address=None</em>, <em class="sig-param">reuse_port=None</em>, <em class="sig-param">ssl_handshake_timeout=None</em>, <em class="sig-param">start_serving=True</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.create_server" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>åˆ›å»ºTCPæœåŠ¡ (socket ç±»å‹ <a class="reference internal" href="socket.html#socket.SOCK_STREAM" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.SOCK_STREAM" title="socket.SOCK_STREAM"><code class="xref py py-data docutils literal notranslate"><span class="pre">SOCK_STREAM</span></code></a> ) ç›‘å¬ <em>host</em> åœ°å€çš„ <em>port</em> ç«¯å£ã€‚</p>
<p>è¿”å›ä¸€ä¸ª <a class="reference internal" href="#asyncio.Server" title="asyncio.Server"><code class="xref py py-class docutils literal notranslate"><span class="pre">Server</span></code></a> å¯¹è±¡ã€‚</p>
<p>å‚æ•°ï¼š</p>
<ul class="simple">
<li><p><em>protocol_factory</em> must be a callable returning a
<a class="reference internal" href="asyncio-protocol.html#asyncio-protocol" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio-protocol"><span class="std std-ref">protocol</span></a> implementation.</p></li>
<li><p>The <em>host</em> parameter can be set to several types which determine where
the server would be listening:</p>
<ul>
<li><p>If <em>host</em> is a string, the TCP server is bound to a single network
interface specified by <em>host</em>.</p></li>
<li><p>If <em>host</em> is a sequence of strings, the TCP server is bound to all
network interfaces specified by the sequence.</p></li>
<li><p>If <em>host</em> is an empty string or <code class="docutils literal notranslate"><span class="pre">None</span></code>, all interfaces are
assumed and a list of multiple sockets will be returned (most likely
one for IPv4 and another one for IPv6).</p></li>
</ul>
</li>
<li><p><em>family</em> can be set to either <a class="reference internal" href="socket.html#socket.AF_INET" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.AF_INET" title="socket.AF_INET"><code class="xref py py-data docutils literal notranslate"><span class="pre">socket.AF_INET</span></code></a> or
<a class="reference internal" href="socket.html#socket.AF_INET6" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.AF_INET6" title="socket.AF_INET6"><code class="xref py py-data docutils literal notranslate"><span class="pre">AF_INET6</span></code></a> to force the socket to use IPv4 or IPv6.
If not set, the <em>family</em> will be determined from host name
(defaults to <code class="xref py py-data docutils literal notranslate"><span class="pre">AF_UNSPEC</span></code>).</p></li>
<li><p><em>flags</em> æ˜¯ç”¨äº <a class="reference internal" href="#asyncio.loop.getaddrinfo" title="asyncio.loop.getaddrinfo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getaddrinfo()</span></code></a> çš„ä½æ©ç ã€‚</p></li>
<li><p><em>sock</em> can optionally be specified in order to use a preexisting
socket object. If specified, <em>host</em> and <em>port</em> must not be specified.</p></li>
<li><p><em>backlog</em> æ˜¯ä¼ é€’ç»™ <a class="reference internal" href="socket.html#socket.socket.listen" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.socket.listen" title="socket.socket.listen"><code class="xref py py-meth docutils literal notranslate"><span class="pre">listen()</span></code></a> çš„æœ€å¤§æ’é˜Ÿè¿æ¥çš„æ•°é‡ï¼ˆé»˜è®¤ä¸º100ï¼‰ã€‚</p></li>
<li><p><em>ssl</em> can be set to an <a class="reference internal" href="ssl.html#ssl.SSLContext" tppabs="https://docs.python.org/zh-cn/3/library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSLContext</span></code></a> instance to enable
TLS over the accepted connections.</p></li>
<li><p><em>reuse_address</em> tells the kernel to reuse a local socket in
<code class="docutils literal notranslate"><span class="pre">TIME_WAIT</span></code> state, without waiting for its natural timeout to
expire. If not specified will automatically be set to <code class="docutils literal notranslate"><span class="pre">True</span></code> on
Unix.</p></li>
<li><p><em>reuse_port</em> å‘ŠçŸ¥å†…æ ¸ï¼Œåªè¦åœ¨åˆ›å»ºçš„æ—¶å€™éƒ½è®¾ç½®äº†è¿™ä¸ªæ ‡å¿—ï¼Œå°±å…è®¸æ­¤ç«¯ç‚¹ç»‘å®šåˆ°å…¶å®ƒç«¯ç‚¹åˆ—è¡¨æ‰€ç»‘å®šçš„åŒæ ·çš„ç«¯å£ä¸Šã€‚è¿™ä¸ªé€‰é¡¹åœ¨ Windows ä¸Šæ˜¯ä¸æ”¯æŒçš„ã€‚</p></li>
<li><p><em>ssl_handshake_timeout</em> is (for a TLS server) the time in seconds to wait
for the TLS handshake to complete before aborting the connection.
<code class="docutils literal notranslate"><span class="pre">60.0</span></code> seconds if <code class="docutils literal notranslate"><span class="pre">None</span></code> (default).</p></li>
<li><p><em>start_serving</em> è®¾ç½®æˆ <code class="docutils literal notranslate"><span class="pre">True</span></code> (é»˜è®¤å€¼) ä¼šå¯¼è‡´åˆ›å»ºserverå¹¶ç«‹å³å¼€å§‹æ¥å—è¿æ¥ã€‚è®¾ç½®æˆ <code class="docutils literal notranslate"><span class="pre">False</span></code> ï¼Œç”¨æˆ·éœ€è¦ç­‰å¾… <a class="reference internal" href="#asyncio.Server.start_serving" title="asyncio.Server.start_serving"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Server.start_serving()</span></code></a> æˆ–è€… <a class="reference internal" href="#asyncio.Server.serve_forever" title="asyncio.Server.serve_forever"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Server.serve_forever()</span></code></a> ä»¥ä½¿serverå¼€å§‹æ¥å—è¿æ¥ã€‚</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">3.7 æ–°ç‰ˆåŠŸèƒ½: </span>Added <em>ssl_handshake_timeout</em> and <em>start_serving</em> parameters.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.6 ç‰ˆæ›´æ”¹: </span>The socket option <code class="xref py py-data docutils literal notranslate"><span class="pre">TCP_NODELAY</span></code> is set by default
for all TCP connections.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.5 ç‰ˆæ›´æ”¹: </span><a class="reference internal" href="#asyncio.ProactorEventLoop" title="asyncio.ProactorEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProactorEventLoop</span></code></a> ç±»ä¸­æ·»åŠ  SSL/TLS æ”¯æŒã€‚</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.5.1 ç‰ˆæ›´æ”¹: </span>The <em>host</em> parameter can be a sequence of strings.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">å‚è§</p>
<p>The <a class="reference internal" href="asyncio-stream.html#asyncio.start_server" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-stream.html#asyncio.start_server" title="asyncio.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">start_server()</span></code></a> function is a higher-level alternative API
that returns a pair of <a class="reference internal" href="asyncio-stream.html#asyncio.StreamReader" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-stream.html#asyncio.StreamReader" title="asyncio.StreamReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamReader</span></code></a> and <a class="reference internal" href="asyncio-stream.html#asyncio.StreamWriter" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-stream.html#asyncio.StreamWriter" title="asyncio.StreamWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamWriter</span></code></a>
that can be used in an async/await code.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.create_unix_server">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">create_unix_server</code><span class="sig-paren">(</span><em class="sig-param">protocol_factory</em>, <em class="sig-param">path=None</em>, <em class="sig-param">*</em>, <em class="sig-param">sock=None</em>, <em class="sig-param">backlog=100</em>, <em class="sig-param">ssl=None</em>, <em class="sig-param">ssl_handshake_timeout=None</em>, <em class="sig-param">start_serving=True</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.create_unix_server" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Similar to <a class="reference internal" href="#asyncio.loop.create_server" title="asyncio.loop.create_server"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.create_server()</span></code></a> but works with the
<a class="reference internal" href="socket.html#socket.AF_UNIX" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.AF_UNIX" title="socket.AF_UNIX"><code class="xref py py-data docutils literal notranslate"><span class="pre">AF_UNIX</span></code></a> socket family.</p>
<p><em>path</em> is the name of a Unix domain socket, and is required,
unless a <em>sock</em> argument is provided.  Abstract Unix sockets,
<a class="reference internal" href="stdtypes.html#str" tppabs="https://docs.python.org/zh-cn/3/library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference internal" href="stdtypes.html#bytes" tppabs="https://docs.python.org/zh-cn/3/library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, and <a class="reference internal" href="pathlib.html#pathlib.Path" tppabs="https://docs.python.org/zh-cn/3/library/pathlib.html#pathlib.Path" title="pathlib.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a> paths
are supported.</p>
<p>See the documentation of the <a class="reference internal" href="#asyncio.loop.create_server" title="asyncio.loop.create_server"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.create_server()</span></code></a> method
for information about arguments to this method.</p>
<p class="availability"><a class="reference internal" href="intro.html#availability" tppabs="https://docs.python.org/zh-cn/3/library/intro.html#availability"><span class="std std-ref">å¯ç”¨æ€§</span></a>: Unixã€‚</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 æ–°ç‰ˆåŠŸèƒ½: </span>The <em>ssl_handshake_timeout</em> and <em>start_serving</em> parameters.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.7 ç‰ˆæ›´æ”¹: </span><em>path</em> å½¢å‚ç°åœ¨å¯ä»¥æ˜¯ <a class="reference internal" href="pathlib.html#pathlib.Path" tppabs="https://docs.python.org/zh-cn/3/library/pathlib.html#pathlib.Path" title="pathlib.Path"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a> å¯¹è±¡ã€‚</p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.connect_accepted_socket">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">connect_accepted_socket</code><span class="sig-paren">(</span><em class="sig-param">protocol_factory</em>, <em class="sig-param">sock</em>, <em class="sig-param">*</em>, <em class="sig-param">ssl=None</em>, <em class="sig-param">ssl_handshake_timeout=None</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.connect_accepted_socket" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Wrap an already accepted connection into a transport/protocol pair.</p>
<p>This method can be used by servers that accept connections outside
of asyncio but that use asyncio to handle them.</p>
<p>å‚æ•°ï¼š</p>
<ul class="simple">
<li><p><em>protocol_factory</em> must be a callable returning a
<a class="reference internal" href="asyncio-protocol.html#asyncio-protocol" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio-protocol"><span class="std std-ref">protocol</span></a> implementation.</p></li>
<li><p><em>sock</em> is a preexisting socket object returned from
<a class="reference internal" href="socket.html#socket.socket.accept" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.socket.accept" title="socket.socket.accept"><code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.accept</span></code></a>.</p></li>
<li><p><em>ssl</em> å¯è¢«è®¾ç½®ä¸ºä¸€ä¸ª <a class="reference internal" href="ssl.html#ssl.SSLContext" tppabs="https://docs.python.org/zh-cn/3/library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSLContext</span></code></a> ä»¥åœ¨æ¥å—çš„è¿æ¥ä¸Šå¯ç”¨ SSLã€‚</p></li>
<li><p><em>ssl_handshake_timeout</em> æ˜¯(ä¸ºä¸€ä¸ªSSLè¿æ¥)åœ¨ä¸­æ­¢è¿æ¥å‰ï¼Œç­‰å¾…SSLæ¡æ‰‹å®Œæˆçš„æ—¶é—´ã€å•ä½ç§’ã€‘ã€‚å¦‚æœä¸º <code class="docutils literal notranslate"><span class="pre">None</span></code> (ç¼ºçœ) åˆ™æ˜¯ <code class="docutils literal notranslate"><span class="pre">60.0</span></code> ç§’ã€‚</p></li>
</ul>
<p>è¿”å›ä¸€ä¸ª <code class="docutils literal notranslate"><span class="pre">(transport,</span> <span class="pre">protocol)</span></code> å¯¹ã€‚</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 æ–°ç‰ˆåŠŸèƒ½: </span><em>ssl_handshake_timeout</em> å½¢å‚ã€‚</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.5.3 æ–°ç‰ˆåŠŸèƒ½.</span></p>
</div>
</dd></dl>

</div>
<div class="section" id="transferring-files">
<h3><a class="toc-backref" href="#id8">ä¼ è¾“æ–‡ä»¶</a><a class="headerlink" href="#transferring-files" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<dl class="method">
<dt id="asyncio.loop.sendfile">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">sendfile</code><span class="sig-paren">(</span><em class="sig-param">transport</em>, <em class="sig-param">file</em>, <em class="sig-param">offset=0</em>, <em class="sig-param">count=None</em>, <em class="sig-param">*</em>, <em class="sig-param">fallback=True</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.sendfile" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Send a <em>file</em> over a <em>transport</em>.  Return the total number of bytes
sent.</p>
<p>å¦‚æœå¯ç”¨çš„åŒ–ï¼Œè¯¥æ–¹æ³•å°†ä½¿ç”¨é«˜æ€§èƒ½çš„ <a class="reference internal" href="os.html#os.sendfile" tppabs="https://docs.python.org/zh-cn/3/library/os.html#os.sendfile" title="os.sendfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">os.sendfile()</span></code></a> ã€‚</p>
<p><em>file</em> å¿…é¡»æ˜¯ä¸ªäºŒè¿›åˆ¶æ¨¡å¼æ‰“å¼€çš„å¸¸è§„æ–‡ä»¶å¯¹è±¡ã€‚</p>
<p><em>offset</em> tells from where to start reading the file. If specified,
<em>count</em> is the total number of bytes to transmit as opposed to
sending the file until EOF is reached. File position is always updated,
even when this method raises an error, and
<a class="reference internal" href="io.html#io.IOBase.tell" tppabs="https://docs.python.org/zh-cn/3/library/io.html#io.IOBase.tell" title="io.IOBase.tell"><code class="xref py py-meth docutils literal notranslate"><span class="pre">file.tell()</span></code></a> can be used to obtain the actual
number of bytes sent.</p>
<p><em>fallback</em> set to <code class="docutils literal notranslate"><span class="pre">True</span></code> makes asyncio to manually read and send
the file when the platform does not support the sendfile system call
(e.g. Windows or SSL socket on Unix).</p>
<p>Raise <a class="reference internal" href="asyncio-exceptions.html#asyncio.SendfileNotAvailableError" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-exceptions.html#asyncio.SendfileNotAvailableError" title="asyncio.SendfileNotAvailableError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SendfileNotAvailableError</span></code></a> if the system does not support
the <em>sendfile</em> syscall and <em>fallback</em> is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 æ–°ç‰ˆåŠŸèƒ½.</span></p>
</div>
</dd></dl>

</div>
<div class="section" id="tls-upgrade">
<h3><a class="toc-backref" href="#id9">TLS å‡çº§</a><a class="headerlink" href="#tls-upgrade" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<dl class="method">
<dt id="asyncio.loop.start_tls">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">start_tls</code><span class="sig-paren">(</span><em class="sig-param">transport</em>, <em class="sig-param">protocol</em>, <em class="sig-param">sslcontext</em>, <em class="sig-param">*</em>, <em class="sig-param">server_side=False</em>, <em class="sig-param">server_hostname=None</em>, <em class="sig-param">ssl_handshake_timeout=None</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.start_tls" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Upgrade an existing transport-based connection to TLS.</p>
<p>Return a new transport instance, that the <em>protocol</em> must start using
immediately after the <em>await</em>.  The <em>transport</em> instance passed to
the <em>start_tls</em> method should never be used again.</p>
<p>å‚æ•°ï¼š</p>
<ul class="simple">
<li><p><em>transport</em> and <em>protocol</em> instances that methods like
<a class="reference internal" href="#asyncio.loop.create_server" title="asyncio.loop.create_server"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_server()</span></code></a> and
<a class="reference internal" href="#asyncio.loop.create_connection" title="asyncio.loop.create_connection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_connection()</span></code></a> return.</p></li>
<li><p><em>sslcontext</em> ï¼šä¸€ä¸ªå·²ç»é…ç½®å¥½çš„ <a class="reference internal" href="ssl.html#ssl.SSLContext" tppabs="https://docs.python.org/zh-cn/3/library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSLContext</span></code></a> å®ä¾‹ã€‚</p></li>
<li><p><em>server_side</em> pass <code class="docutils literal notranslate"><span class="pre">True</span></code> when a server-side connection is being
upgraded (like the one created by <a class="reference internal" href="#asyncio.loop.create_server" title="asyncio.loop.create_server"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_server()</span></code></a>).</p></li>
<li><p><em>server_hostname</em> ï¼šè®¾ç½®æˆ–è€…è¦†ç›–ç›®æ ‡æœåŠ¡å™¨è¯ä¹¦ä¸­ç›¸å¯¹åº”çš„ä¸»æœºåã€‚</p></li>
<li><p><em>ssl_handshake_timeout</em> is (for a TLS connection) the time in seconds to
wait for the TLS handshake to complete before aborting the connection.
<code class="docutils literal notranslate"><span class="pre">60.0</span></code> seconds if <code class="docutils literal notranslate"><span class="pre">None</span></code> (default).</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">3.7 æ–°ç‰ˆåŠŸèƒ½.</span></p>
</div>
</dd></dl>

</div>
<div class="section" id="watching-file-descriptors">
<h3><a class="toc-backref" href="#id10">ç›‘æ§æ–‡ä»¶æè¿°ç¬¦</a><a class="headerlink" href="#watching-file-descriptors" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<dl class="method">
<dt id="asyncio.loop.add_reader">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">add_reader</code><span class="sig-paren">(</span><em class="sig-param">fd</em>, <em class="sig-param">callback</em>, <em class="sig-param">*args</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.add_reader" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å¼€å§‹ç›‘è§† <em>fd</em> æ–‡ä»¶æè¿°ç¬¦ä»¥è·å–è¯»å–çš„å¯ç”¨æ€§ï¼Œä¸€æ—¦ <em>fd</em> å¯ç”¨äºè¯»å–ï¼Œä½¿ç”¨æŒ‡å®šçš„å‚æ•°è°ƒç”¨ <em>callback</em> ã€‚</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.remove_reader">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">remove_reader</code><span class="sig-paren">(</span><em class="sig-param">fd</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.remove_reader" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>åœæ­¢å¯¹æ–‡ä»¶æè¿°ç¬¦ <em>fd</em> è¯»å–å¯ç”¨æ€§çš„ç›‘è§†ã€‚</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.add_writer">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">add_writer</code><span class="sig-paren">(</span><em class="sig-param">fd</em>, <em class="sig-param">callback</em>, <em class="sig-param">*args</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.add_writer" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å¼€å§‹ç›‘è§† <em>fd</em> æ–‡ä»¶æè¿°ç¬¦çš„å†™å…¥å¯ç”¨æ€§ï¼Œä¸€æ—¦ <em>fd</em> å¯ç”¨äºå†™å…¥ï¼Œä½¿ç”¨æŒ‡å®šçš„å‚æ•°è°ƒç”¨ <em>callback</em> ã€‚</p>
<p>ä½¿ç”¨ <a class="reference internal" href="functools.html#functools.partial" tppabs="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial" title="functools.partial"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code></a> <a class="reference internal" href="#asyncio-pass-keywords"><span class="std std-ref">ä¼ é€’å…³é”®å­—å‚æ•°</span></a>  ç»™ <em>callback</em>.</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.remove_writer">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">remove_writer</code><span class="sig-paren">(</span><em class="sig-param">fd</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.remove_writer" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>åœæ­¢å¯¹æ–‡ä»¶æè¿°ç¬¦ <em>fd</em> çš„å†™å…¥å¯ç”¨æ€§ç›‘è§†ã€‚</p>
</dd></dl>

<p>See also <a class="reference internal" href="asyncio-platforms.html#asyncio-platform-support" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-platforms.html#asyncio-platform-support"><span class="std std-ref">Platform Support</span></a> section
for some limitations of these methods.</p>
</div>
<div class="section" id="working-with-socket-objects-directly">
<h3><a class="toc-backref" href="#id11">ç›´æ¥ä½¿ç”¨ socket å¯¹è±¡</a><a class="headerlink" href="#working-with-socket-objects-directly" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>In general, protocol implementations that use transport-based APIs
such as <a class="reference internal" href="#asyncio.loop.create_connection" title="asyncio.loop.create_connection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.create_connection()</span></code></a> and <a class="reference internal" href="#asyncio.loop.create_server" title="asyncio.loop.create_server"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.create_server()</span></code></a>
are faster than implementations that work with sockets directly.
However, there are some use cases when performance is not critical, and
working with <a class="reference internal" href="socket.html#socket.socket" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.socket" title="socket.socket"><code class="xref py py-class docutils literal notranslate"><span class="pre">socket</span></code></a> objects directly is more
convenient.</p>
<dl class="method">
<dt id="asyncio.loop.sock_recv">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">sock_recv</code><span class="sig-paren">(</span><em class="sig-param">sock</em>, <em class="sig-param">nbytes</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.sock_recv" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Receive up to <em>nbytes</em> from <em>sock</em>.  Asynchronous version of
<a class="reference internal" href="socket.html#socket.socket.recv" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.socket.recv" title="socket.socket.recv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.recv()</span></code></a>.</p>
<p>è¿”å›æ¥æ”¶åˆ°çš„æ•°æ®ã€byteså¯¹è±¡ç±»å‹ã€‘ã€‚</p>
<p><em>sock</em> å¿…é¡»æ˜¯ä¸ªéé˜»å¡socketã€‚</p>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.7 ç‰ˆæ›´æ”¹: </span>Even though this method was always documented as a coroutine
method, releases before Python 3.7 returned a <a class="reference internal" href="asyncio-future.html#asyncio.Future" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-future.html#asyncio.Future" title="asyncio.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">Future</span></code></a>.
Since Python 3.7 this is an <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code> method.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.sock_recv_into">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">sock_recv_into</code><span class="sig-paren">(</span><em class="sig-param">sock</em>, <em class="sig-param">buf</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.sock_recv_into" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Receive data from <em>sock</em> into the <em>buf</em> buffer.  Modeled after the blocking
<a class="reference internal" href="socket.html#socket.socket.recv_into" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.socket.recv_into" title="socket.socket.recv_into"><code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.recv_into()</span></code></a> method.</p>
<p>è¿”å›å†™å…¥ç¼“å†²åŒºçš„å­—èŠ‚æ•°ã€‚</p>
<p><em>sock</em> å¿…é¡»æ˜¯ä¸ªéé˜»å¡socketã€‚</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 æ–°ç‰ˆåŠŸèƒ½.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.sock_sendall">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">sock_sendall</code><span class="sig-paren">(</span><em class="sig-param">sock</em>, <em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.sock_sendall" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Send <em>data</em> to the <em>sock</em> socket. Asynchronous version of
<a class="reference internal" href="socket.html#socket.socket.sendall" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.socket.sendall" title="socket.socket.sendall"><code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.sendall()</span></code></a>.</p>
<p>This method continues to send to the socket until either all data
in <em>data</em> has been sent or an error occurs.  <code class="docutils literal notranslate"><span class="pre">None</span></code> is returned
on success.  On error, an exception is raised. Additionally, there is no way
to determine how much data, if any, was successfully processed by the
receiving end of the connection.</p>
<p><em>sock</em> å¿…é¡»æ˜¯ä¸ªéé˜»å¡socketã€‚</p>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.7 ç‰ˆæ›´æ”¹: </span>è™½ç„¶è¿™ä¸ªæ–¹æ³•ä¸€ç›´è¢«æ ‡è®°ä¸ºåç¨‹æ–¹æ³•ã€‚ä½†æ˜¯ï¼ŒPython 3.7 ä¹‹å‰ï¼Œè¯¥æ–¹æ³•è¿”å› <a class="reference internal" href="asyncio-future.html#asyncio.Future" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-future.html#asyncio.Future" title="asyncio.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">Future</span></code></a> ï¼Œä»Python 3.7 å¼€å§‹ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code> æ–¹æ³•ã€‚</p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.sock_connect">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">sock_connect</code><span class="sig-paren">(</span><em class="sig-param">sock</em>, <em class="sig-param">address</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.sock_connect" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Connect <em>sock</em> to a remote socket at <em>address</em>.</p>
<p>Asynchronous version of <a class="reference internal" href="socket.html#socket.socket.connect" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.socket.connect" title="socket.socket.connect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.connect()</span></code></a>.</p>
<p><em>sock</em> å¿…é¡»æ˜¯ä¸ªéé˜»å¡socketã€‚</p>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.5.2 ç‰ˆæ›´æ”¹: </span><code class="docutils literal notranslate"><span class="pre">address</span></code> no longer needs to be resolved.  <code class="docutils literal notranslate"><span class="pre">sock_connect</span></code>
will try to check if the <em>address</em> is already resolved by calling
<a class="reference internal" href="socket.html#socket.inet_pton" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.inet_pton" title="socket.inet_pton"><code class="xref py py-func docutils literal notranslate"><span class="pre">socket.inet_pton()</span></code></a>.  If not,
<a class="reference internal" href="#asyncio.loop.getaddrinfo" title="asyncio.loop.getaddrinfo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.getaddrinfo()</span></code></a> will be used to resolve the
<em>address</em>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">å‚è§</p>
<p><a class="reference internal" href="#asyncio.loop.create_connection" title="asyncio.loop.create_connection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.create_connection()</span></code></a> å’Œ  <a class="reference internal" href="asyncio-stream.html#asyncio.open_connection" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-stream.html#asyncio.open_connection" title="asyncio.open_connection"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.open_connection()</span></code></a> ã€‚</p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.sock_accept">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">sock_accept</code><span class="sig-paren">(</span><em class="sig-param">sock</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.sock_accept" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Accept a connection.  Modeled after the blocking
<a class="reference internal" href="socket.html#socket.socket.accept" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.socket.accept" title="socket.socket.accept"><code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.accept()</span></code></a> method.</p>
<p>æ­¤ <em>scoket</em> å¿…é¡»ç»‘å®šåˆ°ä¸€ä¸ªåœ°å€ä¸Šå¹¶ä¸”ç›‘å¬è¿æ¥ã€‚è¿”å›å€¼æ˜¯ä¸€ä¸ª <code class="docutils literal notranslate"><span class="pre">(conn,</span> <span class="pre">address)</span></code> å¯¹ï¼Œå…¶ä¸­ <em>conn</em> æ˜¯ä¸€ä¸ª <em>æ–°*çš„å¥—æ¥å­—å¯¹è±¡ï¼Œç”¨äºåœ¨æ­¤è¿æ¥ä¸Šæ”¶å‘æ•°æ®ï¼Œ*address</em> æ˜¯è¿æ¥çš„å¦ä¸€ç«¯çš„å¥—æ¥å­—æ‰€ç»‘å®šçš„åœ°å€ã€‚</p>
<p><em>sock</em> å¿…é¡»æ˜¯ä¸ªéé˜»å¡socketã€‚</p>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.7 ç‰ˆæ›´æ”¹: </span>è™½ç„¶è¿™ä¸ªæ–¹æ³•ä¸€ç›´è¢«æ ‡è®°ä¸ºåç¨‹æ–¹æ³•ã€‚ä½†æ˜¯ï¼ŒPython 3.7 ä¹‹å‰ï¼Œè¯¥æ–¹æ³•è¿”å› <a class="reference internal" href="asyncio-future.html#asyncio.Future" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-future.html#asyncio.Future" title="asyncio.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">Future</span></code></a> ï¼Œä»Python 3.7 å¼€å§‹ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code> æ–¹æ³•ã€‚</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">å‚è§</p>
<p><a class="reference internal" href="#asyncio.loop.create_server" title="asyncio.loop.create_server"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.create_server()</span></code></a> and <a class="reference internal" href="asyncio-stream.html#asyncio.start_server" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-stream.html#asyncio.start_server" title="asyncio.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">start_server()</span></code></a>.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.sock_sendfile">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">sock_sendfile</code><span class="sig-paren">(</span><em class="sig-param">sock</em>, <em class="sig-param">file</em>, <em class="sig-param">offset=0</em>, <em class="sig-param">count=None</em>, <em class="sig-param">*</em>, <em class="sig-param">fallback=True</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.sock_sendfile" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Send a file using high-performance <a class="reference internal" href="os.html#os.sendfile" tppabs="https://docs.python.org/zh-cn/3/library/os.html#os.sendfile" title="os.sendfile"><code class="xref py py-mod docutils literal notranslate"><span class="pre">os.sendfile</span></code></a> if possible.
Return the total number of bytes sent.</p>
<p>Asynchronous version of <a class="reference internal" href="socket.html#socket.socket.sendfile" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.socket.sendfile" title="socket.socket.sendfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.sendfile()</span></code></a>.</p>
<p><em>sock</em> must be a non-blocking <a class="reference internal" href="socket.html#socket.SOCK_STREAM" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.SOCK_STREAM" title="socket.SOCK_STREAM"><code class="xref py py-const docutils literal notranslate"><span class="pre">socket.SOCK_STREAM</span></code></a>
<a class="reference internal" href="socket.html#socket.socket" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.socket" title="socket.socket"><code class="xref py py-class docutils literal notranslate"><span class="pre">socket</span></code></a>.</p>
<p><em>file</em> å¿…é¡»æ˜¯ä¸ªç”¨äºŒè¿›åˆ¶æ–¹å¼æ‰“å¼€çš„å¸¸è§„æ–‡ä»¶å¯¹è±¡ã€‚</p>
<p><em>offset</em> tells from where to start reading the file. If specified,
<em>count</em> is the total number of bytes to transmit as opposed to
sending the file until EOF is reached. File position is always updated,
even when this method raises an error, and
<a class="reference internal" href="io.html#io.IOBase.tell" tppabs="https://docs.python.org/zh-cn/3/library/io.html#io.IOBase.tell" title="io.IOBase.tell"><code class="xref py py-meth docutils literal notranslate"><span class="pre">file.tell()</span></code></a> can be used to obtain the actual
number of bytes sent.</p>
<p><em>fallback</em>, when set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, makes asyncio manually read and send
the file when the platform does not support the sendfile syscall
(e.g. Windows or SSL socket on Unix).</p>
<p>å¦‚æœç³»ç»Ÿä¸æ”¯æŒ <em>sendfile</em> å¹¶ä¸” <em>fallback</em> ä¸º <code class="docutils literal notranslate"><span class="pre">False</span></code> ï¼Œå¼•å‘ <a class="reference internal" href="asyncio-exceptions.html#asyncio.SendfileNotAvailableError" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-exceptions.html#asyncio.SendfileNotAvailableError" title="asyncio.SendfileNotAvailableError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SendfileNotAvailableError</span></code></a> å¼‚å¸¸ã€‚</p>
<p><em>sock</em> å¿…é¡»æ˜¯ä¸ªéé˜»å¡socketã€‚</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 æ–°ç‰ˆåŠŸèƒ½.</span></p>
</div>
</dd></dl>

</div>
<div class="section" id="dns">
<h3><a class="toc-backref" href="#id12">DNS</a><a class="headerlink" href="#dns" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<dl class="method">
<dt id="asyncio.loop.getaddrinfo">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">getaddrinfo</code><span class="sig-paren">(</span><em class="sig-param">host</em>, <em class="sig-param">port</em>, <em class="sig-param">*</em>, <em class="sig-param">family=0</em>, <em class="sig-param">type=0</em>, <em class="sig-param">proto=0</em>, <em class="sig-param">flags=0</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.getaddrinfo" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å¼‚æ­¥ç‰ˆçš„ <a class="reference internal" href="socket.html#socket.getaddrinfo" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.getaddrinfo" title="socket.getaddrinfo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.getaddrinfo()</span></code></a> ã€‚</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.getnameinfo">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">getnameinfo</code><span class="sig-paren">(</span><em class="sig-param">sockaddr</em>, <em class="sig-param">flags=0</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.getnameinfo" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å¼‚æ­¥ç‰ˆçš„ <a class="reference internal" href="socket.html#socket.getnameinfo" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.getnameinfo" title="socket.getnameinfo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.getnameinfo()</span></code></a> ã€‚</p>
</dd></dl>

<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.7 ç‰ˆæ›´æ”¹: </span><em>getaddrinfo</em> å’Œ <em>getnameinfo</em> æ–¹æ³•ä¸€ç›´è¢«æ ‡è®°è¿”å›ä¸€ä¸ªåç¨‹ï¼Œä½†æ˜¯Python 3.7ä¹‹å‰ï¼Œå®é™…è¿”å›çš„æ˜¯ <a class="reference internal" href="asyncio-future.html#asyncio.Future" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-future.html#asyncio.Future" title="asyncio.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Future</span></code></a> å¯¹è±¡ã€‚ä»Python 3.7 å¼€å§‹ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯åç¨‹ã€‚</p>
</div>
</div>
<div class="section" id="working-with-pipes">
<h3><a class="toc-backref" href="#id13">ä½¿ç”¨ç®¡é“</a><a class="headerlink" href="#working-with-pipes" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<dl class="method">
<dt id="asyncio.loop.connect_read_pipe">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">connect_read_pipe</code><span class="sig-paren">(</span><em class="sig-param">protocol_factory</em>, <em class="sig-param">pipe</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.connect_read_pipe" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Register the read end of <em>pipe</em> in the event loop.</p>
<p><em>protocol_factory</em> must be a callable returning an
<a class="reference internal" href="asyncio-protocol.html#asyncio-protocol" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio-protocol"><span class="std std-ref">asyncio protocol</span></a> implementation.</p>
<p><em>pipe</em> æ˜¯ä¸ª <a class="reference internal" href="glossary.html#term-file-object" tppabs="https://docs.python.org/zh-cn/3/glossary.html#term-file-object"><span class="xref std std-term">ç±»ä¼¼æ–‡ä»¶å‹å¯¹è±¡</span></a>.</p>
<p>Return pair <code class="docutils literal notranslate"><span class="pre">(transport,</span> <span class="pre">protocol)</span></code>, where <em>transport</em> supports
the <a class="reference internal" href="asyncio-protocol.html#asyncio.ReadTransport" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio.ReadTransport" title="asyncio.ReadTransport"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReadTransport</span></code></a> interface and <em>protocol</em> is an object
instantiated by the <em>protocol_factory</em>.</p>
<p>ä½¿ç”¨ <a class="reference internal" href="#asyncio.SelectorEventLoop" title="asyncio.SelectorEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelectorEventLoop</span></code></a> äº‹ä»¶å¾ªç¯ï¼Œ <em>pipe</em> è¢«è®¾ç½®ä¸ºéé˜»å¡æ¨¡å¼ã€‚</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.connect_write_pipe">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">connect_write_pipe</code><span class="sig-paren">(</span><em class="sig-param">protocol_factory</em>, <em class="sig-param">pipe</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.connect_write_pipe" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Register the write end of <em>pipe</em> in the event loop.</p>
<p><em>protocol_factory</em> must be a callable returning an
<a class="reference internal" href="asyncio-protocol.html#asyncio-protocol" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio-protocol"><span class="std std-ref">asyncio protocol</span></a> implementation.</p>
<p><em>pipe</em> æ˜¯ä¸ª <a class="reference internal" href="glossary.html#term-file-object" tppabs="https://docs.python.org/zh-cn/3/glossary.html#term-file-object"><span class="xref std std-term">ç±»ä¼¼æ–‡ä»¶å‹å¯¹è±¡</span></a>.</p>
<p>Return pair <code class="docutils literal notranslate"><span class="pre">(transport,</span> <span class="pre">protocol)</span></code>, where <em>transport</em> supports
<a class="reference internal" href="asyncio-protocol.html#asyncio.WriteTransport" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio.WriteTransport" title="asyncio.WriteTransport"><code class="xref py py-class docutils literal notranslate"><span class="pre">WriteTransport</span></code></a> interface and <em>protocol</em> is an object
instantiated by the <em>protocol_factory</em>.</p>
<p>ä½¿ç”¨ <a class="reference internal" href="#asyncio.SelectorEventLoop" title="asyncio.SelectorEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelectorEventLoop</span></code></a> äº‹ä»¶å¾ªç¯ï¼Œ <em>pipe</em> è¢«è®¾ç½®ä¸ºéé˜»å¡æ¨¡å¼ã€‚</p>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">æ³¨è§£</p>
<p><a class="reference internal" href="#asyncio.SelectorEventLoop" title="asyncio.SelectorEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelectorEventLoop</span></code></a> does not support the above methods on
Windows.  Use <a class="reference internal" href="#asyncio.ProactorEventLoop" title="asyncio.ProactorEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProactorEventLoop</span></code></a> instead for Windows.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">å‚è§</p>
<p>The <a class="reference internal" href="#asyncio.loop.subprocess_exec" title="asyncio.loop.subprocess_exec"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.subprocess_exec()</span></code></a> and
<a class="reference internal" href="#asyncio.loop.subprocess_shell" title="asyncio.loop.subprocess_shell"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.subprocess_shell()</span></code></a> methods.</p>
</div>
</div>
<div class="section" id="unix-signals">
<h3><a class="toc-backref" href="#id14">Unix ä¿¡å·</a><a class="headerlink" href="#unix-signals" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<dl class="method">
<dt id="asyncio.loop.add_signal_handler">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">add_signal_handler</code><span class="sig-paren">(</span><em class="sig-param">signum</em>, <em class="sig-param">callback</em>, <em class="sig-param">*args</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.add_signal_handler" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è®¾ç½® <em>callback</em> ä½œä¸º <em>signum</em> ä¿¡å·çš„å¤„ç†ç¨‹åºã€‚</p>
<p>The callback will be invoked by <em>loop</em>, along with other queued callbacks
and runnable coroutines of that event loop. Unlike signal handlers
registered using <a class="reference internal" href="signal.html#signal.signal" tppabs="https://docs.python.org/zh-cn/3/library/signal.html#signal.signal" title="signal.signal"><code class="xref py py-func docutils literal notranslate"><span class="pre">signal.signal()</span></code></a>, a callback registered with this
function is allowed to interact with the event loop.</p>
<p>å¦‚æœä¿¡å·æ•°å­—éæ³•æˆ–è€…ä¸å¯æ•è·ï¼Œå°±æŠ›å‡ºä¸€ä¸ª <a class="reference internal" href="exceptions.html#ValueError" tppabs="https://docs.python.org/zh-cn/3/library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> ã€‚å¦‚æœå»ºç«‹å¤„ç†å™¨çš„è¿‡ç¨‹ä¸­å‡ºç°é—®é¢˜ï¼Œä¼šæŠ›å‡ºä¸€ä¸ª <a class="reference internal" href="exceptions.html#RuntimeError" tppabs="https://docs.python.org/zh-cn/3/library/exceptions.html#RuntimeError" title="RuntimeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">RuntimeError</span></code></a> ã€‚</p>
<p>ä½¿ç”¨ <a class="reference internal" href="functools.html#functools.partial" tppabs="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial" title="functools.partial"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code></a> <a class="reference internal" href="#asyncio-pass-keywords"><span class="std std-ref">ä¼ é€’å…³é”®å­—å‚æ•°</span></a>  ç»™ <em>callback</em>.</p>
<p>å’Œ <a class="reference internal" href="signal.html#signal.signal" tppabs="https://docs.python.org/zh-cn/3/library/signal.html#signal.signal" title="signal.signal"><code class="xref py py-func docutils literal notranslate"><span class="pre">signal.signal()</span></code></a> ä¸€æ ·ï¼Œè¿™ä¸ªå‡½æ•°åªèƒ½åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨ã€‚</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.remove_signal_handler">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">remove_signal_handler</code><span class="sig-paren">(</span><em class="sig-param">sig</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.remove_signal_handler" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>ç§»é™¤ <em>sig</em> ä¿¡å·çš„å¤„ç†ç¨‹åºã€‚</p>
<p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the signal handler was removed, or <code class="docutils literal notranslate"><span class="pre">False</span></code> if
no handler was set for the given signal.</p>
<p class="availability"><a class="reference internal" href="intro.html#availability" tppabs="https://docs.python.org/zh-cn/3/library/intro.html#availability"><span class="std std-ref">å¯ç”¨æ€§</span></a>: Unixã€‚</p>
</dd></dl>

<div class="admonition seealso">
<p class="admonition-title">å‚è§</p>
<p><a class="reference internal" href="signal.html#module-signal" tppabs="https://docs.python.org/zh-cn/3/library/signal.html#module-signal" title="signal: Set handlers for asynchronous events."><code class="xref py py-mod docutils literal notranslate"><span class="pre">signal</span></code></a> æ¨¡å—ã€‚</p>
</div>
</div>
<div class="section" id="executing-code-in-thread-or-process-pools">
<h3><a class="toc-backref" href="#id15">åœ¨çº¿ç¨‹æˆ–è€…è¿›ç¨‹æ± ä¸­æ‰§è¡Œä»£ç ã€‚</a><a class="headerlink" href="#executing-code-in-thread-or-process-pools" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<dl class="method">
<dt id="asyncio.loop.run_in_executor">
<em class="property">awaitable </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">run_in_executor</code><span class="sig-paren">(</span><em class="sig-param">executor</em>, <em class="sig-param">func</em>, <em class="sig-param">*args</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.run_in_executor" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å®‰æ’åœ¨æŒ‡å®šçš„æ‰§è¡Œå™¨ä¸­è°ƒç”¨ <em>func</em> ã€‚</p>
<p>The <em>executor</em> argument should be an <a class="reference internal" href="concurrent.futures.html#concurrent.futures.Executor" tppabs="https://docs.python.org/zh-cn/3/library/concurrent.futures.html#concurrent.futures.Executor" title="concurrent.futures.Executor"><code class="xref py py-class docutils literal notranslate"><span class="pre">concurrent.futures.Executor</span></code></a>
instance. The default executor is used if <em>executor</em> is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>ç¤ºä¾‹:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">concurrent.futures</span>

<span class="k">def</span> <span class="nf">blocking_io</span><span class="p">():</span>
    <span class="c1"># File operations (such as logging) can block the</span>
    <span class="c1"># event loop: run them in a thread pool.</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/dev/urandom&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">cpu_bound</span><span class="p">():</span>
    <span class="c1"># CPU-bound operations will block the event loop:</span>
    <span class="c1"># in general it is preferable to run them in a</span>
    <span class="c1"># process pool.</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="mi">7</span><span class="p">))</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>

    <span class="c1">## Options:</span>

    <span class="c1"># 1. Run in the default loop&#39;s executor:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_in_executor</span><span class="p">(</span>
        <span class="kc">None</span><span class="p">,</span> <span class="n">blocking_io</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;default thread pool&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>

    <span class="c1"># 2. Run in a custom thread pool:</span>
    <span class="k">with</span> <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">ThreadPoolExecutor</span><span class="p">()</span> <span class="k">as</span> <span class="n">pool</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_in_executor</span><span class="p">(</span>
            <span class="n">pool</span><span class="p">,</span> <span class="n">blocking_io</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;custom thread pool&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>

    <span class="c1"># 3. Run in a custom process pool:</span>
    <span class="k">with</span> <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">ProcessPoolExecutor</span><span class="p">()</span> <span class="k">as</span> <span class="n">pool</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_in_executor</span><span class="p">(</span>
            <span class="n">pool</span><span class="p">,</span> <span class="n">cpu_bound</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;custom process pool&#39;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</pre></div>
</div>
<p>è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ª <a class="reference internal" href="asyncio-future.html#asyncio.Future" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-future.html#asyncio.Future" title="asyncio.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Future</span></code></a> å¯¹è±¡ã€‚</p>
<p>ä½¿ç”¨ <a class="reference internal" href="functools.html#functools.partial" tppabs="https://docs.python.org/zh-cn/3/library/functools.html#functools.partial" title="functools.partial"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code></a> <a class="reference internal" href="#asyncio-pass-keywords"><span class="std std-ref">ä¼ é€’å…³é”®å­—å‚æ•°</span></a>  ç»™ <em>func</em> ã€‚</p>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.5.3 ç‰ˆæ›´æ”¹: </span><a class="reference internal" href="#asyncio.loop.run_in_executor" title="asyncio.loop.run_in_executor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.run_in_executor()</span></code></a> no longer configures the
<code class="docutils literal notranslate"><span class="pre">max_workers</span></code> of the thread pool executor it creates, instead
leaving it up to the thread pool executor
(<a class="reference internal" href="concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" tppabs="https://docs.python.org/zh-cn/3/library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="concurrent.futures.ThreadPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThreadPoolExecutor</span></code></a>) to set the
default.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.set_default_executor">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">set_default_executor</code><span class="sig-paren">(</span><em class="sig-param">executor</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.set_default_executor" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Set <em>executor</em> as the default executor used by <a class="reference internal" href="#asyncio.loop.run_in_executor" title="asyncio.loop.run_in_executor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_in_executor()</span></code></a>.
<em>executor</em> should be an instance of
<a class="reference internal" href="concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" tppabs="https://docs.python.org/zh-cn/3/library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="concurrent.futures.ThreadPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThreadPoolExecutor</span></code></a>.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">3.8 ç‰ˆåå·²ç§»é™¤: </span>Using an executor that is not an instance of
<a class="reference internal" href="concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" tppabs="https://docs.python.org/zh-cn/3/library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="concurrent.futures.ThreadPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThreadPoolExecutor</span></code></a> is deprecated and
will trigger an error in Python 3.9.</p>
</div>
<p><em>executor</em> å¿…é¡»æ˜¯ä¸ª <a class="reference internal" href="concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" tppabs="https://docs.python.org/zh-cn/3/library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="concurrent.futures.ThreadPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">concurrent.futures.ThreadPoolExecutor</span></code></a> çš„å®ä¾‹ã€‚</p>
</dd></dl>

</div>
<div class="section" id="error-handling-api">
<h3><a class="toc-backref" href="#id16">é”™è¯¯å¤„ç†API</a><a class="headerlink" href="#error-handling-api" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>å…è®¸è‡ªå®šä¹‰äº‹ä»¶å¾ªç¯ä¸­å¦‚ä½•å»å¤„ç†å¼‚å¸¸ã€‚</p>
<dl class="method">
<dt id="asyncio.loop.set_exception_handler">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">set_exception_handler</code><span class="sig-paren">(</span><em class="sig-param">handler</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.set_exception_handler" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å°† <em>handler</em> è®¾ç½®ä¸ºæ–°çš„äº‹ä»¶å¾ªç¯å¼‚å¸¸å¤„ç†å™¨ã€‚</p>
<p>If <em>handler</em> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, the default exception handler will
be set.  Otherwise, <em>handler</em> must be a callable with the signature
matching <code class="docutils literal notranslate"><span class="pre">(loop,</span> <span class="pre">context)</span></code>, where <code class="docutils literal notranslate"><span class="pre">loop</span></code>
is a reference to the active event loop, and <code class="docutils literal notranslate"><span class="pre">context</span></code>
is a <code class="docutils literal notranslate"><span class="pre">dict</span></code> object containing the details of the exception
(see <a class="reference internal" href="#asyncio.loop.call_exception_handler" title="asyncio.loop.call_exception_handler"><code class="xref py py-meth docutils literal notranslate"><span class="pre">call_exception_handler()</span></code></a> documentation for details
about context).</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.get_exception_handler">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">get_exception_handler</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.get_exception_handler" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è¿”å›å½“å‰çš„å¼‚å¸¸å¤„ç†å™¨ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®å¼‚å¸¸å¤„ç†å™¨ï¼Œåˆ™è¿”å› <code class="docutils literal notranslate"><span class="pre">None</span></code> ã€‚</p>
<div class="versionadded">
<p><span class="versionmodified added">3.5.2 æ–°ç‰ˆåŠŸèƒ½.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.default_exception_handler">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">default_exception_handler</code><span class="sig-paren">(</span><em class="sig-param">context</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.default_exception_handler" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>é»˜è®¤çš„å¼‚å¸¸å¤„ç†å™¨ã€‚</p>
<p>This is called when an exception occurs and no exception
handler is set. This can be called by a custom exception
handler that wants to defer to the default handler behavior.</p>
<p><em>context</em> å‚æ•°å’Œ <a class="reference internal" href="#asyncio.loop.call_exception_handler" title="asyncio.loop.call_exception_handler"><code class="xref py py-meth docutils literal notranslate"><span class="pre">call_exception_handler()</span></code></a> ä¸­çš„åŒåå‚æ•°å®Œå…¨ç›¸åŒã€‚</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.call_exception_handler">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">call_exception_handler</code><span class="sig-paren">(</span><em class="sig-param">context</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.call_exception_handler" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è°ƒç”¨å½“å‰äº‹ä»¶å¾ªç¯å¼‚å¸¸å¤„ç†å™¨ã€‚</p>
<p><em>context</em> æ˜¯ä¸ªåŒ…å«ä¸‹åˆ—é”®çš„ <code class="docutils literal notranslate"><span class="pre">dict</span></code> å¯¹è±¡(æœªæ¥ç‰ˆæœ¬çš„Pythonå¯èƒ½ä¼šå¼•å…¥æ–°é”®)ï¼š</p>
<ul class="simple">
<li><p>'message': é”™è¯¯æ¶ˆæ¯ï¼›</p></li>
<li><p>'exception' ï¼ˆå¯é€‰ï¼‰: å¼‚å¸¸å¯¹è±¡ï¼›</p></li>
<li><p>'future' ï¼ˆå¯é€‰ï¼‰:  <a class="reference internal" href="asyncio-future.html#asyncio.Future" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-future.html#asyncio.Future" title="asyncio.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Future</span></code></a> å®ä¾‹ã€‚</p></li>
<li><p>'handle' ï¼ˆå¯é€‰ï¼‰: <a class="reference internal" href="#asyncio.Handle" title="asyncio.Handle"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Handle</span></code></a> å®ä¾‹ï¼›</p></li>
<li><p>'protocol' ï¼ˆå¯é€‰ï¼‰: <a class="reference internal" href="asyncio-protocol.html#asyncio-protocol" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio-protocol"><span class="std std-ref">Protocol</span></a> å®ä¾‹ï¼›</p></li>
<li><p>'transport' ï¼ˆå¯é€‰ï¼‰: <a class="reference internal" href="asyncio-protocol.html#asyncio-transport" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio-transport"><span class="std std-ref">Transport</span></a> å®ä¾‹ï¼›</p></li>
<li><p>'socket' ï¼ˆå¯é€‰ï¼‰ï¼š <a class="reference internal" href="socket.html#socket.socket" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.socket" title="socket.socket"><code class="xref py py-class docutils literal notranslate"><span class="pre">socket.socket</span></code></a> å®ä¾‹ã€‚</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">æ³¨è§£</p>
<p>This method should not be overloaded in subclassed
event loops.  For custom exception handling, use
the <a class="reference internal" href="#asyncio.loop.set_exception_handler" title="asyncio.loop.set_exception_handler"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_exception_handler()</span></code></a> method.</p>
</div>
</dd></dl>

</div>
<div class="section" id="enabling-debug-mode">
<h3><a class="toc-backref" href="#id17">å¼€å¯è°ƒè¯•æ¨¡å¼</a><a class="headerlink" href="#enabling-debug-mode" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<dl class="method">
<dt id="asyncio.loop.get_debug">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">get_debug</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.get_debug" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è·å–äº‹ä»¶å¾ªç¯è°ƒè¯•æ¨¡å¼çŠ¶æ€ï¼ˆ<a class="reference internal" href="functions.html#bool" tppabs="https://docs.python.org/zh-cn/3/library/functions.html#bool" title="bool"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>ï¼‰ã€‚</p>
<p>å¦‚æœç¯å¢ƒå˜é‡ <span class="target" id="index-13"></span><a class="reference internal" href="cmdline.html#envvar-PYTHONASYNCIODEBUG" tppabs="https://docs.python.org/zh-cn/3/using/cmdline.html#envvar-PYTHONASYNCIODEBUG"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONASYNCIODEBUG</span></code></a> æ˜¯ä¸€ä¸ªéç©ºå­—ç¬¦ä¸²ï¼Œå°±è¿”å› <code class="docutils literal notranslate"><span class="pre">True</span></code> ï¼Œå¦åˆ™å°±è¿”å› <code class="docutils literal notranslate"><span class="pre">False</span></code> ã€‚</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.set_debug">
<code class="sig-prename descclassname">loop.</code><code class="sig-name descname">set_debug</code><span class="sig-paren">(</span><em class="sig-param">enabled: bool</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.set_debug" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è®¾ç½®äº‹ä»¶å¾ªç¯çš„è°ƒè¯•æ¨¡å¼ã€‚</p>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.7 ç‰ˆæ›´æ”¹: </span>The new <code class="docutils literal notranslate"><span class="pre">-X</span> <span class="pre">dev</span></code> command line option can now also be used
to enable the debug mode.</p>
</div>
</dd></dl>

<div class="admonition seealso">
<p class="admonition-title">å‚è§</p>
<p><a class="reference internal" href="asyncio-dev.html#asyncio-debug-mode" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-dev.html#asyncio-debug-mode"><span class="std std-ref">debug mode of asyncio</span></a>.</p>
</div>
</div>
<div class="section" id="running-subprocesses">
<h3><a class="toc-backref" href="#id18">è¿è¡Œå­è¿›ç¨‹</a><a class="headerlink" href="#running-subprocesses" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>Methods described in this subsections are low-level.  In regular
async/await code consider using the high-level
<a class="reference internal" href="asyncio-subprocess.html#asyncio.create_subprocess_shell" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-subprocess.html#asyncio.create_subprocess_shell" title="asyncio.create_subprocess_shell"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.create_subprocess_shell()</span></code></a> and
<a class="reference internal" href="asyncio-subprocess.html#asyncio.create_subprocess_exec" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-subprocess.html#asyncio.create_subprocess_exec" title="asyncio.create_subprocess_exec"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.create_subprocess_exec()</span></code></a> convenience functions instead.</p>
<div class="admonition note">
<p class="admonition-title">æ³¨è§£</p>
<p>The default asyncio event loop on <strong>Windows</strong> does not support
subprocesses. See <a class="reference internal" href="asyncio-platforms.html#asyncio-windows-subprocess" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-platforms.html#asyncio-windows-subprocess"><span class="std std-ref">Subprocess Support on Windows</span></a> for details.</p>
</div>
<dl class="method">
<dt id="asyncio.loop.subprocess_exec">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">subprocess_exec</code><span class="sig-paren">(</span><em class="sig-param">protocol_factory</em>, <em class="sig-param">*args</em>, <em class="sig-param">stdin=subprocess.PIPE</em>, <em class="sig-param">stdout=subprocess.PIPE</em>, <em class="sig-param">stderr=subprocess.PIPE</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.subprocess_exec" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>ç”¨ <em>args</em> æŒ‡å®šçš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦ä¸²å‹å‚æ•°åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ã€‚</p>
<p><em>args</em> å¿…é¡»æ˜¯ä¸ªç”±ä¸‹åˆ—å½¢å¼çš„å­—ç¬¦ä¸²ç»„æˆçš„åˆ—è¡¨ï¼š</p>
<ul class="simple">
<li><p><a class="reference internal" href="stdtypes.html#str" tppabs="https://docs.python.org/zh-cn/3/library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>;</p></li>
<li><p>æˆ–è€…ç”± <a class="reference internal" href="os.html#filesystem-encoding" tppabs="https://docs.python.org/zh-cn/3/library/os.html#filesystem-encoding"><span class="std std-ref">æ–‡ä»¶ç†Šç¼–ç </span></a> ç¼–ç çš„ <a class="reference internal" href="stdtypes.html#bytes" tppabs="https://docs.python.org/zh-cn/3/library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> ã€‚</p></li>
</ul>
<p>The first string specifies the program executable,
and the remaining strings specify the arguments.  Together, string
arguments form the <code class="docutils literal notranslate"><span class="pre">argv</span></code> of the program.</p>
<p>This is similar to the standard library <a class="reference internal" href="subprocess.html#subprocess.Popen" tppabs="https://docs.python.org/zh-cn/3/library/subprocess.html#subprocess.Popen" title="subprocess.Popen"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a>
class called with <code class="docutils literal notranslate"><span class="pre">shell=False</span></code> and the list of strings passed as
the first argument; however, where <a class="reference internal" href="subprocess.html#subprocess.Popen" tppabs="https://docs.python.org/zh-cn/3/library/subprocess.html#subprocess.Popen" title="subprocess.Popen"><code class="xref py py-class docutils literal notranslate"><span class="pre">Popen</span></code></a> takes
a single argument which is list of strings, <em>subprocess_exec</em>
takes multiple string arguments.</p>
<p>The <em>protocol_factory</em> must be a callable returning a subclass of the
<a class="reference internal" href="asyncio-protocol.html#asyncio.SubprocessProtocol" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio.SubprocessProtocol" title="asyncio.SubprocessProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.SubprocessProtocol</span></code></a> class.</p>
<p>å…¶ä»–å‚æ•°ï¼š</p>
<ul>
<li><p><em>stdin</em> can be any of these:</p>
<ul class="simple">
<li><p>a file-like object representing a pipe to be connected to the
subprocess's standard input stream using
<a class="reference internal" href="#asyncio.loop.connect_write_pipe" title="asyncio.loop.connect_write_pipe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">connect_write_pipe()</span></code></a></p></li>
<li><p>the <a class="reference internal" href="subprocess.html#subprocess.PIPE" tppabs="https://docs.python.org/zh-cn/3/library/subprocess.html#subprocess.PIPE" title="subprocess.PIPE"><code class="xref py py-const docutils literal notranslate"><span class="pre">subprocess.PIPE</span></code></a> constant (default) which will create a new
pipe and connect it,</p></li>
<li><p>the value <code class="docutils literal notranslate"><span class="pre">None</span></code> which will make the subprocess inherit the file
descriptor from this process</p></li>
<li><p>the <a class="reference internal" href="subprocess.html#subprocess.DEVNULL" tppabs="https://docs.python.org/zh-cn/3/library/subprocess.html#subprocess.DEVNULL" title="subprocess.DEVNULL"><code class="xref py py-const docutils literal notranslate"><span class="pre">subprocess.DEVNULL</span></code></a> constant which indicates that the
special <a class="reference internal" href="os.html#os.devnull" tppabs="https://docs.python.org/zh-cn/3/library/os.html#os.devnull" title="os.devnull"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.devnull</span></code></a> file will be used</p></li>
</ul>
</li>
<li><p><em>stdout</em> can be any of these:</p>
<ul class="simple">
<li><p>a file-like object representing a pipe to be connected to the
subprocess's standard output stream using
<a class="reference internal" href="#asyncio.loop.connect_write_pipe" title="asyncio.loop.connect_write_pipe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">connect_write_pipe()</span></code></a></p></li>
<li><p>the <a class="reference internal" href="subprocess.html#subprocess.PIPE" tppabs="https://docs.python.org/zh-cn/3/library/subprocess.html#subprocess.PIPE" title="subprocess.PIPE"><code class="xref py py-const docutils literal notranslate"><span class="pre">subprocess.PIPE</span></code></a> constant (default) which will create a new
pipe and connect it,</p></li>
<li><p>the value <code class="docutils literal notranslate"><span class="pre">None</span></code> which will make the subprocess inherit the file
descriptor from this process</p></li>
<li><p>the <a class="reference internal" href="subprocess.html#subprocess.DEVNULL" tppabs="https://docs.python.org/zh-cn/3/library/subprocess.html#subprocess.DEVNULL" title="subprocess.DEVNULL"><code class="xref py py-const docutils literal notranslate"><span class="pre">subprocess.DEVNULL</span></code></a> constant which indicates that the
special <a class="reference internal" href="os.html#os.devnull" tppabs="https://docs.python.org/zh-cn/3/library/os.html#os.devnull" title="os.devnull"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.devnull</span></code></a> file will be used</p></li>
</ul>
</li>
<li><p><em>stderr</em> can be any of these:</p>
<ul class="simple">
<li><p>a file-like object representing a pipe to be connected to the
subprocess's standard error stream using
<a class="reference internal" href="#asyncio.loop.connect_write_pipe" title="asyncio.loop.connect_write_pipe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">connect_write_pipe()</span></code></a></p></li>
<li><p>the <a class="reference internal" href="subprocess.html#subprocess.PIPE" tppabs="https://docs.python.org/zh-cn/3/library/subprocess.html#subprocess.PIPE" title="subprocess.PIPE"><code class="xref py py-const docutils literal notranslate"><span class="pre">subprocess.PIPE</span></code></a> constant (default) which will create a new
pipe and connect it,</p></li>
<li><p>the value <code class="docutils literal notranslate"><span class="pre">None</span></code> which will make the subprocess inherit the file
descriptor from this process</p></li>
<li><p>the <a class="reference internal" href="subprocess.html#subprocess.DEVNULL" tppabs="https://docs.python.org/zh-cn/3/library/subprocess.html#subprocess.DEVNULL" title="subprocess.DEVNULL"><code class="xref py py-const docutils literal notranslate"><span class="pre">subprocess.DEVNULL</span></code></a> constant which indicates that the
special <a class="reference internal" href="os.html#os.devnull" tppabs="https://docs.python.org/zh-cn/3/library/os.html#os.devnull" title="os.devnull"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.devnull</span></code></a> file will be used</p></li>
<li><p>the <a class="reference internal" href="subprocess.html#subprocess.STDOUT" tppabs="https://docs.python.org/zh-cn/3/library/subprocess.html#subprocess.STDOUT" title="subprocess.STDOUT"><code class="xref py py-const docutils literal notranslate"><span class="pre">subprocess.STDOUT</span></code></a> constant which will connect the standard
error stream to the process' standard output stream</p></li>
</ul>
</li>
<li><p>All other keyword arguments are passed to <a class="reference internal" href="subprocess.html#subprocess.Popen" tppabs="https://docs.python.org/zh-cn/3/library/subprocess.html#subprocess.Popen" title="subprocess.Popen"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a>
without interpretation, except for <em>bufsize</em>, <em>universal_newlines</em>,
<em>shell</em>, <em>text</em>, <em>encoding</em> and <em>errors</em>, which should not be specified
at all.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">asyncio</span></code> subprocess API does not support decoding the streams
as text. <a class="reference internal" href="stdtypes.html#bytes.decode" tppabs="https://docs.python.org/zh-cn/3/library/stdtypes.html#bytes.decode" title="bytes.decode"><code class="xref py py-func docutils literal notranslate"><span class="pre">bytes.decode()</span></code></a> can be used to convert the bytes returned
from the stream to text.</p>
</li>
</ul>
<p>å…¶ä»–å‚æ•°çš„æ–‡æ¡£ï¼Œè¯·å‚é˜… <a class="reference internal" href="subprocess.html#subprocess.Popen" tppabs="https://docs.python.org/zh-cn/3/library/subprocess.html#subprocess.Popen" title="subprocess.Popen"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a> ç±»çš„æ„é€ å‡½æ•°ã€‚</p>
<p>Returns a pair of <code class="docutils literal notranslate"><span class="pre">(transport,</span> <span class="pre">protocol)</span></code>, where <em>transport</em>
conforms to the <a class="reference internal" href="asyncio-protocol.html#asyncio.SubprocessTransport" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio.SubprocessTransport" title="asyncio.SubprocessTransport"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.SubprocessTransport</span></code></a> base class and
<em>protocol</em> is an object instantiated by the <em>protocol_factory</em>.</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.loop.subprocess_shell">
<em class="property">coroutine </em><code class="sig-prename descclassname">loop.</code><code class="sig-name descname">subprocess_shell</code><span class="sig-paren">(</span><em class="sig-param">protocol_factory</em>, <em class="sig-param">cmd</em>, <em class="sig-param">*</em>, <em class="sig-param">stdin=subprocess.PIPE</em>, <em class="sig-param">stdout=subprocess.PIPE</em>, <em class="sig-param">stderr=subprocess.PIPE</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.loop.subprocess_shell" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Create a subprocess from <em>cmd</em>, which can be a <a class="reference internal" href="stdtypes.html#str" tppabs="https://docs.python.org/zh-cn/3/library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> or a
<a class="reference internal" href="stdtypes.html#bytes" tppabs="https://docs.python.org/zh-cn/3/library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> string encoded to the
<a class="reference internal" href="os.html#filesystem-encoding" tppabs="https://docs.python.org/zh-cn/3/library/os.html#filesystem-encoding"><span class="std std-ref">filesystem encoding</span></a>,
using the platform's &quot;shell&quot; syntax.</p>
<p>è¿™ç±»ä¼¼ä¸ç”¨ <code class="docutils literal notranslate"><span class="pre">shell=True</span></code> è°ƒç”¨æ ‡å‡†åº“çš„ <a class="reference internal" href="subprocess.html#subprocess.Popen" tppabs="https://docs.python.org/zh-cn/3/library/subprocess.html#subprocess.Popen" title="subprocess.Popen"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a> ç±»ã€‚</p>
<p>The <em>protocol_factory</em> must be a callable returning a subclass of the
<a class="reference internal" href="asyncio-protocol.html#asyncio.SubprocessProtocol" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio.SubprocessProtocol" title="asyncio.SubprocessProtocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubprocessProtocol</span></code></a> class.</p>
<p>See <a class="reference internal" href="#asyncio.loop.subprocess_exec" title="asyncio.loop.subprocess_exec"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subprocess_exec()</span></code></a> for more details about
the remaining arguments.</p>
<p>Returns a pair of <code class="docutils literal notranslate"><span class="pre">(transport,</span> <span class="pre">protocol)</span></code>, where <em>transport</em>
conforms to the <a class="reference internal" href="asyncio-protocol.html#asyncio.SubprocessTransport" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio.SubprocessTransport" title="asyncio.SubprocessTransport"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubprocessTransport</span></code></a> base class and
<em>protocol</em> is an object instantiated by the <em>protocol_factory</em>.</p>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">æ³¨è§£</p>
<p>It is the application's responsibility to ensure that all whitespace
and special characters are quoted appropriately to avoid <a class="reference external" href="javascript:if(confirm('https://en.wikipedia.org/wiki/issue38971  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://en.wikipedia.org/wiki/issue38971#Shell_injection'" tppabs="https://en.wikipedia.org/wiki/Shell_injection#Shell_injection">shell injection</a>
vulnerabilities. The <a class="reference internal" href="shlex.html#shlex.quote" tppabs="https://docs.python.org/zh-cn/3/library/shlex.html#shlex.quote" title="shlex.quote"><code class="xref py py-func docutils literal notranslate"><span class="pre">shlex.quote()</span></code></a> function can be used to
properly escape whitespace and special characters in strings that
are going to be used to construct shell commands.</p>
</div>
</div>
</div>
<div class="section" id="callback-handles">
<h2>å›è°ƒå¤„ç†<a class="headerlink" href="#callback-handles" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<dl class="class">
<dt id="asyncio.Handle">
<em class="property">class </em><code class="sig-prename descclassname">asyncio.</code><code class="sig-name descname">Handle</code><a class="headerlink" href="#asyncio.Handle" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>A callback wrapper object returned by <a class="reference internal" href="#asyncio.loop.call_soon" title="asyncio.loop.call_soon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.call_soon()</span></code></a>,
<a class="reference internal" href="#asyncio.loop.call_soon_threadsafe" title="asyncio.loop.call_soon_threadsafe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.call_soon_threadsafe()</span></code></a>.</p>
<dl class="method">
<dt id="asyncio.Handle.cancel">
<code class="sig-name descname">cancel</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.Handle.cancel" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Cancel the callback.  If the callback has already been canceled
or executed, this method has no effect.</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.Handle.cancelled">
<code class="sig-name descname">cancelled</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.Handle.cancelled" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the callback was cancelled.</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 æ–°ç‰ˆåŠŸèƒ½.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="asyncio.TimerHandle">
<em class="property">class </em><code class="sig-prename descclassname">asyncio.</code><code class="sig-name descname">TimerHandle</code><a class="headerlink" href="#asyncio.TimerHandle" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>A callback wrapper object returned by <a class="reference internal" href="#asyncio.loop.call_later" title="asyncio.loop.call_later"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.call_later()</span></code></a>,
and <a class="reference internal" href="#asyncio.loop.call_at" title="asyncio.loop.call_at"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.call_at()</span></code></a>.</p>
<p>This class is a subclass of <a class="reference internal" href="#asyncio.Handle" title="asyncio.Handle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Handle</span></code></a>.</p>
<dl class="method">
<dt id="asyncio.TimerHandle.when">
<code class="sig-name descname">when</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.TimerHandle.when" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Return a scheduled callback time as <a class="reference internal" href="functions.html#float" tppabs="https://docs.python.org/zh-cn/3/library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> seconds.</p>
<p>The time is an absolute timestamp, using the same time
reference as <a class="reference internal" href="#asyncio.loop.time" title="asyncio.loop.time"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.time()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 æ–°ç‰ˆåŠŸèƒ½.</span></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="server-objects">
<h2>Server Objects<a class="headerlink" href="#server-objects" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>Server objects are created by <a class="reference internal" href="#asyncio.loop.create_server" title="asyncio.loop.create_server"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.create_server()</span></code></a>,
<a class="reference internal" href="#asyncio.loop.create_unix_server" title="asyncio.loop.create_unix_server"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.create_unix_server()</span></code></a>, <a class="reference internal" href="asyncio-stream.html#asyncio.start_server" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-stream.html#asyncio.start_server" title="asyncio.start_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">start_server()</span></code></a>,
and <a class="reference internal" href="asyncio-stream.html#asyncio.start_unix_server" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-stream.html#asyncio.start_unix_server" title="asyncio.start_unix_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">start_unix_server()</span></code></a> functions.</p>
<p>Do not instantiate the class directly.</p>
<dl class="class">
<dt id="asyncio.Server">
<em class="property">class </em><code class="sig-prename descclassname">asyncio.</code><code class="sig-name descname">Server</code><a class="headerlink" href="#asyncio.Server" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p><em>Server</em> å¯¹è±¡æ˜¯å¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨ã€‚å½“ç”¨äº <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> è¯­å¥æ—¶ï¼Œå¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯ä»¥ç¡®ä¿ Server å¯¹è±¡è¢«å…³é—­ï¼Œå¹¶ä¸”åœ¨ <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> è¯­å¥å®Œæˆåï¼Œä¸æ¥å—æ–°çš„è¿æ¥ã€‚</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">srv</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">create_server</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="k">async</span> <span class="k">with</span> <span class="n">srv</span><span class="p">:</span>
    <span class="c1"># some code</span>

<span class="c1"># At this point, srv is closed and no longer accepts new connections.</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.7 ç‰ˆæ›´æ”¹: </span>Python3.7 å¼€å§‹ï¼ŒServer å¯¹è±¡æ˜¯ä¸€ä¸ªå¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨ã€‚</p>
</div>
<dl class="method">
<dt id="asyncio.Server.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.Server.close" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>åœæ­¢æœåŠ¡ï¼šå…³é—­ç›‘å¬çš„å¥—æ¥å­—å¹¶ä¸”è®¾ç½® <a class="reference internal" href="#asyncio.Server.sockets" title="asyncio.Server.sockets"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sockets</span></code></a> å±æ€§ä¸º <code class="docutils literal notranslate"><span class="pre">None</span></code> ã€‚</p>
<p>ç”¨äºè¡¨ç¤ºå·²ç»è¿è¿›æ¥çš„å®¢æˆ·ç«¯è¿æ¥ä¼šä¿æŒæ‰“å¼€çš„çŠ¶æ€ã€‚</p>
<p>æœåŠ¡å™¨æ˜¯è¢«å¼‚æ­¥å…³é—­çš„ï¼Œä½¿ç”¨ <a class="reference internal" href="#asyncio.Server.wait_closed" title="asyncio.Server.wait_closed"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wait_closed()</span></code></a> åç¨‹æ¥ç­‰å¾…æœåŠ¡å™¨å…³é—­ã€‚</p>
</dd></dl>

<dl class="method">
<dt id="asyncio.Server.get_loop">
<code class="sig-name descname">get_loop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.Server.get_loop" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Return the event loop associated with the server object.</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 æ–°ç‰ˆåŠŸèƒ½.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.Server.start_serving">
<em class="property">coroutine </em><code class="sig-name descname">start_serving</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.Server.start_serving" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å¼€å§‹æ¥å—è¿æ¥ã€‚</p>
<p>è¿™ä¸ªæ–¹æ³•æ˜¯å¹‚ç­‰çš„ã€ç›¸åŒå‚æ•°é‡å¤æ‰§è¡Œï¼Œèƒ½è·å¾—ç›¸åŒçš„ç»“æœã€‘ï¼Œæ‰€ä»¥æ­¤æ–¹æ³•èƒ½åœ¨æœåŠ¡å·²ç»è¿è¡Œçš„æ—¶å€™è°ƒç”¨ã€‚</p>
<p>The <em>start_serving</em> keyword-only parameter to
<a class="reference internal" href="#asyncio.loop.create_server" title="asyncio.loop.create_server"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.create_server()</span></code></a> and
<a class="reference internal" href="asyncio-stream.html#asyncio.start_server" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-stream.html#asyncio.start_server" title="asyncio.start_server"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.start_server()</span></code></a> allows creating a Server object
that is not accepting connections initially.  In this case
<code class="docutils literal notranslate"><span class="pre">Server.start_serving()</span></code>, or <a class="reference internal" href="#asyncio.Server.serve_forever" title="asyncio.Server.serve_forever"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Server.serve_forever()</span></code></a> can be used
to make the Server start accepting connections.</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 æ–°ç‰ˆåŠŸèƒ½.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.Server.serve_forever">
<em class="property">coroutine </em><code class="sig-name descname">serve_forever</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.Server.serve_forever" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å¼€å§‹æ¥å—è¿æ¥ï¼Œç›´åˆ°åç¨‹è¢«å–æ¶ˆã€‚ <code class="docutils literal notranslate"><span class="pre">serve_forever</span></code> ä»»åŠ¡çš„å–æ¶ˆå°†å¯¼è‡´æœåŠ¡å™¨è¢«å…³é—­ã€‚</p>
<p>å¦‚æœæœåŠ¡å™¨å·²ç»åœ¨æ¥å—è¿æ¥äº†ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥è¢«è°ƒç”¨ã€‚æ¯ä¸ª <em>Server</em> å¯¹è±¡ï¼Œä»…èƒ½æœ‰ä¸€ä¸ª <code class="docutils literal notranslate"><span class="pre">serve_forever</span></code> ä»»åŠ¡ã€‚</p>
<p>ç¤ºä¾‹:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">client_connected</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">writer</span><span class="p">):</span>
    <span class="c1"># Communicate with the client with</span>
    <span class="c1"># reader/writer streams.  For example:</span>
    <span class="k">await</span> <span class="n">reader</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">):</span>
    <span class="n">srv</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">start_server</span><span class="p">(</span>
        <span class="n">client_connected</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">srv</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">(</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">3.7 æ–°ç‰ˆåŠŸèƒ½.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.Server.is_serving">
<code class="sig-name descname">is_serving</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.Server.is_serving" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å¦‚æœæœåŠ¡å™¨æ­£åœ¨æ¥å—æ–°è¿æ¥çš„çŠ¶æ€ï¼Œè¿”å› <code class="docutils literal notranslate"><span class="pre">True</span></code> ã€‚</p>
<div class="versionadded">
<p><span class="versionmodified added">3.7 æ–°ç‰ˆåŠŸèƒ½.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="asyncio.Server.wait_closed">
<em class="property">coroutine </em><code class="sig-name descname">wait_closed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#asyncio.Server.wait_closed" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>ç­‰å¾… <a class="reference internal" href="#asyncio.Server.close" title="asyncio.Server.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> æ–¹æ³•æ‰§è¡Œå®Œæ¯•ã€‚</p>
</dd></dl>

<dl class="attribute">
<dt id="asyncio.Server.sockets">
<code class="sig-name descname">sockets</code><a class="headerlink" href="#asyncio.Server.sockets" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>List of <a class="reference internal" href="socket.html#socket.socket" tppabs="https://docs.python.org/zh-cn/3/library/socket.html#socket.socket" title="socket.socket"><code class="xref py py-class docutils literal notranslate"><span class="pre">socket.socket</span></code></a> objects the server is listening on.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">åœ¨ 3.7 ç‰ˆæ›´æ”¹: </span>Prior to Python 3.7 <code class="docutils literal notranslate"><span class="pre">Server.sockets</span></code> used to return an
internal list of server sockets directly.  In 3.7 a copy
of that list is returned.</p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="event-loop-implementations">
<span id="asyncio-event-loops"></span><h2>äº‹ä»¶å¾ªç¯å®ç°<a class="headerlink" href="#event-loop-implementations" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>asyncio ships with two different event loop implementations:
<a class="reference internal" href="#asyncio.SelectorEventLoop" title="asyncio.SelectorEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelectorEventLoop</span></code></a> and <a class="reference internal" href="#asyncio.ProactorEventLoop" title="asyncio.ProactorEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProactorEventLoop</span></code></a>.</p>
<p>By default asyncio is configured to use <a class="reference internal" href="#asyncio.SelectorEventLoop" title="asyncio.SelectorEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelectorEventLoop</span></code></a>
on Unix and <a class="reference internal" href="#asyncio.ProactorEventLoop" title="asyncio.ProactorEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProactorEventLoop</span></code></a> on Windows.</p>
<dl class="class">
<dt id="asyncio.SelectorEventLoop">
<em class="property">class </em><code class="sig-prename descclassname">asyncio.</code><code class="sig-name descname">SelectorEventLoop</code><a class="headerlink" href="#asyncio.SelectorEventLoop" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>An event loop based on the <a class="reference internal" href="selectors.html#module-selectors" tppabs="https://docs.python.org/zh-cn/3/library/selectors.html#module-selectors" title="selectors: High-level I/O multiplexing."><code class="xref py py-mod docutils literal notranslate"><span class="pre">selectors</span></code></a> module.</p>
<p>Uses the most efficient <em>selector</em> available for the given
platform.  It is also possible to manually configure the
exact selector implementation to be used:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">selectors</span>

<span class="n">selector</span> <span class="o">=</span> <span class="n">selectors</span><span class="o">.</span><span class="n">SelectSelector</span><span class="p">()</span>
<span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">SelectorEventLoop</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">set_event_loop</span><span class="p">(</span><span class="n">loop</span><span class="p">)</span>
</pre></div>
</div>
<p class="availability"><a class="reference internal" href="intro.html#availability" tppabs="https://docs.python.org/zh-cn/3/library/intro.html#availability"><span class="std std-ref">å¯ç”¨æ€§</span></a>: Unix, Windowsã€‚</p>
</dd></dl>

<dl class="class">
<dt id="asyncio.ProactorEventLoop">
<em class="property">class </em><code class="sig-prename descclassname">asyncio.</code><code class="sig-name descname">ProactorEventLoop</code><a class="headerlink" href="#asyncio.ProactorEventLoop" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>ç”¨ &quot;I/O Completion Ports&quot; (IOCP) æ„å»ºçš„ä¸“ä¸ºWindows çš„äº‹ä»¶å¾ªç¯ã€‚</p>
<p class="availability"><a class="reference internal" href="intro.html#availability" tppabs="https://docs.python.org/zh-cn/3/library/intro.html#availability"><span class="std std-ref">å¯ç”¨æ€§</span></a>: Windowsã€‚</p>
<div class="admonition seealso">
<p class="admonition-title">å‚è§</p>
<p><a class="reference external" href="javascript:if(confirm('https://docs.microsoft.com/en-ca/windows/desktop/FileIO/issue38066  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.microsoft.com/en-ca/windows/desktop/FileIO/issue38066'" tppabs="https://docs.microsoft.com/en-ca/windows/desktop/FileIO/i-o-completion-ports">MSDN documentation on I/O Completion Ports</a>.</p>
</div>
</dd></dl>

<dl class="class">
<dt id="asyncio.AbstractEventLoop">
<em class="property">class </em><code class="sig-prename descclassname">asyncio.</code><code class="sig-name descname">AbstractEventLoop</code><a class="headerlink" href="#asyncio.AbstractEventLoop" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>Abstract base class for asyncio-compliant event loops.</p>
<p>The <a class="reference internal" href="#asyncio-event-loop"><span class="std std-ref">Event Loop Methods</span></a> section lists all
methods that an alternative implementation of <code class="docutils literal notranslate"><span class="pre">AbstractEventLoop</span></code>
should have defined.</p>
</dd></dl>

</div>
<div class="section" id="examples">
<h2>ç¤ºä¾‹<a class="headerlink" href="#examples" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>Note that all examples in this section <strong>purposefully</strong> show how
to use the low-level event loop APIs, such as <a class="reference internal" href="#asyncio.loop.run_forever" title="asyncio.loop.run_forever"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.run_forever()</span></code></a>
and <a class="reference internal" href="#asyncio.loop.call_soon" title="asyncio.loop.call_soon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.call_soon()</span></code></a>.  Modern asyncio applications rarely
need to be written this way; consider using the high-level functions
like <a class="reference internal" href="asyncio-task.html#asyncio.run" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-task.html#asyncio.run" title="asyncio.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.run()</span></code></a>.</p>
<div class="section" id="hello-world-with-call-soon">
<span id="asyncio-example-lowlevel-helloworld"></span><h3>call_soon() çš„ Hello World ç¤ºä¾‹ã€‚<a class="headerlink" href="#hello-world-with-call-soon" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>An example using the <a class="reference internal" href="#asyncio.loop.call_soon" title="asyncio.loop.call_soon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.call_soon()</span></code></a> method to schedule a
callback. The callback displays <code class="docutils literal notranslate"><span class="pre">&quot;Hello</span> <span class="pre">World&quot;</span></code> and then stops the
event loop:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">def</span> <span class="nf">hello_world</span><span class="p">(</span><span class="n">loop</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A callback to print &#39;Hello World&#39; and stop the event loop&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hello World&#39;</span><span class="p">)</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>

<span class="c1"># Schedule a call to hello_world()</span>
<span class="n">loop</span><span class="o">.</span><span class="n">call_soon</span><span class="p">(</span><span class="n">hello_world</span><span class="p">,</span> <span class="n">loop</span><span class="p">)</span>

<span class="c1"># Blocking call interrupted by loop.stop()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">run_forever</span><span class="p">()</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">å‚è§</p>
<p>A similar <a class="reference internal" href="asyncio-task.html#coroutine" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-task.html#coroutine"><span class="std std-ref">Hello World</span></a>
example created with a coroutine and the <a class="reference internal" href="asyncio-task.html#asyncio.run" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-task.html#asyncio.run" title="asyncio.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">run()</span></code></a> function.</p>
</div>
</div>
<div class="section" id="display-the-current-date-with-call-later">
<span id="asyncio-example-call-later"></span><h3>ä½¿ç”¨ call_later() æ¥å±•ç¤ºå½“å‰çš„æ—¥æœŸ<a class="headerlink" href="#display-the-current-date-with-call-later" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>An example of a callback displaying the current date every second. The
callback uses the <a class="reference internal" href="#asyncio.loop.call_later" title="asyncio.loop.call_later"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.call_later()</span></code></a> method to reschedule itself
after 5 seconds, and then stops the event loop:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">datetime</span>

<span class="k">def</span> <span class="nf">display_date</span><span class="p">(</span><span class="n">end_time</span><span class="p">,</span> <span class="n">loop</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">loop</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">end_time</span><span class="p">:</span>
        <span class="n">loop</span><span class="o">.</span><span class="n">call_later</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">display_date</span><span class="p">,</span> <span class="n">end_time</span><span class="p">,</span> <span class="n">loop</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">loop</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>

<span class="c1"># Schedule the first call to display_date()</span>
<span class="n">end_time</span> <span class="o">=</span> <span class="n">loop</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="mf">5.0</span>
<span class="n">loop</span><span class="o">.</span><span class="n">call_soon</span><span class="p">(</span><span class="n">display_date</span><span class="p">,</span> <span class="n">end_time</span><span class="p">,</span> <span class="n">loop</span><span class="p">)</span>

<span class="c1"># Blocking call interrupted by loop.stop()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">run_forever</span><span class="p">()</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">å‚è§</p>
<p>A similar <a class="reference internal" href="asyncio-task.html#asyncio-example-sleep" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-task.html#asyncio-example-sleep"><span class="std std-ref">current date</span></a> example
created with a coroutine and the <a class="reference internal" href="asyncio-task.html#asyncio.run" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-task.html#asyncio.run" title="asyncio.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">run()</span></code></a> function.</p>
</div>
</div>
<div class="section" id="watch-a-file-descriptor-for-read-events">
<span id="asyncio-example-watch-fd"></span><h3>ç›‘æ§ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦çš„è¯»äº‹ä»¶<a class="headerlink" href="#watch-a-file-descriptor-for-read-events" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>ä½¿ç”¨ <a class="reference internal" href="#asyncio.loop.add_reader" title="asyncio.loop.add_reader"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.add_reader()</span></code></a> æ–¹æ³•ï¼Œç­‰åˆ°æ–‡ä»¶æè¿°ç¬¦æ”¶åˆ°ä¸€äº›æ•°æ®ï¼Œç„¶åå…³é—­äº‹ä»¶å¾ªç¯ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">socket</span> <span class="kn">import</span> <span class="n">socketpair</span>

<span class="c1"># Create a pair of connected file descriptors</span>
<span class="n">rsock</span><span class="p">,</span> <span class="n">wsock</span> <span class="o">=</span> <span class="n">socketpair</span><span class="p">()</span>

<span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">reader</span><span class="p">():</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">rsock</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Received:&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>

    <span class="c1"># We are done: unregister the file descriptor</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">remove_reader</span><span class="p">(</span><span class="n">rsock</span><span class="p">)</span>

    <span class="c1"># Stop the event loop</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="c1"># Register the file descriptor for read event</span>
<span class="n">loop</span><span class="o">.</span><span class="n">add_reader</span><span class="p">(</span><span class="n">rsock</span><span class="p">,</span> <span class="n">reader</span><span class="p">)</span>

<span class="c1"># Simulate the reception of data from the network</span>
<span class="n">loop</span><span class="o">.</span><span class="n">call_soon</span><span class="p">(</span><span class="n">wsock</span><span class="o">.</span><span class="n">send</span><span class="p">,</span> <span class="s1">&#39;abc&#39;</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1"># Run the event loop</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">run_forever</span><span class="p">()</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="c1"># We are done. Close sockets and the event loop.</span>
    <span class="n">rsock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">wsock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">å‚è§</p>
<ul class="simple">
<li><p>A similar <a class="reference internal" href="asyncio-protocol.html#asyncio-example-create-connection" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-protocol.html#asyncio-example-create-connection"><span class="std std-ref">example</span></a>
using transports, protocols, and the
<a class="reference internal" href="#asyncio.loop.create_connection" title="asyncio.loop.create_connection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.create_connection()</span></code></a> method.</p></li>
<li><p>Another similar <a class="reference internal" href="asyncio-stream.html#asyncio-example-create-connection-streams" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-stream.html#asyncio-example-create-connection-streams"><span class="std std-ref">example</span></a>
using the high-level <a class="reference internal" href="asyncio-stream.html#asyncio.open_connection" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-stream.html#asyncio.open_connection" title="asyncio.open_connection"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.open_connection()</span></code></a> function
and streams.</p></li>
</ul>
</div>
</div>
<div class="section" id="set-signal-handlers-for-sigint-and-sigterm">
<span id="asyncio-example-unix-signals"></span><h3>ä¸ºSIGINTå’ŒSIGTERMè®¾ç½®ä¿¡å·å¤„ç†å™¨<a class="headerlink" href="#set-signal-handlers-for-sigint-and-sigterm" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>(This <code class="docutils literal notranslate"><span class="pre">signals</span></code> example only works on Unix.)</p>
<p>Register handlers for signals <code class="xref py py-data docutils literal notranslate"><span class="pre">SIGINT</span></code> and <code class="xref py py-data docutils literal notranslate"><span class="pre">SIGTERM</span></code>
using the <a class="reference internal" href="#asyncio.loop.add_signal_handler" title="asyncio.loop.add_signal_handler"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loop.add_signal_handler()</span></code></a> method:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">functools</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">signal</span>

<span class="k">def</span> <span class="nf">ask_exit</span><span class="p">(</span><span class="n">signame</span><span class="p">,</span> <span class="n">loop</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;got signal </span><span class="si">%s</span><span class="s2">: exit&quot;</span> <span class="o">%</span> <span class="n">signame</span><span class="p">)</span>
    <span class="n">loop</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_running_loop</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">signame</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;SIGINT&#39;</span><span class="p">,</span> <span class="s1">&#39;SIGTERM&#39;</span><span class="p">}:</span>
        <span class="n">loop</span><span class="o">.</span><span class="n">add_signal_handler</span><span class="p">(</span>
            <span class="nb">getattr</span><span class="p">(</span><span class="n">signal</span><span class="p">,</span> <span class="n">signame</span><span class="p">),</span>
            <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">ask_exit</span><span class="p">,</span> <span class="n">signame</span><span class="p">,</span> <span class="n">loop</span><span class="p">))</span>

    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3600</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Event loop running for 1 hour, press Ctrl+C to interrupt.&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;pid {os.getpid()}: send SIGINT or SIGTERM to exit.&quot;</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="contents.html" tppabs="https://docs.python.org/zh-cn/3/contents.html">ç›®å½•</a></h3>
  <ul>
<li><a class="reference internal" href="#">äº‹ä»¶å¾ªç¯</a><ul>
<li><a class="reference internal" href="#event-loop-methods">äº‹ä»¶å¾ªç¯æ–¹æ³•é›†</a><ul>
<li><a class="reference internal" href="#running-and-stopping-the-loop">è¿è¡Œå’Œåœæ­¢å¾ªç¯</a></li>
<li><a class="reference internal" href="#scheduling-callbacks">è°ƒåº¦å›è°ƒ</a></li>
<li><a class="reference internal" href="#scheduling-delayed-callbacks">è°ƒåº¦å»¶è¿Ÿå›è°ƒ</a></li>
<li><a class="reference internal" href="#creating-futures-and-tasks">åˆ›å»º Futures å’Œ Tasks</a></li>
<li><a class="reference internal" href="#opening-network-connections">æ‰“å¼€ç½‘ç»œè¿æ¥</a></li>
<li><a class="reference internal" href="#creating-network-servers">åˆ›å»ºç½‘ç»œæœåŠ¡</a></li>
<li><a class="reference internal" href="#transferring-files">ä¼ è¾“æ–‡ä»¶</a></li>
<li><a class="reference internal" href="#tls-upgrade">TLS å‡çº§</a></li>
<li><a class="reference internal" href="#watching-file-descriptors">ç›‘æ§æ–‡ä»¶æè¿°ç¬¦</a></li>
<li><a class="reference internal" href="#working-with-socket-objects-directly">ç›´æ¥ä½¿ç”¨ socket å¯¹è±¡</a></li>
<li><a class="reference internal" href="#dns">DNS</a></li>
<li><a class="reference internal" href="#working-with-pipes">ä½¿ç”¨ç®¡é“</a></li>
<li><a class="reference internal" href="#unix-signals">Unix ä¿¡å·</a></li>
<li><a class="reference internal" href="#executing-code-in-thread-or-process-pools">åœ¨çº¿ç¨‹æˆ–è€…è¿›ç¨‹æ± ä¸­æ‰§è¡Œä»£ç ã€‚</a></li>
<li><a class="reference internal" href="#error-handling-api">é”™è¯¯å¤„ç†API</a></li>
<li><a class="reference internal" href="#enabling-debug-mode">å¼€å¯è°ƒè¯•æ¨¡å¼</a></li>
<li><a class="reference internal" href="#running-subprocesses">è¿è¡Œå­è¿›ç¨‹</a></li>
</ul>
</li>
<li><a class="reference internal" href="#callback-handles">å›è°ƒå¤„ç†</a></li>
<li><a class="reference internal" href="#server-objects">Server Objects</a></li>
<li><a class="reference internal" href="#event-loop-implementations">äº‹ä»¶å¾ªç¯å®ç°</a></li>
<li><a class="reference internal" href="#examples">ç¤ºä¾‹</a><ul>
<li><a class="reference internal" href="#hello-world-with-call-soon">call_soon() çš„ Hello World ç¤ºä¾‹ã€‚</a></li>
<li><a class="reference internal" href="#display-the-current-date-with-call-later">ä½¿ç”¨ call_later() æ¥å±•ç¤ºå½“å‰çš„æ—¥æœŸ</a></li>
<li><a class="reference internal" href="#watch-a-file-descriptor-for-read-events">ç›‘æ§ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦çš„è¯»äº‹ä»¶</a></li>
<li><a class="reference internal" href="#set-signal-handlers-for-sigint-and-sigterm">ä¸ºSIGINTå’ŒSIGTERMè®¾ç½®ä¿¡å·å¤„ç†å™¨</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>ä¸Šä¸€ä¸ªä¸»é¢˜</h4>
  <p class="topless"><a href="asyncio-exceptions.html" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-exceptions.html"
                        title="ä¸Šä¸€ç« ">å¼‚å¸¸</a></p>
  <h4>ä¸‹ä¸€ä¸ªä¸»é¢˜</h4>
  <p class="topless"><a href="asyncio-future.html" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-future.html"
                        title="ä¸‹ä¸€ç« ">Futures</a></p>
  <div role="note" aria-label="source link">
    <h3>æœ¬é¡µ</h3>
    <ul class="this-page-menu">
      <li><a href="bugs.html" tppabs="https://docs.python.org/zh-cn/3/bugs.html">æäº¤ Bug</a></li>
      <li>
        <a href="javascript:if(confirm('https://github.com/python/cpython/blob/3.8/Doc/library/asyncio-eventloop.rst  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/python/cpython/blob/3.8/Doc/library/asyncio-eventloop.rst'" tppabs="https://github.com/python/cpython/blob/3.8/Doc/library/asyncio-eventloop.rst"
            rel="nofollow">æ˜¾ç¤ºæºä»£ç 
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>å¯¼èˆª</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" tppabs="https://docs.python.org/zh-cn/3/genindex.html" title="æ€»ç›®å½•"
             >ç´¢å¼•</a></li>
        <li class="right" >
          <a href="py-modindex.html" tppabs="https://docs.python.org/zh-cn/3/py-modindex.html" title="Python æ¨¡å—ç´¢å¼•"
             >æ¨¡å—</a> |</li>
        <li class="right" >
          <a href="asyncio-future.html" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-future.html" title="Futures"
             >ä¸‹ä¸€é¡µ</a> |</li>
        <li class="right" >
          <a href="asyncio-exceptions.html" tppabs="https://docs.python.org/zh-cn/3/library/asyncio-exceptions.html" title="å¼‚å¸¸"
             >ä¸Šä¸€é¡µ</a> |</li>

    <li><img src="py.png" tppabs="https://docs.python.org/zh-cn/3/_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="javascript:if(confirm('https://www.python.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.python.org/'" tppabs="https://www.python.org/">Python</a> &#187;</li>
    

    <li>
      <span class="language_switcher_placeholder">zh_CN</span>
      <span class="version_switcher_placeholder">3.8.2</span>
      <a href="index-11.html" tppabs="https://docs.python.org/zh-cn/3/index.html">æ–‡æ¡£</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index-2.html" tppabs="https://docs.python.org/zh-cn/3/library/index.html" >Python æ ‡å‡†åº“</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="ipc.html" tppabs="https://docs.python.org/zh-cn/3/library/ipc.html" >ç½‘ç»œå’Œè¿›ç¨‹é—´é€šä¿¡</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="asyncio.html" tppabs="https://docs.python.org/zh-cn/3/library/asyncio.html" ><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code> --- å¼‚æ­¥ I/O</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="https://docs.python.org/zh-cn/3/search.html" method="get">
          <input placeholder="å¿«é€Ÿæœç´¢" type="text" name="q" />
          <input type="submit" value="è½¬å‘" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="copyright.html" tppabs="https://docs.python.org/zh-cn/3/copyright.html">ç‰ˆæƒæ‰€æœ‰</a> 2001-2020, Python Software Foundation.
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="javascript:if(confirm('https://www.python.org/psf/donations/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.python.org/psf/donations/'" tppabs="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    æœ€åæ›´æ–°äº 3æœˆ 26, 2020.
    <a href="javascript:if(confirm('https://docs.python.org/3/bugs.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/bugs.html'" tppabs="https://docs.python.org/3/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="javascript:if(confirm('https://www.sphinx-doc.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.sphinx-doc.org/'" tppabs="https://www.sphinx-doc.org/">Sphinx</a> 2.3.1.
    </div>

  </body>
</html>