
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <title>ç”¨ Python è¿›è¡Œ Curses ç¼–ç¨‹ &#8212; Python 3.8.2 æ–‡æ¡£</title>
    <link rel="stylesheet" href="pydoctheme.css" tppabs="https://docs.python.org/zh-cn/3/_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="pygments.css" tppabs="https://docs.python.org/zh-cn/3/_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="documentation_options.js" tppabs="https://docs.python.org/zh-cn/3/_static/documentation_options.js"></script>
    <script type="text/javascript" src="jquery.js" tppabs="https://docs.python.org/zh-cn/3/_static/jquery.js"></script>
    <script type="text/javascript" src="underscore.js" tppabs="https://docs.python.org/zh-cn/3/_static/underscore.js"></script>
    <script type="text/javascript" src="doctools.js" tppabs="https://docs.python.org/zh-cn/3/_static/doctools.js"></script>
    <script type="text/javascript" src="language_data.js" tppabs="https://docs.python.org/zh-cn/3/_static/language_data.js"></script>
    <script type="text/javascript" src="translations.js" tppabs="https://docs.python.org/zh-cn/3/_static/translations.js"></script>
    
    <script type="text/javascript" src="sidebar.js" tppabs="https://docs.python.org/zh-cn/3/_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="åœ¨ Python 3.8.2 æ–‡æ¡£ ä¸­æœç´¢"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="å…³äºè¿™äº›æ–‡æ¡£" href="../about.html" />
    <link rel="index" title="ç´¢å¼•" href="../genindex.html" />
    <link rel="search" title="æœç´¢" href="../search.html" />
    <link rel="copyright" title="ç‰ˆæƒæ‰€æœ‰" href="../copyright.html" />
    <link rel="next" title="å®ç°æè¿°å™¨" href="descriptor.html" />
    <link rel="prev" title="å°†æ‰©å±•æ¨¡å—ç§»æ¤åˆ° Python 3" href="cporting.html" />
    <link rel="canonical" href="https://docs.python.org/3/howto/curses.html" />
    
      
      <script type="text/javascript" src="switchers.js" tppabs="https://docs.python.org/zh-cn/3/_static/switchers.js"></script>
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>

    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    
    <script type="text/javascript" src="copybutton.js" tppabs="https://docs.python.org/zh-cn/3/_static/copybutton.js"></script>
    
     


  </head><body>
  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>å¯¼èˆª</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" tppabs="https://docs.python.org/zh-cn/3/genindex.html" title="æ€»ç›®å½•"
             accesskey="I">ç´¢å¼•</a></li>
        <li class="right" >
          <a href="py-modindex.html" tppabs="https://docs.python.org/zh-cn/3/py-modindex.html" title="Python æ¨¡å—ç´¢å¼•"
             >æ¨¡å—</a> |</li>
        <li class="right" >
          <a href="descriptor.html" tppabs="https://docs.python.org/zh-cn/3/howto/descriptor.html" title="å®ç°æè¿°å™¨"
             accesskey="N">ä¸‹ä¸€é¡µ</a> |</li>
        <li class="right" >
          <a href="cporting.html" tppabs="https://docs.python.org/zh-cn/3/howto/cporting.html" title="å°†æ‰©å±•æ¨¡å—ç§»æ¤åˆ° Python 3"
             accesskey="P">ä¸Šä¸€é¡µ</a> |</li>

    <li><img src="py.png" tppabs="https://docs.python.org/zh-cn/3/_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="javascript:if(confirm('https://www.python.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.python.org/'" tppabs="https://www.python.org/">Python</a> &#187;</li>
    

    <li>
      <span class="language_switcher_placeholder">zh_CN</span>
      <span class="version_switcher_placeholder">3.8.2</span>
      <a href="index-11.html" tppabs="https://docs.python.org/zh-cn/3/index.html">æ–‡æ¡£</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index-5.html" tppabs="https://docs.python.org/zh-cn/3/howto/index.html" accesskey="U">Python å¸¸ç”¨æŒ‡å¼•</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="https://docs.python.org/zh-cn/3/search.html" method="get">
          <input placeholder="å¿«é€Ÿæœç´¢" type="text" name="q" />
          <input type="submit" value="è½¬å‘" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="curses-programming-with-python">
<span id="curses-howto"></span><h1>ç”¨ Python è¿›è¡Œ Curses ç¼–ç¨‹<a class="headerlink" href="#curses-programming-with-python" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">ä½œè€…</dt>
<dd class="field-odd"><p>A.M. Kuchling, Eric S. Raymond</p>
</dd>
<dt class="field-even">å‘å¸ƒç‰ˆæœ¬</dt>
<dd class="field-even"><p>2.04</p>
</dd>
</dl>
<div class="topic">
<p class="topic-title first">æ‘˜è¦</p>
<p>æœ¬æ–‡æ¡£ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ <a class="reference internal" href="curses.html#module-curses" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#module-curses" title="curses: An interface to the curses library, providing portable terminal handling. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">curses</span></code></a> æ‰©å±•æ¨¡å—æ§åˆ¶æ–‡æœ¬æ¨¡å¼çš„æ˜¾ç¤ºã€‚</p>
</div>
<div class="section" id="what-is-curses">
<h2>curses æ˜¯ä»€ä¹ˆï¼Ÿ<a class="headerlink" href="#what-is-curses" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>curses åº“ä¸ºåŸºäºæ–‡æœ¬çš„ç»ˆç«¯æä¾›äº†ç‹¬ç«‹äºç»ˆç«¯çš„å±å¹•ç»˜åˆ¶å’Œé”®ç›˜å¤„ç†åŠŸèƒ½ï¼›è¿™äº›ç»ˆç«¯åŒ…æ‹¬ VT100ï¼ŒLinux æ§åˆ¶å°ä»¥åŠå„ç§ç¨‹åºæä¾›çš„æ¨¡æ‹Ÿç»ˆç«¯ã€‚æ˜¾ç¤ºç»ˆç«¯æ”¯æŒå„ç§æ§åˆ¶ä»£ç ä»¥æ‰§è¡Œå¸¸è§çš„æ“ä½œï¼Œä¾‹å¦‚ç§»åŠ¨å…‰æ ‡ï¼Œæ»šåŠ¨å±å¹•å’Œæ“¦é™¤åŒºåŸŸã€‚ä¸åŒçš„ç»ˆç«¯ä½¿ç”¨ç›¸å·®å¾ˆå¤§çš„ä»£ç ï¼Œå¹¶ä¸”å¾€å¾€æœ‰è‡ªå·±çš„å°æ€ªç™–ã€‚</p>
<p>åœ¨æ™®éä½¿ç”¨å›¾å½¢æ˜¾ç¤ºçš„ä¸–ç•Œä¸­ï¼Œäººä»¬å¯èƒ½ä¼šé—®â€œä¸ºä»€ä¹ˆè‡ªæ‰¾è¦éº»çƒ¦â€ï¼Ÿæ¯•ç«Ÿå­—ç¬¦å•å…ƒæ˜¾ç¤ºç»ˆç«¯ç¡®å®æ˜¯ä¸€ç§è¿‡æ—¶çš„æŠ€æœ¯ï¼Œä½†æ˜¯åœ¨æŸäº›é¢†åŸŸä¸­ï¼Œèƒ½å¤Ÿç”¨å®ƒä»¬åšèŠ±å“¨çš„äº‹æƒ…ä»ç„¶å¾ˆæœ‰ä»·å€¼ã€‚ä¸€ä¸ªå°ä¼—å¸‚åœºæ˜¯åœ¨ä¸è¿è¡Œ X server çš„å°å‹æˆ–åµŒå…¥å¼ Unix ä¸Šã€‚å¦ä¸€ä¸ªæ˜¯åœ¨æä¾›å›¾å½¢æ”¯æŒä¹‹å‰ï¼Œå¯èƒ½éœ€è¦è¿è¡Œçš„å·¥å…·ï¼Œä¾‹å¦‚æ“ä½œç³»ç»Ÿå®‰è£…ç¨‹åºå’Œå†…æ ¸é…ç½®ç¨‹åºã€‚</p>
<p>curses åº“æä¾›äº†ç›¸å½“åŸºç¡€çš„åŠŸèƒ½ï¼Œä¸ºç¨‹åºå‘˜æä¾›äº†åŒ…å«å¤šä¸ªéé‡å æ–‡æœ¬çª—å£çš„æ˜¾ç¤ºçš„æŠ½è±¡ã€‚çª—å£çš„å†…å®¹å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼æ›´æ”¹---æ·»åŠ æ–‡æœ¬ï¼Œæ“¦é™¤æ–‡æœ¬ï¼Œæ›´æ”¹å…¶å¤–è§‚---ä»¥åŠcursesåº“å°†ç¡®å®šéœ€è¦å‘ç»ˆç«¯å‘é€å“ªäº›æ§åˆ¶ä»£ç ä»¥äº§ç”Ÿæ­£ç¡®çš„è¾“å‡ºã€‚ curseså¹¶æ²¡æœ‰æä¾›è¯¸å¤šç”¨æˆ·ç•Œé¢æ¦‚å¿µï¼Œä¾‹å¦‚æŒ‰é’®ï¼Œå¤é€‰æ¡†æˆ–å¯¹è¯æ¡†ã€‚å¦‚æœéœ€è¦è¿™äº›åŠŸèƒ½ï¼Œè¯·è€ƒè™‘ç”¨æˆ·ç•Œé¢åº“ï¼Œä¾‹å¦‚ <a class="reference external" href="javascript:if(confirm('https://pypi.org/project/urwid/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://pypi.org/project/urwid/'" tppabs="https://pypi.org/project/urwid/">Urwid</a> ã€‚</p>
<p>curses åº“æœ€åˆæ˜¯ä¸ºBSD Unix ç¼–å†™çš„ã€‚ åæ¥ AT&amp;T çš„Unix System V ç‰ˆæœ¬åŠ å…¥äº†è®¸å¤šå¢å¼ºåŠŸèƒ½å’Œæ–°åŠŸèƒ½ã€‚å¦‚ä»ŠBSD curseså·²ä¸å†ç»´æŠ¤ï¼Œè¢«ncurseså–ä»£ï¼Œncursesæ˜¯ AT&amp;T æ¥å£çš„å¼€æºå®ç°ã€‚å¦‚æœä½¿ç”¨çš„æ˜¯ Linux æˆ– FreeBSD ç­‰å¼€æºUnixç³»ç»Ÿï¼Œåˆ™å‡ ä¹è‚¯å®šä¼šä½¿ç”¨ncursesã€‚ç”±äºå¤§å¤šæ•°å½“å‰çš„å•†ä¸šUnixç‰ˆæœ¬éƒ½åŸºäºSystem Vä»£ç ï¼Œå› æ­¤è¿™é‡Œæè¿°çš„æ‰€æœ‰åŠŸèƒ½å¯èƒ½éƒ½å¯ç”¨ã€‚ä½†æ˜¯ï¼ŒæŸäº›ä¸“æœ‰Unixæ‰€å¸¦æ¥çš„è¾ƒæ—©ç‰ˆæœ¬çš„curseså¯èƒ½æ— æ³•æ”¯æŒæ‰€æœ‰åŠŸèƒ½ã€‚</p>
<p>Windows ç‰ˆæœ¬çš„ Python ä¸åŒ…å« <a class="reference internal" href="curses.html#module-curses" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#module-curses" title="curses: An interface to the curses library, providing portable terminal handling. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">curses</span></code></a> æ¨¡å—ã€‚æä¾›äº†ä¸€ä¸ªåä¸º <a class="reference external" href="javascript:if(confirm('https://pypi.org/project/issue38669  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://pypi.org/project/issue38669'" tppabs="https://pypi.org/project/UniCurses">UniCurses</a> çš„ç§»æ¤ç‰ˆæœ¬ã€‚ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨ Fredrik Lundh ç¼–å†™ <a class="reference external" href="javascript:if(confirm('http://effbot.org/zone/issue35998  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://effbot.org/zone/issue35998'" tppabs="http://effbot.org/zone/console-index.htm">the Console module</a>ï¼Œå®ƒä½¿ç”¨äº†ä¸cursesä¸ç›¸åŒçš„APIï¼Œä½†æä¾›äº†å¯å…‰æ ‡å®šä½çš„æ–‡æœ¬è¾“å‡ºï¼Œå®Œå…¨æ”¯æŒé¼ æ ‡å’Œé”®ç›˜è¾“å…¥ã€‚</p>
<div class="section" id="the-python-curses-module">
<h3>Python çš„ curses æ¨¡å—<a class="headerlink" href="#the-python-curses-module" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>æ­¤ Python æ¨¡å—ç›¸å½“ç®€å•åœ°å°è£…äº† curses æä¾›çš„ C å‡½æ•°ï¼›å¦‚æœä½ å·²ç»ç†Ÿæ‚‰åœ¨ C è¯­è¨€ä¸­ä½¿ç”¨ curses ç¼–ç¨‹ï¼ŒæŠŠè¿™äº›çŸ¥è¯†è½¬ç§»çš„ Python æ˜¯éå¸¸å®¹æ˜“çš„ã€‚æœ€å¤§çš„å·®å¼‚åœ¨äº Python ä¸­çš„æ¥å£é€šè¿‡æŠŠä¸åŒçš„ C å‡½æ•°åˆå¹¶æ¥è®©äº‹æƒ…å˜å¾—æ›´ç®€å•ï¼Œæ¯”å¦‚ <code class="xref c c-func docutils literal notranslate"><span class="pre">addstr()</span></code>ã€<code class="xref c c-func docutils literal notranslate"><span class="pre">mvaddstr()</span></code> å’Œ <code class="xref c c-func docutils literal notranslate"><span class="pre">mvwaddstr()</span></code> ä¸‰ä¸ª C å‡½æ•°è¢«å¹¶å…¥ <a class="reference internal" href="curses.html#curses.window.addstr" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.window.addstr" title="curses.window.addstr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">addstr()</span></code></a> è¿™ä¸€ä¸ªæ–¹æ³•ã€‚ä¸‹æ–‡ä¸­ä¼šæè¿°æ›´å¤šçš„ç»†èŠ‚ã€‚</p>
<p>æœ¬ HOWTO æ˜¯å…³äºä½¿ç”¨ curses å’Œ Python ç¼–å†™æ–‡æœ¬æ¨¡å¼ç¨‹åºçš„æ¦‚è¿°ã€‚å®ƒå¹¶ä¸è¢«è®¾è®¡ä¸ºä¸€ä¸ª curses API çš„å®Œæ•´æŒ‡å—ï¼›å¦‚éœ€å®Œæ•´æŒ‡å—ï¼Œè¯·å‚è§ ncurses çš„ Python åº“æŒ‡å—ç« èŠ‚å’Œ ncurses çš„ C æ‰‹å†Œé¡µã€‚ç›¸å¯¹åœ°ï¼Œæœ¬ HOWTO å°†ä¼šç»™ä½ ä¸€äº›åŸºæœ¬æ€è·¯ã€‚</p>
</div>
</div>
<div class="section" id="starting-and-ending-a-curses-application">
<h2>å¼€å§‹å’Œç»“æŸcursesåº”ç”¨ç¨‹åº<a class="headerlink" href="#starting-and-ending-a-curses-application" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>åœ¨åšä»»ä½•äº‹æƒ…ä¹‹å‰ï¼Œcurses å¿…é¡»å…ˆè¢«åˆå§‹åŒ–ã€‚å¯ä»¥é€šè¿‡è°ƒç”¨å‡½æ•° <a class="reference internal" href="curses.html#curses.initscr" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.initscr" title="curses.initscr"><code class="xref py py-func docutils literal notranslate"><span class="pre">initscr()</span></code></a> æ¥å®ç°ï¼Œå®ƒå°†æŸ¥æ˜ç»ˆç«¯çš„ç±»å‹ï¼Œå‘ç»ˆç«¯å‘é€ä»»ä½•å¿…é¡»çš„è®¾ç½®ä»£ç ï¼Œå¹¶åˆ›å»ºå¤šç§å†…éƒ¨æ•°æ®ç»“æ„ã€‚å¦‚æœæ­¤æ“ä½œæˆåŠŸï¼Œ<code class="xref py py-func docutils literal notranslate"><span class="pre">initscr()</span></code> å°†ä¼šè¿”å›ä¸€ä¸ªä»£è¡¨æ•´ä¸ªå±å¹•çš„çª—å£å¯¹è±¡ï¼›å®ƒé€šå¸¸ä¼šéµå¾ªå¯¹åº”çš„ C å˜é‡åè¢«ç§°ä½œ <code class="docutils literal notranslate"><span class="pre">stdscr</span></code>ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">curses</span>
<span class="n">stdscr</span> <span class="o">=</span> <span class="n">curses</span><span class="o">.</span><span class="n">initscr</span><span class="p">()</span>
</pre></div>
</div>
<p>ä½¿ç”¨ curses çš„åº”ç”¨ç¨‹åºé€šå¸¸ä¼šå…³é—­æŒ‰é”®è‡ªåŠ¨ä¸Šå±ï¼Œç›®çš„æ˜¯è¯»å–æŒ‰é”®å¹¶åªåœ¨ç‰¹å®šæƒ…å†µä¸‹å±•ç¤ºå®ƒä»¬ã€‚è¿™éœ€è¦è°ƒç”¨å‡½æ•° <a class="reference internal" href="curses.html#curses.noecho" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.noecho" title="curses.noecho"><code class="xref py py-func docutils literal notranslate"><span class="pre">noecho()</span></code></a>ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">curses</span><span class="o">.</span><span class="n">noecho</span><span class="p">()</span>
</pre></div>
</div>
<p>åº”ç”¨ç¨‹åºä¹Ÿä¼šå¹¿æ³›åœ°éœ€è¦ç«‹å³å“åº”æŒ‰é”®ï¼Œè€Œä¸éœ€è¦æŒ‰ä¸‹å›è½¦é”®ï¼›è¿™è¢«ç§°ä¸º â€œcbreakâ€ æ¨¡å¼ï¼Œä¸é€šå¸¸çš„ç¼“å†²è¾“å…¥æ¨¡å¼ç›¸å¯¹ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">curses</span><span class="o">.</span><span class="n">cbreak</span><span class="p">()</span>
</pre></div>
</div>
<p>ç»ˆç«¯é€šå¸¸ä¼šä»¥å¤šå­—èŠ‚è½¬ä¹‰åºåˆ—çš„å½¢å¼è¿”å›ç‰¹æ®ŠæŒ‰é”®ï¼Œæ¯”å¦‚å…‰æ ‡é”®å’Œå¯¼èˆªé”®æ¯”å¦‚ Page Up é”®å’Œ Home é”®ã€‚å°½ç®¡ä½ å¯ä»¥ç¼–å†™ä½ çš„ç¨‹åºæ¥åº”å¯¹è¿™äº›åºåˆ—ï¼Œcurses èƒ½å¤Ÿä»£æ›¿ä½ åšåˆ°è¿™ä»¶äº‹ï¼Œè¿”å›ä¸€ä¸ªç‰¹æ®Šå€¼æ¯”å¦‚ <code class="xref py py-const docutils literal notranslate"><span class="pre">curses.KEY_LEFT</span></code>ã€‚ä¸ºäº†è®© curses åšè¿™é¡¹å·¥ä½œï¼Œä½ éœ€è¦å¯ç”¨ keypad æ¨¡å¼ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">stdscr</span><span class="o">.</span><span class="n">keypad</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>ç»ˆæ­¢ä¸€ä¸ª curses åº”ç”¨ç¨‹åºæ¯”å»ºç«‹ä¸€ä¸ªå®¹æ˜“å¾—å¤šï¼Œä½ åªéœ€è¦è°ƒç”¨ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">curses</span><span class="o">.</span><span class="n">nocbreak</span><span class="p">()</span>
<span class="n">stdscr</span><span class="o">.</span><span class="n">keypad</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">curses</span><span class="o">.</span><span class="n">echo</span><span class="p">()</span>
</pre></div>
</div>
<p>æ¥è¿˜åŸå¯¹ç»ˆç«¯ä½œå‡ºçš„ curses å‹å¥½è®¾ç½®ã€‚ç„¶åï¼Œè°ƒç”¨å‡½æ•° <a class="reference internal" href="curses.html#curses.endwin" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.endwin" title="curses.endwin"><code class="xref py py-func docutils literal notranslate"><span class="pre">endwin()</span></code></a> æ¥å°†ç»ˆç«¯è¿˜åŸåˆ°å®ƒçš„åŸå§‹æ“ä½œæ¨¡å¼ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">curses</span><span class="o">.</span><span class="n">endwin</span><span class="p">()</span>
</pre></div>
</div>
<p>è°ƒè¯•ä¸€ä¸ª curses åº”ç”¨ç¨‹åºæ—¶å¸¸ä¼šå‘ç”Ÿï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºè¿˜æœªèƒ½è¿˜åŸç»ˆç«¯åˆ°åŸæœ¬çš„çŠ¶æ€å°±æ„å¤–é€€å‡ºäº†ï¼Œè¿™ä¼šæ…ä¹±ä½ çš„ç»ˆç«¯ã€‚åœ¨ Python ä¸­è¿™å¸¸å¸¸ä¼šå‘ç”Ÿåœ¨ä½ çš„ä»£ç ä¸­æœ‰ bug å¹¶å¼•å‘äº†ä¸€ä¸ªæœªæ•è·çš„å¼‚å¸¸ã€‚å½“ä½ å°è¯•è¾“å…¥æ—¶æŒ‰é”®ä¸ä¼šä¸Šå±ï¼Œè¿™ä½¿å¾—ä½¿ç”¨ç»ˆç«¯å˜å¾—å›°éš¾ã€‚</p>
<p>åœ¨ Python ä¸­ä½ å¯ä»¥é¿å…è¿™äº›å¤æ‚é—®é¢˜å¹¶è®©è°ƒè¯•å˜å¾—æ›´ç®€å•ï¼Œåªéœ€è¦å¯¼å…¥ <a class="reference internal" href="curses.html#curses.wrapper" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.wrapper" title="curses.wrapper"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.wrapper()</span></code></a> å‡½æ•°å¹¶åƒè¿™æ ·ä½¿ç”¨å®ƒï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">curses</span> <span class="kn">import</span> <span class="n">wrapper</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">stdscr</span><span class="p">):</span>
    <span class="c1"># Clear screen</span>
    <span class="n">stdscr</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="c1"># This raises ZeroDivisionError when i == 10.</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">i</span><span class="o">-</span><span class="mi">10</span>
        <span class="n">stdscr</span><span class="o">.</span><span class="n">addstr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;10 divided by </span><span class="si">{}</span><span class="s1"> is </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="mi">10</span><span class="o">/</span><span class="n">v</span><span class="p">))</span>

    <span class="n">stdscr</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
    <span class="n">stdscr</span><span class="o">.</span><span class="n">getkey</span><span class="p">()</span>

<span class="n">wrapper</span><span class="p">(</span><span class="n">main</span><span class="p">)</span>
</pre></div>
</div>
<p>å‡½æ•° <a class="reference internal" href="curses.html#curses.wrapper" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.wrapper" title="curses.wrapper"><code class="xref py py-func docutils literal notranslate"><span class="pre">wrapper()</span></code></a> æ¥å—ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡å¹¶é¦–å…ˆè¿›è¡Œä¸Šè¿°åˆå§‹åŒ–è¿‡ç¨‹ï¼Œåœ¨ç»ˆç«¯æ”¯æŒç€è‰²æ—¶è¿˜ä¼šåˆå§‹åŒ–é¢œè‰²ã€‚æ¥ç€ <code class="xref py py-func docutils literal notranslate"><span class="pre">wrapper()</span></code> è¿è¡Œä½ æä¾›çš„å¯è°ƒç”¨å¯¹è±¡ã€‚å½“è¯¥å¯è°ƒç”¨å¯¹è±¡è¿”å›æ—¶ï¼Œ<code class="xref py py-func docutils literal notranslate"><span class="pre">wrapper()</span></code> ä¼šè¿˜åŸç»ˆç«¯åˆ°åˆå§‹çŠ¶æ€ã€‚è¯¥å¯è°ƒç”¨å¯¹è±¡ä¼šåœ¨ <a class="reference internal" href="compound_stmts.html#try" tppabs="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#try"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code></a>...<a class="reference internal" href="compound_stmts.html#except" tppabs="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#except"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code></a> è¿™æ ·çš„ç»“æ„å†…è¢«è°ƒç”¨ï¼Œå½“å®ƒæ•è·åˆ°å¼‚å¸¸æ—¶ï¼Œä¼šå…ˆè¿˜åŸç»ˆç«¯å†é‡æ–°å¼•å‘è¿™ä¸ªå¼‚å¸¸ã€‚æ‰€ä»¥ä½ çš„ç»ˆç«¯ä¸ä¼šå› ä¸ºå¼‚å¸¸è€Œè¢«ç•™åœ¨ä¸€ä¸ªæç¬‘çš„çŠ¶æ€ï¼Œä½ ä¹Ÿå¯ä»¥æ­£å¸¸é˜…è¯»å¼‚å¸¸æ¶ˆæ¯å’Œå›æº¯ä¿¡æ¯ã€‚</p>
</div>
<div class="section" id="windows-and-pads">
<h2>çª—å£å’Œé¢æ¿<a class="headerlink" href="#windows-and-pads" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>çª—å£æ˜¯ curses ä¸­çš„åŸºæœ¬æŠ½è±¡ã€‚ä¸€ä¸ªçª—å£å¯¹è±¡è¡¨ç¤ºäº†å±å¹•ä¸Šçš„ä¸€ä¸ªçŸ©å½¢åŒºåŸŸï¼Œå¹¶ä¸”æä¾›æ–¹æ³•æ¥æ˜¾ç¤ºæ–‡æœ¬ã€æ“¦é™¤æ–‡æœ¬ã€å…è®¸ç”¨æˆ·è¾“å…¥å­—ç¬¦ä¸²ç­‰ç­‰ã€‚</p>
<p>å‡½æ•° <a class="reference internal" href="curses.html#curses.initscr" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.initscr" title="curses.initscr"><code class="xref py py-func docutils literal notranslate"><span class="pre">initscr()</span></code></a> è¿”å›çš„ <code class="docutils literal notranslate"><span class="pre">stdscr</span></code> å¯¹è±¡è¦†ç›–æ•´ä¸ªå±å¹•ã€‚è®¸å¤šç¨‹åºå¯èƒ½åªéœ€è¦è¿™ä¸€ä¸ªçª—å£ï¼Œä½†ä½ å¯èƒ½å¸Œæœ›æŠŠå±å¹•åˆ†å‰²ä¸ºå¤šä¸ªæ›´å°çš„çª—å£ï¼Œæ¥åˆ†åˆ«é‡ç»˜æˆ–è€…æ¸…æ¥šå®ƒä»¬ã€‚å‡½æ•° <a class="reference internal" href="curses.html#curses.newwin" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.newwin" title="curses.newwin"><code class="xref py py-func docutils literal notranslate"><span class="pre">newwin()</span></code></a> æ ¹æ®ç»™å®šçš„å°ºå¯¸åˆ›å»ºä¸€ä¸ªæ–°çª—å£ï¼Œå¹¶è¿”å›è¿™ä¸ªæ–°çš„çª—å£å¯¹è±¡ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">begin_x</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span> <span class="n">begin_y</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">height</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">win</span> <span class="o">=</span> <span class="n">curses</span><span class="o">.</span><span class="n">newwin</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">begin_y</span><span class="p">,</span> <span class="n">begin_x</span><span class="p">)</span>
</pre></div>
</div>
<p>æ³¨æ„ curses ä½¿ç”¨çš„åæ ‡ç³»ç»Ÿä¸å¯»å¸¸çš„ä¸åŒã€‚åæ ‡å§‹ç»ˆæ˜¯ä»¥ <em>y,x</em> çš„é¡ºåºä¼ é€’ï¼Œå¹¶ä¸”å·¦ä¸Šè§’æ˜¯åæ ‡ (0,0)ã€‚è¿™æ‰“ç ´äº†æ­£å¸¸çš„åæ ‡å¤„ç†çº¦å®šï¼Œå³ <em>x</em> åæ ‡åœ¨å‰ã€‚è¿™æ˜¯ä¸€ä¸ªä¸å…¶ä»–è®¡ç®—æœºåº”ç”¨ç¨‹åºç³Ÿç³•çš„å·®å¼‚ï¼Œä½†è¿™ä» curses æœ€åˆè¢«ç¼–å†™å‡ºæ¥å°±å·²æ˜¯å®ƒçš„ä¸€éƒ¨åˆ†ï¼Œç°åœ¨æƒ³è¦ä¿®æ”¹å®ƒå·²ä¸ºæ—¶å·²æ™šã€‚</p>
<p>ä½ çš„åº”ç”¨ç¨‹åºèƒ½å¤ŸæŸ¥æ˜å±å¹•çš„å°ºå¯¸ï¼Œ<code class="xref py py-data docutils literal notranslate"><span class="pre">curses.LINES</span></code> å’Œ <code class="xref py py-data docutils literal notranslate"><span class="pre">curses.COLS</span></code> åˆ†åˆ«ä»£è¡¨äº† <em>y</em> å’Œ <em>x</em> æ–¹å‘ä¸Šçš„å°ºå¯¸ã€‚åˆç†çš„åæ ‡åº”ä½äº <code class="docutils literal notranslate"><span class="pre">(0,0)</span></code> åˆ° <code class="docutils literal notranslate"><span class="pre">(curses.LINES</span> <span class="pre">-</span> <span class="pre">1,</span> <span class="pre">curses.COLS</span> <span class="pre">-</span> <span class="pre">1)</span></code> èŒƒå›´å†…ã€‚</p>
<p>å½“ä½ è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ¥æ˜¾ç¤ºæˆ–æ“¦é™¤æ–‡æœ¬æ—¶ï¼Œæ•ˆæœå¹¶ä¸ä¼šç«‹å³æ˜¾ç¤ºã€‚ç›¸åï¼Œä½ å¿…é¡»è°ƒç”¨çª—å£å¯¹è±¡çš„ <a class="reference internal" href="curses.html#curses.window.refresh" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.window.refresh" title="curses.window.refresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh()</span></code></a> æ–¹æ³•æ¥æ›´æ–°å±å¹•ã€‚</p>
<p>è¿™æ˜¯å› ä¸º curses æœ€åˆæ˜¯ä¸º 300 æ³¢ç‰¹çš„é¾Ÿé€Ÿç»ˆç«¯è¿æ¥ç¼–å†™çš„ï¼›åœ¨è¿™äº›ç»ˆç«¯ä¸Šï¼Œå‹åˆ¶é‡ç»˜å±å¹•çš„æ—¶é—´å°±éå¸¸é‡è¦ã€‚ç›¸å¯¹åœ°ï¼Œå½“ä½ è°ƒç”¨ <code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh()</span></code> æ—¶ï¼Œcurses ä¼šç´¯ç§¯å±å¹•çš„ä¿®æ”¹å¹¶ä»¥æ•ˆç‡æœ€é«˜çš„æ–¹å¼æ˜¾ç¤ºå®ƒä»¬ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œå¦‚æœä½ çš„ç¨‹åºåœ¨ä¸€ä¸ªçª—å£å†…æ˜¾ç¤ºä¸€äº›æ–‡æœ¬ç„¶åæ¸…æ¥šäº†è¿™ä¸ªçª—å£ï¼Œé‚£ä¹ˆè¿™äº›åŸå§‹æ–‡æœ¬ä¸éœ€è¦è¢«å‘é€ï¼Œå› ä¸ºå®ƒä»¬ç”šè‡³ä¸æ›¾èƒ½è¢«çœ‹è§ã€‚</p>
<p>åœ¨å®è·µä¸­ï¼Œæ˜¾å¼åœ°å‘Šè¯‰ curses æ¥é‡ç»˜ä¸€ä¸ªçª—å£å¹¶ä¸ä¼šå¤ªå¤æ‚åŒ– curses ç¼–ç¨‹ã€‚å¤§éƒ¨åˆ†ç¨‹åºä¼šæ˜¾ç¤ºä¸€å †å†…å®¹ç„¶åç­‰å¾…æŒ‰é”®æˆ–è€…å…¶ä»–æŸäº›ç”¨æˆ·ä¾§åŠ¨ä½œã€‚ä½ è¦åšçš„äº‹æƒ…å°±æ˜¯ï¼Œä¿è¯å±å¹•åœ¨æš‚åœå¹¶ç­‰å¾…ç”¨æˆ·è¾“å…¥å‰è¢«é‡ç»˜ï¼Œåªéœ€è¦å…ˆè°ƒç”¨ <code class="docutils literal notranslate"><span class="pre">stdscr.refresh()</span></code> æˆ–è€…å…¶ä»–ç›¸å…³çª—å£çš„ <code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh()</span></code> æ–¹æ³•ã€‚</p>
<p>ä¸€ä¸ªé¢æ¿æ˜¯ä¸€ç§ç‰¹æ®Šçš„çª—å£ï¼Œå®ƒå¯ä»¥æ¯”å®é™…çš„æ˜¾ç¤ºå±å¹•æ›´å¤§ï¼Œå¹¶ä¸”èƒ½åªæ˜¾ç¤ºå®ƒçš„ä¸€éƒ¨åˆ†ã€‚åˆ›å»ºé¢æ¿éœ€è¦æŒ‡å®šé¢æ¿çš„é«˜åº¦å’Œå®½åº¦ï¼Œä½†åˆ·æ–°ä¸€ä¸ªé¢æ¿éœ€è¦ç»™å‡ºå±å¹•åæ ‡å’Œé¢æ¿çš„éœ€è¦æ˜¾ç¤ºçš„å±€éƒ¨ã€‚</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">pad</span> <span class="o">=</span> <span class="n">curses</span><span class="o">.</span><span class="n">newpad</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="c1"># These loops fill the pad with letters; addch() is</span>
<span class="c1"># explained in the next section</span>
<span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">99</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">99</span><span class="p">):</span>
        <span class="n">pad</span><span class="o">.</span><span class="n">addch</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">*</span><span class="n">y</span><span class="p">)</span> <span class="o">%</span> <span class="mi">26</span><span class="p">)</span>

<span class="c1"># Displays a section of the pad in the middle of the screen.</span>
<span class="c1"># (0,0) : coordinate of upper-left corner of pad area to display.</span>
<span class="c1"># (5,5) : coordinate of upper-left corner of window area to be filled</span>
<span class="c1">#         with pad content.</span>
<span class="c1"># (20, 75) : coordinate of lower-right corner of window area to be</span>
<span class="c1">#          : filled with pad content.</span>
<span class="n">pad</span><span class="o">.</span><span class="n">refresh</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span><span class="mi">75</span><span class="p">)</span>
</pre></div>
</div>
<p>æ­¤ <code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh()</span></code> è°ƒç”¨ä¼šåœ¨å±å¹•åæ ‡ (5,5) åˆ°åæ ‡ (20,75) çš„çŸ©å½¢èŒƒå›´å†…æ˜¾ç¤ºé¢æ¿çš„ä¸€ä¸ªéƒ¨åˆ†ï¼Œè¢«æ˜¾ç¤ºçš„éƒ¨åˆ†åœ¨é¢æ¿ä¸Šçš„åæ ‡æ˜¯ (0,0)ã€‚é™¤äº†ä¸Šè¿°å·®å¼‚ï¼Œé¢æ¿ä¸å¸¸è§„çš„çª—å£ç›¸åŒï¼Œä¹Ÿæ”¯æŒç›¸åŒçš„æ–¹æ³•ã€‚</p>
<p>å¦‚æœä½ åœ¨å±å¹•ä¸Šæœ‰å¤šä¸ªçª—å£å’Œé¢æ¿ï¼Œæœ‰ä¸€ä¸ªæ›´æœ‰æ•ˆç‡çš„æ–¹æ³•æ¥æ›´æ–°çª—å£ï¼Œé¿å…æ¯ä¸ªéƒ¨åˆ†å•ç‹¬æ›´æ–°æ—¶çƒ¦äººçš„å±å¹•é—ªçƒã€‚<code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh()</span></code> å®é™…ä¸Šåšäº†ä¸¤ä»¶äº‹ï¼š</p>
<ol class="arabic simple">
<li><p>è°ƒç”¨æ¯ä¸ªçª—å£çš„  <a class="reference internal" href="curses.html#curses.window.noutrefresh" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.window.noutrefresh" title="curses.window.noutrefresh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">noutrefresh()</span></code></a> æ–¹æ³•æ¥æ›´æ–°ä¸€ä¸ªè¡¨è¾¾å±å¹•æœŸæœ›çŠ¶æ€çš„åº•å±‚çš„æ•°æ®ç»“æ„ã€‚</p></li>
<li><p>è°ƒç”¨å‡½æ•° <a class="reference internal" href="curses.html#curses.doupdate" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.doupdate" title="curses.doupdate"><code class="xref py py-func docutils literal notranslate"><span class="pre">doupdate()</span></code></a> æ¥æ”¹å˜ç‰©ç†å±å¹•æ¥ç¬¦åˆè¿™ä¸ªæ•°æ®ç»“æ„ä¸­è®°å½•çš„æœŸæœ›çŠ¶æ€ã€‚</p></li>
</ol>
<p>ä½ å¯ä»¥æ”¹ä¸ºè°ƒç”¨åœ¨å¤šä¸ªçª—å£ä¸Š <code class="xref py py-meth docutils literal notranslate"><span class="pre">noutrefresh()</span></code> æ–¹æ³•æ¥æ›´æ–°è¯¥æ•°æ®ç»“æ„ï¼Œç„¶åè°ƒç”¨å‡½æ•° <code class="xref py py-func docutils literal notranslate"><span class="pre">doupdate()</span></code> æ¥æ›´æ–°å±å¹•ã€‚</p>
</div>
<div class="section" id="displaying-text">
<h2>æ˜¾ç¤ºæ–‡å­—<a class="headerlink" href="#displaying-text" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>ä»ä¸€å C è¯­è¨€ç¨‹åºå‘˜çš„è§†è§’æ¥çœ‹ï¼Œcurses æœ‰æ—¶çœ‹èµ·æ¥å°±åƒæ˜¯ä¸€å †ç•¥æœ‰å·®å¼‚çš„å‡½æ•°ç»„æˆçš„æ‰­æ›²è¿·å®«ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œ<code class="xref c c-func docutils literal notranslate"><span class="pre">addstr()</span></code> åœ¨ <code class="docutils literal notranslate"><span class="pre">stdscr</span></code> çª—å£çš„å½“å‰å…‰æ ‡ä½ç½®æ˜¾ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œ <code class="xref c c-func docutils literal notranslate"><span class="pre">mvaddstr()</span></code> åˆ™æ˜¯å…ˆç§»åŠ¨åˆ°ä¸€ä¸ªç»™å®šçš„ y,x åæ ‡å†æ˜¾ç¤ºå­—ç¬¦ä¸²ã€‚<code class="xref c c-func docutils literal notranslate"><span class="pre">waddstr()</span></code> ä¸ <code class="xref c c-func docutils literal notranslate"><span class="pre">addstr()</span></code> ç±»ä¼¼ï¼Œä½†å…è®¸æŒ‡å®šä¸€ä¸ªçª—å£è€Œéé»˜è®¤çš„ <code class="docutils literal notranslate"><span class="pre">stdscr</span></code>ã€‚<code class="xref c c-func docutils literal notranslate"><span class="pre">mvwaddstr()</span></code> å…è®¸åŒæ—¶æŒ‡å®šä¸€ä¸ªçª—å£å’Œä¸€ä¸ªåæ ‡ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼ŒPython æ¥å£éšè—äº†æ‰€æœ‰è¿™äº›ç»†èŠ‚ã€‚<code class="docutils literal notranslate"><span class="pre">stdscr</span></code> å’Œå…¶ä»–ä»»ä½•çª—å£ä¸€æ ·æ˜¯ä¸€ä¸ªçª—å£å¯¹è±¡ï¼Œå¹¶ä¸”è¯¸å¦‚ <a class="reference internal" href="curses.html#curses.window.addstr" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.window.addstr" title="curses.window.addstr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">addstr()</span></code></a> ä¹‹ç±»çš„æ–¹æ³•æ¥å—å¤šç§å‚æ•°å½¢å¼ã€‚é€šå¸¸æœ‰å››ç§å½¢å¼ã€‚</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>å½¢å¼</p></th>
<th class="head"><p>æè¿°</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>str</em> æˆ– <em>ch</em></p></td>
<td><p>åœ¨å½“å‰ä½ç½®æ˜¾ç¤ºå­—ç¬¦ä¸² <em>str</em> æˆ–å­—ç¬¦ <em>ch</em></p></td>
</tr>
<tr class="row-odd"><td><p><em>str</em> æˆ– <em>ch</em>, <em>attr</em></p></td>
<td><p>åœ¨å½“å‰ä½ç½®ä½¿ç”¨ <em>attr</em> å±æ€§æ˜¾ç¤ºå­—ç¬¦ä¸² <em>str</em> æˆ–å­—ç¬¦ <em>ch</em></p></td>
</tr>
<tr class="row-even"><td><p><em>y</em>, <em>x</em>, <em>str</em> æˆ– <em>ch</em></p></td>
<td><p>ç§»åŠ¨åˆ°çª—å£å†…çš„ <em>y,x</em> ä½ç½®ï¼Œå¹¶æ˜¾ç¤º <em>str</em> æˆ– <em>ch</em></p></td>
</tr>
<tr class="row-odd"><td><p><em>y</em>, <em>x</em>, <em>str</em> æˆ– <em>ch</em>, <em>attr</em></p></td>
<td><p>ç§»è‡³çª—å£å†…çš„ <em>y,x</em> ä½ç½®ï¼Œå¹¶ä½¿ç”¨ <em>attr</em> å±æ€§æ˜¾ç¤º <em>str</em> æˆ– <em>ch</em></p></td>
</tr>
</tbody>
</table>
<p>å±æ€§å…è®¸ä»¥çªå‡ºæ˜¾ç¤ºå½¢æ€æ˜¾ç¤ºæ–‡æœ¬ï¼Œæ¯”å¦‚åŠ ç²—ã€ä¸‹åˆ’çº¿ã€åç›¸æˆ–æ·»åŠ é¢œè‰²ã€‚è¿™äº›å±æ€§å°†æ¥ä¸‹ä¸€å°èŠ‚ç»†è¯´ã€‚</p>
<p>æ–¹æ³• <a class="reference internal" href="curses.html#curses.window.addstr" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.window.addstr" title="curses.window.addstr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">addstr()</span></code></a> æ¥å—ä¸€ä¸ª Python å­—ç¬¦ä¸²æˆ–å­—èŠ‚ä¸²ä½œä¸ºç”¨äºæ˜¾ç¤ºçš„å€¼ã€‚å­—èŠ‚ä¸²çš„å†…å®¹ä¼šè¢«åŸæ ·å‘é€åˆ°ç»ˆç«¯ã€‚å­—ç¬¦ä¸²ä¼šä½¿ç”¨çª—å£çš„ <code class="xref py py-attr docutils literal notranslate"><span class="pre">encoding</span></code> å±æ€§å€¼ç¼–ç ä¸ºå­—èŠ‚ï¼Œå®ƒé»˜è®¤ä¸º <a class="reference internal" href="locale.html#locale.getpreferredencoding" tppabs="https://docs.python.org/zh-cn/3/library/locale.html#locale.getpreferredencoding" title="locale.getpreferredencoding"><code class="xref py py-func docutils literal notranslate"><span class="pre">locale.getpreferredencoding()</span></code></a> è¿”å›çš„ç³»ç»Ÿé»˜è®¤ç¼–ç ã€‚</p>
<p>æ–¹æ³• <a class="reference internal" href="curses.html#curses.window.addch" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.window.addch" title="curses.window.addch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">addch()</span></code></a> æ¥å—ä¸€ä¸ªå­—ç¬¦ï¼Œå¯ä»¥æ˜¯é•¿åº¦ä¸º 1 çš„å­—ç¬¦ä¸²ï¼Œé•¿åº¦ä¸º 1 çš„å­—èŠ‚ä¸²æˆ–è€…ä¸€ä¸ªæ•´æ•°ã€‚</p>
<p>å¯¹äºç‰¹æ®Šæ‰©å±•å­—ç¬¦æœ‰ä¸€äº›å¸¸é‡ï¼Œè¿™äº›å¸¸é‡æ˜¯å¤§äº 255 çš„æ•´æ•°ã€‚æ¯”å¦‚ï¼Œ<code class="xref py py-const docutils literal notranslate"><span class="pre">ACS_PLMINUS</span></code> æ˜¯ä¸€ä¸ª â€œåŠ å‡â€ ç¬¦å·ï¼Œ<code class="xref py py-const docutils literal notranslate"><span class="pre">ACS_ULCORNER</span></code> æ˜¯ä¸€ä¸ªæ¡†çš„å·¦ä¸Šè§’ï¼ˆæ–¹ä¾¿ç»˜åˆ¶è¾¹ç•Œï¼‰ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨æ­£ç¡®çš„ Unicode å­—ç¬¦ã€‚</p>
<p>çª—å£ä¼šè®°ä½ä¸Šæ¬¡æ“ä½œä¹‹åå…‰æ ‡æ‰€åœ¨ä½ç½®ï¼Œæ‰€ä»¥å¦‚æœä½ å¿½ç•¥ <em>y,x</em> åæ ‡ï¼Œå­—ç¬¦ä¸²å’Œå­—ç¬¦ä¼šå‡ºç°åœ¨ä¸Šæ¬¡æ“ä½œç»“æŸçš„ä½ç½®ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡ <code class="docutils literal notranslate"><span class="pre">move(y,x)</span></code> çš„æ–¹æ³•æ¥ç§»åŠ¨å…‰æ ‡ã€‚å› ä¸ºä¸€äº›ç»ˆç«¯å§‹ç»ˆä¼šæ˜¾ç¤ºä¸€ä¸ªé—ªçƒçš„å…‰æ ‡ï¼Œä½ å¯èƒ½ä¼šæƒ³è¦ä¿è¯å…‰æ ‡å¤„äºä¸€äº›ä¸ä¼šè®©äººæ„Ÿåˆ°åˆ†å¿ƒçš„ä½ç½®ã€‚åœ¨çœ‹ä¼¼éšæœºçš„ä½ç½®å‡ºç°ä¸€ä¸ªé—ªçƒçš„å…‰æ ‡ä¼šä»¤äººéå¸¸è¿·æƒ‘ã€‚</p>
<p>å¦‚æœä½ çš„åº”ç”¨ç¨‹åºå®Œå…¨ä¸éœ€è¦ä¸€ä¸ªé—ªçƒçš„å…‰æ ‡ï¼Œä½ å¯ä»¥è°ƒç”¨ <code class="docutils literal notranslate"><span class="pre">curs_set(False)</span></code> æ¥ä½¿å®ƒéšå½¢ã€‚ä¸ºä¸æ—§ç‰ˆæœ¬ curses çš„å…¼å®¹æ€§çš„å…³ç³»ï¼Œæœ‰å‡½æ•° <code class="docutils literal notranslate"><span class="pre">leaveok(bool)</span></code> ä½œä¸º <a class="reference internal" href="curses.html#curses.curs_set" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.curs_set" title="curses.curs_set"><code class="xref py py-func docutils literal notranslate"><span class="pre">curs_set()</span></code></a> çš„ç­‰ä»·æ›¿æ¢ã€‚å¦‚æœ <em>bool</em> æ˜¯çœŸå€¼ï¼Œcurses åº“ä¼šå°è¯•ç§»é™¤é—ªçƒå…‰æ ‡ï¼Œå¹¶ä¸”ä½ ä¹Ÿä¸å¿…æ‹…å¿ƒå®ƒä¼šç•™åœ¨ä¸€äº›å¥‡æ€ªçš„ä½ç½®ã€‚</p>
<div class="section" id="attributes-and-color">
<h3>å±æ€§å’Œé¢œè‰²<a class="headerlink" href="#attributes-and-color" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>å­—ç¬¦å¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼æ˜¾ç¤ºã€‚åŸºäºæ–‡æœ¬çš„åº”ç”¨ç¨‹åºå¸¸å¸¸ä»¥åç›¸æ˜¾ç¤ºçŠ¶æ€è¡Œï¼Œä¸€ä¸ªæ–‡æœ¬æŸ¥çœ‹å™¨å¯èƒ½éœ€è¦çªå‡ºæ˜¾ç¤ºæŸäº›å•è¯ã€‚ä¸ºäº†æ”¯æŒè¿™ç§ç”¨æ³•ï¼Œcurses å…è®¸ä½ ä¸ºå±å¹•ä¸Šçš„æ¯ä¸ªå•å…ƒæŒ‡å®šä¸€ä¸ªå±æ€§å€¼ã€‚</p>
<p>å±æ€§å€¼æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå®ƒçš„æ¯ä¸€ä¸ªäºŒè¿›åˆ¶ä½ä»£è¡¨ä¸€ä¸ªä¸åŒçš„å±æ€§ã€‚ä½ å¯ä»¥å°è¯•ä»¥å¤šç§ä¸å±æ€§ä½ç»„åˆæ¥æ˜¾ç¤ºæ–‡æœ¬ï¼Œä½† curses ä¸ä¿è¯æ‰€æœ‰çš„ç»„åˆéƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œæˆ–è€…çœ‹ä¸Šå»æœ‰æ˜æ˜¾ä¸åŒã€‚è¿™ä¸€ç‚¹å–å†³äºç”¨æˆ·ç»ˆç«¯çš„èƒ½åŠ›ï¼Œæ‰€ä»¥æœ€ç¨³å¦¥çš„æ–¹å¼æ˜¯åªé‡‡ç”¨æœ€å¸¸è§çš„æœ‰æ•ˆå±æ€§ï¼Œè§ä¸‹è¡¨ã€‚</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 37%" />
<col style="width: 63%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>å±æ€§</p></th>
<th class="head"><p>æè¿°</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">A_BLINK</span></code></p></td>
<td><p>é—ªçƒæ–‡å­—</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">A_BOLD</span></code></p></td>
<td><p>è¶…äº®æˆ–ç²—ä½“æ–‡å­—</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">A_DIM</span></code></p></td>
<td><p>åŠæ˜äº®çš„æ–‡å­—</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">A_REVERSE</span></code></p></td>
<td><p>åç›¸æ˜¾ç¤ºæ–‡æœ¬</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">A_STANDOUT</span></code></p></td>
<td><p>å¯ç”¨çš„æœ€ä½³çªå‡ºæ˜¾ç¤ºæ¨¡å¼</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-const docutils literal notranslate"><span class="pre">A_UNDERLINE</span></code></p></td>
<td><p>å¸¦ä¸‹åˆ’çº¿çš„æ–‡å­—</p></td>
</tr>
</tbody>
</table>
<p>æ‰€ä»¥ï¼Œä¸ºäº†åœ¨å±å¹•é¡¶éƒ¨æ˜¾ç¤ºä¸€ä¸ªåç›¸çš„çŠ¶æ€è¡Œï¼Œä½ å¯ä»¥è¿™ä¹ˆç¼–å†™ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">stdscr</span><span class="o">.</span><span class="n">addstr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Current mode: Typing mode&quot;</span><span class="p">,</span>
              <span class="n">curses</span><span class="o">.</span><span class="n">A_REVERSE</span><span class="p">)</span>
<span class="n">stdscr</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>
</div>
<p>curses åº“è¿˜æ”¯æŒåœ¨æä¾›äº†é¢œè‰²åŠŸèƒ½çš„ç»ˆç«¯ä¸Šæ˜¾ç¤ºé¢œè‰²çš„åŠŸèƒ½ã€‚æœ€å¸¸è§çš„æä¾›é¢œè‰²çš„ç»ˆç«¯å¾ˆå¯èƒ½æ˜¯ Linux æ§åˆ¶å°ï¼Œé‡‡ç”¨äº† xterms é…è‰²æ–¹æ¡ˆã€‚</p>
<p>ä¸ºäº†ä½¿ç”¨é¢œè‰²ï¼Œä½ å¿…é¡»åœ¨è°ƒç”¨å®Œå‡½æ•° <a class="reference internal" href="curses.html#curses.initscr" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.initscr" title="curses.initscr"><code class="xref py py-func docutils literal notranslate"><span class="pre">initscr()</span></code></a> åå°½å¿«è°ƒç”¨å‡½æ•° <a class="reference internal" href="curses.html#curses.start_color" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.start_color" title="curses.start_color"><code class="xref py py-func docutils literal notranslate"><span class="pre">start_color()</span></code></a>ï¼Œæ¥åˆå§‹åŒ–é»˜è®¤é¢œè‰²é›† (<a class="reference internal" href="curses.html#curses.wrapper" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.wrapper" title="curses.wrapper"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.wrapper()</span></code></a> å‡½æ•°è‡ªåŠ¨å®Œæˆäº†è¿™ä¸€ç‚¹)ã€‚ å½“å®ƒå®Œæˆåï¼Œå¦‚æœä½¿ç”¨ä¸­çš„ç»ˆç«¯æ”¯æŒæ˜¾ç¤ºé¢œè‰²ï¼Œ <a class="reference internal" href="curses.html#curses.has_colors" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.has_colors" title="curses.has_colors"><code class="xref py py-func docutils literal notranslate"><span class="pre">has_colors()</span></code></a> ä¼šè¿”å›çœŸå€¼ã€‚ ï¼ˆæ³¨æ„ï¼šcurses ä½¿ç”¨ç¾å¼æ‹¼å†™ â€œcolorâ€ï¼Œè€Œä¸æ˜¯è‹±å¼ï¼åŠ æ‹¿å¤§æ‹¼å†™ â€œcolourâ€ã€‚å¦‚æœä½ ä¹ æƒ¯äº†è‹±å¼æ‹¼å†™ï¼Œä½ éœ€è¦é¿å…è‡ªå·±åœ¨è¿™äº›å‡½æ•°ä¸Šæ‹¼å†™é”™è¯¯ã€‚ï¼‰</p>
<p>curses åº“ç»´æŠ¤ä¸€ä¸ªæœ‰é™æ•°é‡çš„é¢œè‰²å¯¹ï¼ŒåŒ…æ‹¬ä¸€ä¸ªå‰æ™¯ï¼ˆæ–‡æœ¬ï¼‰è‰²å’Œä¸€ä¸ªèƒŒæ™¯è‰²ã€‚ä½ å¯ä»¥ä½¿ç”¨å‡½æ•°  <a class="reference internal" href="curses.html#curses.color_pair" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.color_pair" title="curses.color_pair"><code class="xref py py-func docutils literal notranslate"><span class="pre">color_pair()</span></code></a> è·å¾—ä¸€ä¸ªé¢œè‰²å¯¹å¯¹åº”çš„å±æ€§å€¼ã€‚å®ƒå¯ä»¥é€šè¿‡æŒ‰ä½æˆ–è¿ç®—ä¸å…¶ä»–å±æ€§ï¼Œæ¯”å¦‚ <code class="xref py py-const docutils literal notranslate"><span class="pre">A_REVERSE</span></code> ç»„åˆã€‚ä½†å†è¯´æ˜ä¸€éï¼Œè¿™ç§ç»„åˆå¹¶ä¸ä¿è¯åœ¨æ‰€æœ‰ç»ˆç«¯ä¸Šéƒ½æœ‰æ•ˆã€‚</p>
<p>ä¸€ä¸ªæ ·ä¾‹ï¼Œç”¨ 1 å·é¢œè‰²å¯¹æ˜¾ç¤ºä¸€è¡Œæ–‡æœ¬ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">stdscr</span><span class="o">.</span><span class="n">addstr</span><span class="p">(</span><span class="s2">&quot;Pretty text&quot;</span><span class="p">,</span> <span class="n">curses</span><span class="o">.</span><span class="n">color_pair</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="n">stdscr</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>
</div>
<p>As I said before, a color pair consists of a foreground and background color.
The <code class="docutils literal notranslate"><span class="pre">init_pair(n,</span> <span class="pre">f,</span> <span class="pre">b)</span></code> function changes the definition of color pair <em>n</em>, to
foreground color f and background color b.  Color pair 0 is hard-wired to white
on black, and cannot be changed.</p>
<p>Colors are numbered, and <code class="xref py py-func docutils literal notranslate"><span class="pre">start_color()</span></code> initializes 8 basic
colors when it activates color mode.  They are: 0:black, 1:red,
2:green, 3:yellow, 4:blue, 5:magenta, 6:cyan, and 7:white.  The <a class="reference internal" href="curses.html#module-curses" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#module-curses" title="curses: An interface to the curses library, providing portable terminal handling. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">curses</span></code></a>
module defines named constants for each of these colors:
<code class="xref py py-const docutils literal notranslate"><span class="pre">curses.COLOR_BLACK</span></code>, <code class="xref py py-const docutils literal notranslate"><span class="pre">curses.COLOR_RED</span></code>, and so forth.</p>
<p>Let's put all this together. To change color 1 to red text on a white
background, you would call:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">curses</span><span class="o">.</span><span class="n">init_pair</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">curses</span><span class="o">.</span><span class="n">COLOR_RED</span><span class="p">,</span> <span class="n">curses</span><span class="o">.</span><span class="n">COLOR_WHITE</span><span class="p">)</span>
</pre></div>
</div>
<p>When you change a color pair, any text already displayed using that color pair
will change to the new colors.  You can also display new text in this color
with:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">stdscr</span><span class="o">.</span><span class="n">addstr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;RED ALERT!&quot;</span><span class="p">,</span> <span class="n">curses</span><span class="o">.</span><span class="n">color_pair</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
<p>Very fancy terminals can change the definitions of the actual colors to a given
RGB value.  This lets you change color 1, which is usually red, to purple or
blue or any other color you like.  Unfortunately, the Linux console doesn't
support this, so I'm unable to try it out, and can't provide any examples.  You
can check if your terminal can do this by calling
<a class="reference internal" href="curses.html#curses.can_change_color" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.can_change_color" title="curses.can_change_color"><code class="xref py py-func docutils literal notranslate"><span class="pre">can_change_color()</span></code></a>, which returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the capability is
there.  If you're lucky enough to have such a talented terminal, consult your
system's man pages for more information.</p>
</div>
</div>
<div class="section" id="user-input">
<h2>ç”¨æˆ·è¾“å…¥<a class="headerlink" href="#user-input" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>The C curses library offers only very simple input mechanisms. Python's
<a class="reference internal" href="curses.html#module-curses" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#module-curses" title="curses: An interface to the curses library, providing portable terminal handling. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">curses</span></code></a> module adds a basic text-input widget.  (Other libraries
such as <a class="reference external" href="javascript:if(confirm('https://pypi.org/project/urwid/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://pypi.org/project/urwid/'" tppabs="https://pypi.org/project/urwid/">Urwid</a> have more extensive
collections of widgets.)</p>
<p>There are two methods for getting input from a window:</p>
<ul class="simple">
<li><p><a class="reference internal" href="curses.html#curses.window.getch" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.window.getch" title="curses.window.getch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getch()</span></code></a> refreshes the screen and then waits for
the user to hit a key, displaying the key if <a class="reference internal" href="curses.html#curses.echo" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.echo" title="curses.echo"><code class="xref py py-func docutils literal notranslate"><span class="pre">echo()</span></code></a> has been
called earlier.  You can optionally specify a coordinate to which
the cursor should be moved before pausing.</p></li>
<li><p><a class="reference internal" href="curses.html#curses.window.getkey" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.window.getkey" title="curses.window.getkey"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getkey()</span></code></a> does the same thing but converts the
integer to a string.  Individual characters are returned as
1-character strings, and special keys such as function keys return
longer strings containing a key name such as <code class="docutils literal notranslate"><span class="pre">KEY_UP</span></code> or <code class="docutils literal notranslate"><span class="pre">^G</span></code>.</p></li>
</ul>
<p>It's possible to not wait for the user using the
<a class="reference internal" href="curses.html#curses.window.nodelay" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.window.nodelay" title="curses.window.nodelay"><code class="xref py py-meth docutils literal notranslate"><span class="pre">nodelay()</span></code></a> window method. After <code class="docutils literal notranslate"><span class="pre">nodelay(True)</span></code>,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">getch()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">getkey()</span></code> for the window become
non-blocking. To signal that no input is ready, <code class="xref py py-meth docutils literal notranslate"><span class="pre">getch()</span></code> returns
<code class="docutils literal notranslate"><span class="pre">curses.ERR</span></code> (a value of -1) and <code class="xref py py-meth docutils literal notranslate"><span class="pre">getkey()</span></code> raises an exception.
There's also a <a class="reference internal" href="curses.html#curses.halfdelay" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.halfdelay" title="curses.halfdelay"><code class="xref py py-func docutils literal notranslate"><span class="pre">halfdelay()</span></code></a> function, which can be used to (in
effect) set a timer on each <code class="xref py py-meth docutils literal notranslate"><span class="pre">getch()</span></code>; if no input becomes
available within a specified delay (measured in tenths of a second),
curses raises an exception.</p>
<p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">getch()</span></code> method returns an integer; if it's between 0 and 255, it
represents the ASCII code of the key pressed.  Values greater than 255 are
special keys such as Page Up, Home, or the cursor keys. You can compare the
value returned to constants such as <code class="xref py py-const docutils literal notranslate"><span class="pre">curses.KEY_PPAGE</span></code>,
<code class="xref py py-const docutils literal notranslate"><span class="pre">curses.KEY_HOME</span></code>, or <code class="xref py py-const docutils literal notranslate"><span class="pre">curses.KEY_LEFT</span></code>.  The main loop of
your program may look something like this:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">stdscr</span><span class="o">.</span><span class="n">getch</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">):</span>
        <span class="n">PrintDocument</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;q&#39;</span><span class="p">):</span>
        <span class="k">break</span>  <span class="c1"># Exit the while loop</span>
    <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="n">curses</span><span class="o">.</span><span class="n">KEY_HOME</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="curses.ascii.html#module-curses.ascii" tppabs="https://docs.python.org/zh-cn/3/library/curses.ascii.html#module-curses.ascii" title="curses.ascii: Constants and set-membership functions for ASCII characters."><code class="xref py py-mod docutils literal notranslate"><span class="pre">curses.ascii</span></code></a> module supplies ASCII class membership functions that
take either integer or 1-character string arguments; these may be useful in
writing more readable tests for such loops.  It also supplies
conversion functions  that take either integer or 1-character-string arguments
and return the same type.  For example, <a class="reference internal" href="curses.ascii.html#curses.ascii.ctrl" tppabs="https://docs.python.org/zh-cn/3/library/curses.ascii.html#curses.ascii.ctrl" title="curses.ascii.ctrl"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.ascii.ctrl()</span></code></a> returns the
control character corresponding to its argument.</p>
<p>There's also a method to retrieve an entire string,
<a class="reference internal" href="curses.html#curses.window.getstr" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.window.getstr" title="curses.window.getstr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getstr()</span></code></a>.  It isn't used very often, because its
functionality is quite limited; the only editing keys available are
the backspace key and the Enter key, which terminates the string.  It
can optionally be limited to a fixed number of characters.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">curses</span><span class="o">.</span><span class="n">echo</span><span class="p">()</span>            <span class="c1"># Enable echoing of characters</span>

<span class="c1"># Get a 15-character string, with the cursor on the top line</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">stdscr</span><span class="o">.</span><span class="n">getstr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="curses.html#module-curses.textpad" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#module-curses.textpad" title="curses.textpad: Emacs-like input editing in a curses window."><code class="xref py py-mod docutils literal notranslate"><span class="pre">curses.textpad</span></code></a> module supplies a text box that supports an
Emacs-like set of keybindings.  Various methods of the
<a class="reference internal" href="curses.html#curses.textpad.Textbox" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#curses.textpad.Textbox" title="curses.textpad.Textbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Textbox</span></code></a> class support editing with input
validation and gathering the edit results either with or without
trailing spaces.  Here's an example:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">curses</span>
<span class="kn">from</span> <span class="nn">curses.textpad</span> <span class="kn">import</span> <span class="n">Textbox</span><span class="p">,</span> <span class="n">rectangle</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">stdscr</span><span class="p">):</span>
    <span class="n">stdscr</span><span class="o">.</span><span class="n">addstr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Enter IM message: (hit Ctrl-G to send)&quot;</span><span class="p">)</span>

    <span class="n">editwin</span> <span class="o">=</span> <span class="n">curses</span><span class="o">.</span><span class="n">newwin</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">rectangle</span><span class="p">(</span><span class="n">stdscr</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">5</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">+</span><span class="mi">30</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">stdscr</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

    <span class="n">box</span> <span class="o">=</span> <span class="n">Textbox</span><span class="p">(</span><span class="n">editwin</span><span class="p">)</span>

    <span class="c1"># Let the user edit until Ctrl-G is struck.</span>
    <span class="n">box</span><span class="o">.</span><span class="n">edit</span><span class="p">()</span>

    <span class="c1"># Get resulting contents</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">gather</span><span class="p">()</span>
</pre></div>
</div>
<p>See the library documentation on <a class="reference internal" href="curses.html#module-curses.textpad" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#module-curses.textpad" title="curses.textpad: Emacs-like input editing in a curses window."><code class="xref py py-mod docutils literal notranslate"><span class="pre">curses.textpad</span></code></a> for more details.</p>
</div>
<div class="section" id="for-more-information">
<h2>æ›´å¤šçš„ä¿¡æ¯<a class="headerlink" href="#for-more-information" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>This HOWTO doesn't cover some advanced topics, such as reading the
contents of the screen or capturing mouse events from an xterm
instance, but the Python library page for the <a class="reference internal" href="curses.html#module-curses" tppabs="https://docs.python.org/zh-cn/3/library/curses.html#module-curses" title="curses: An interface to the curses library, providing portable terminal handling. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">curses</span></code></a> module is now
reasonably complete.  You should browse it next.</p>
<p>If you're in doubt about the detailed behavior of the curses
functions, consult the manual pages for your curses implementation,
whether it's ncurses or a proprietary Unix vendor's.  The manual pages
will document any quirks, and provide complete lists of all the
functions, attributes, and <code class="xref py py-const docutils literal notranslate"><span class="pre">ACS_*</span></code> characters available to
you.</p>
<p>Because the curses API is so large, some functions aren't supported in
the Python interface.  Often this isn't because they're difficult to
implement, but because no one has needed them yet.  Also, Python
doesn't yet support the menu library associated with ncurses.
Patches adding support for these would be welcome; see
<a class="reference external" href="javascript:if(confirm('https://devguide.python.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://devguide.python.org/'" tppabs="https://devguide.python.org/">the Python Developer's Guide</a> to
learn more about submitting patches to Python.</p>
<ul class="simple">
<li><p><a class="reference external" href="javascript:if(confirm('http://invisible-island.net/ncurses/issue37404  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://invisible-island.net/ncurses/issue37404'" tppabs="http://invisible-island.net/ncurses/ncurses-intro.html">Writing Programs with NCURSES</a>:
a lengthy tutorial for C programmers.</p></li>
<li><p>ncurses æ‰‹å†Œä¸»é¡µ &lt;<a class="reference external" href="javascript:if(confirm('https://linux.die.net/man/3/issue38809  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://linux.die.net/man/3/issue38809'" tppabs="https://linux.die.net/man/3/ncurses">https://linux.die.net/man/3/ncurses</a>&gt;`_</p></li>
<li><p>ncurses å¸¸è§é—®é¢˜ &lt;<a class="reference external" href="javascript:if(confirm('http://invisible-island.net/ncurses/issue38684  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://invisible-island.net/ncurses/issue38684'" tppabs="http://invisible-island.net/ncurses/ncurses.faq.html">http://invisible-island.net/ncurses/ncurses.faq.html</a>&gt;`_</p></li>
<li><p><a class="reference external" href="javascript:if(confirm('https://www.youtube.com/issue37415  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.youtube.com/issue37415'" tppabs="https://www.youtube.com/watch?v=eN1eZtjLEnU">&quot;Use curses... don't swear&quot;</a>:
video of a PyCon 2013 talk on controlling terminals using curses or Urwid.</p></li>
<li><p><a class="reference external" href="javascript:if(confirm('http://www.pyvideo.org/video/1568/issue33125  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.pyvideo.org/video/1568/issue33125'" tppabs="http://www.pyvideo.org/video/1568/console-applications-with-urwid">&quot;Console Applications with Urwid&quot;</a>:
video of a PyCon CA 2012 talk demonstrating some applications written using
Urwid.</p></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="contents.html" tppabs="https://docs.python.org/zh-cn/3/contents.html">ç›®å½•</a></h3>
  <ul>
<li><a class="reference internal" href="#">ç”¨ Python è¿›è¡Œ Curses ç¼–ç¨‹</a><ul>
<li><a class="reference internal" href="#what-is-curses">curses æ˜¯ä»€ä¹ˆï¼Ÿ</a><ul>
<li><a class="reference internal" href="#the-python-curses-module">Python çš„ curses æ¨¡å—</a></li>
</ul>
</li>
<li><a class="reference internal" href="#starting-and-ending-a-curses-application">å¼€å§‹å’Œç»“æŸcursesåº”ç”¨ç¨‹åº</a></li>
<li><a class="reference internal" href="#windows-and-pads">çª—å£å’Œé¢æ¿</a></li>
<li><a class="reference internal" href="#displaying-text">æ˜¾ç¤ºæ–‡å­—</a><ul>
<li><a class="reference internal" href="#attributes-and-color">å±æ€§å’Œé¢œè‰²</a></li>
</ul>
</li>
<li><a class="reference internal" href="#user-input">ç”¨æˆ·è¾“å…¥</a></li>
<li><a class="reference internal" href="#for-more-information">æ›´å¤šçš„ä¿¡æ¯</a></li>
</ul>
</li>
</ul>

  <h4>ä¸Šä¸€ä¸ªä¸»é¢˜</h4>
  <p class="topless"><a href="cporting.html" tppabs="https://docs.python.org/zh-cn/3/howto/cporting.html"
                        title="ä¸Šä¸€ç« ">å°†æ‰©å±•æ¨¡å—ç§»æ¤åˆ° Python 3</a></p>
  <h4>ä¸‹ä¸€ä¸ªä¸»é¢˜</h4>
  <p class="topless"><a href="descriptor.html" tppabs="https://docs.python.org/zh-cn/3/howto/descriptor.html"
                        title="ä¸‹ä¸€ç« ">å®ç°æè¿°å™¨</a></p>
  <div role="note" aria-label="source link">
    <h3>æœ¬é¡µ</h3>
    <ul class="this-page-menu">
      <li><a href="bugs.html" tppabs="https://docs.python.org/zh-cn/3/bugs.html">æäº¤ Bug</a></li>
      <li>
        <a href="javascript:if(confirm('https://github.com/python/cpython/blob/3.8/Doc/howto/curses.rst  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/python/cpython/blob/3.8/Doc/howto/curses.rst'" tppabs="https://github.com/python/cpython/blob/3.8/Doc/howto/curses.rst"
            rel="nofollow">æ˜¾ç¤ºæºä»£ç 
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>å¯¼èˆª</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" tppabs="https://docs.python.org/zh-cn/3/genindex.html" title="æ€»ç›®å½•"
             >ç´¢å¼•</a></li>
        <li class="right" >
          <a href="py-modindex.html" tppabs="https://docs.python.org/zh-cn/3/py-modindex.html" title="Python æ¨¡å—ç´¢å¼•"
             >æ¨¡å—</a> |</li>
        <li class="right" >
          <a href="descriptor.html" tppabs="https://docs.python.org/zh-cn/3/howto/descriptor.html" title="å®ç°æè¿°å™¨"
             >ä¸‹ä¸€é¡µ</a> |</li>
        <li class="right" >
          <a href="cporting.html" tppabs="https://docs.python.org/zh-cn/3/howto/cporting.html" title="å°†æ‰©å±•æ¨¡å—ç§»æ¤åˆ° Python 3"
             >ä¸Šä¸€é¡µ</a> |</li>

    <li><img src="py.png" tppabs="https://docs.python.org/zh-cn/3/_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="javascript:if(confirm('https://www.python.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.python.org/'" tppabs="https://www.python.org/">Python</a> &#187;</li>
    

    <li>
      <span class="language_switcher_placeholder">zh_CN</span>
      <span class="version_switcher_placeholder">3.8.2</span>
      <a href="index-11.html" tppabs="https://docs.python.org/zh-cn/3/index.html">æ–‡æ¡£</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index-5.html" tppabs="https://docs.python.org/zh-cn/3/howto/index.html" >Python å¸¸ç”¨æŒ‡å¼•</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="https://docs.python.org/zh-cn/3/search.html" method="get">
          <input placeholder="å¿«é€Ÿæœç´¢" type="text" name="q" />
          <input type="submit" value="è½¬å‘" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="copyright.html" tppabs="https://docs.python.org/zh-cn/3/copyright.html">ç‰ˆæƒæ‰€æœ‰</a> 2001-2020, Python Software Foundation.
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="javascript:if(confirm('https://www.python.org/psf/donations/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.python.org/psf/donations/'" tppabs="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    æœ€åæ›´æ–°äº 3æœˆ 26, 2020.
    <a href="javascript:if(confirm('https://docs.python.org/3/bugs.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/bugs.html'" tppabs="https://docs.python.org/3/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="javascript:if(confirm('https://www.sphinx-doc.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.sphinx-doc.org/'" tppabs="https://www.sphinx-doc.org/">Sphinx</a> 2.3.1.
    </div>

  </body>
</html>