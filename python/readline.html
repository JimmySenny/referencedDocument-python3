
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <title>readline --- GNU readline æ¥å£ &#8212; Python 3.8.2 æ–‡æ¡£</title>
    <link rel="stylesheet" href="pydoctheme.css" tppabs="https://docs.python.org/zh-cn/3/_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="pygments.css" tppabs="https://docs.python.org/zh-cn/3/_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="documentation_options.js" tppabs="https://docs.python.org/zh-cn/3/_static/documentation_options.js"></script>
    <script type="text/javascript" src="jquery.js" tppabs="https://docs.python.org/zh-cn/3/_static/jquery.js"></script>
    <script type="text/javascript" src="underscore.js" tppabs="https://docs.python.org/zh-cn/3/_static/underscore.js"></script>
    <script type="text/javascript" src="doctools.js" tppabs="https://docs.python.org/zh-cn/3/_static/doctools.js"></script>
    <script type="text/javascript" src="language_data.js" tppabs="https://docs.python.org/zh-cn/3/_static/language_data.js"></script>
    <script type="text/javascript" src="translations.js" tppabs="https://docs.python.org/zh-cn/3/_static/translations.js"></script>
    
    <script type="text/javascript" src="sidebar.js" tppabs="https://docs.python.org/zh-cn/3/_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="åœ¨ Python 3.8.2 æ–‡æ¡£ ä¸­æœç´¢"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="å…³äºè¿™äº›æ–‡æ¡£" href="../about.html" />
    <link rel="index" title="ç´¢å¼•" href="../genindex.html" />
    <link rel="search" title="æœç´¢" href="../search.html" />
    <link rel="copyright" title="ç‰ˆæƒæ‰€æœ‰" href="../copyright.html" />
    <link rel="next" title="rlcompleter --- GNU readline çš„è¡¥å…¨å‡½æ•°" href="rlcompleter.html" />
    <link rel="prev" title="stringprep --- å› ç‰¹ç½‘å­—ç¬¦ä¸²é¢„å¤‡" href="stringprep.html" />
    <link rel="canonical" href="https://docs.python.org/3/library/readline.html" />
    
      
      <script type="text/javascript" src="switchers.js" tppabs="https://docs.python.org/zh-cn/3/_static/switchers.js"></script>
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>

    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    
    <script type="text/javascript" src="copybutton.js" tppabs="https://docs.python.org/zh-cn/3/_static/copybutton.js"></script>
    
     


  </head><body>
  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>å¯¼èˆª</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" tppabs="https://docs.python.org/zh-cn/3/genindex.html" title="æ€»ç›®å½•"
             accesskey="I">ç´¢å¼•</a></li>
        <li class="right" >
          <a href="py-modindex.html" tppabs="https://docs.python.org/zh-cn/3/py-modindex.html" title="Python æ¨¡å—ç´¢å¼•"
             >æ¨¡å—</a> |</li>
        <li class="right" >
          <a href="rlcompleter.html" tppabs="https://docs.python.org/zh-cn/3/library/rlcompleter.html" title="rlcompleter --- GNU readline çš„è¡¥å…¨å‡½æ•°"
             accesskey="N">ä¸‹ä¸€é¡µ</a> |</li>
        <li class="right" >
          <a href="stringprep.html" tppabs="https://docs.python.org/zh-cn/3/library/stringprep.html" title="stringprep --- å› ç‰¹ç½‘å­—ç¬¦ä¸²é¢„å¤‡"
             accesskey="P">ä¸Šä¸€é¡µ</a> |</li>

    <li><img src="py.png" tppabs="https://docs.python.org/zh-cn/3/_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="javascript:if(confirm('https://www.python.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.python.org/'" tppabs="https://www.python.org/">Python</a> &#187;</li>
    

    <li>
      <span class="language_switcher_placeholder">zh_CN</span>
      <span class="version_switcher_placeholder">3.8.2</span>
      <a href="index-11.html" tppabs="https://docs.python.org/zh-cn/3/index.html">æ–‡æ¡£</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index-2.html" tppabs="https://docs.python.org/zh-cn/3/library/index.html" >Python æ ‡å‡†åº“</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="text.html" tppabs="https://docs.python.org/zh-cn/3/library/text.html" accesskey="U">æ–‡æœ¬å¤„ç†æœåŠ¡</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="https://docs.python.org/zh-cn/3/search.html" method="get">
          <input placeholder="å¿«é€Ÿæœç´¢" type="text" name="q" />
          <input type="submit" value="è½¬å‘" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-readline">
<span id="readline-gnu-readline-interface"></span><h1><a class="reference internal" href="#module-readline" title="readline: GNU readline support for Python. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code></a> --- GNU readline æ¥å£<a class="headerlink" href="#module-readline" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h1>
<hr class="docutils" />
<p><a class="reference internal" href="#module-readline" title="readline: GNU readline support for Python. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code></a> æ¨¡å—å®šä¹‰äº†è®¸å¤šæ–¹ä¾¿ä» Python è§£é‡Šå™¨å®Œæˆå’Œè¯»å–/å†™å…¥å†å²æ–‡ä»¶çš„å‡½æ•°ã€‚ æ­¤æ¨¡å—å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæˆ–é€šè¿‡æ”¯æŒåœ¨äº¤äº’æç¤ºç¬¦ä¸‹å®Œæˆ Python æ ‡è¯†ç¬¦çš„ <a class="reference internal" href="rlcompleter.html#module-rlcompleter" tppabs="https://docs.python.org/zh-cn/3/library/rlcompleter.html#module-rlcompleter" title="rlcompleter: Python identifier completion, suitable for the GNU readline library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">rlcompleter</span></code></a> æ¨¡å—ä½¿ç”¨ã€‚ ä½¿ç”¨æ­¤æ¨¡å—è¿›è¡Œçš„è®¾ç½®ä¼šåŒæ—¶å½±å“è§£é‡Šå™¨çš„äº¤äº’æç¤ºç¬¦ä»¥åŠå†…ç½® <a class="reference internal" href="functions.html#input" tppabs="https://docs.python.org/zh-cn/3/library/functions.html#input" title="input"><code class="xref py py-func docutils literal notranslate"><span class="pre">input()</span></code></a> å‡½æ•°æä¾›çš„æç¤ºç¬¦ã€‚</p>
<p>Readline keybindings may be configured via an initialization file, typically
<code class="docutils literal notranslate"><span class="pre">.inputrc</span></code> in your home directory.  See <a class="reference external" href="javascript:if(confirm('https://tiswww.cwru.edu/php/chet/readline/pep-0261  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://tiswww.cwru.edu/php/chet/readline/pep-0261#SEC9'" tppabs="https://tiswww.cwru.edu/php/chet/readline/rluserman.html#SEC9">Readline Init File</a>
in the GNU Readline manual for information about the format and
allowable constructs of that file, and the capabilities of the
Readline library in general.</p>
<div class="admonition note">
<p class="admonition-title">æ³¨è§£</p>
<p>åº•å±‚çš„ Readline åº“ API å¯èƒ½ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">libedit</span></code> åº“æ¥å®ç°è€Œä¸æ˜¯ GNU readlineã€‚ åœ¨ macOS ä¸Š <a class="reference internal" href="#module-readline" title="readline: GNU readline support for Python. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code></a> æ¨¡å—ä¼šåœ¨è¿è¡Œæ—¶æ£€æµ‹æ‰€ä½¿ç”¨çš„æ˜¯å“ªä¸ªåº“ã€‚</p>
<p><code class="docutils literal notranslate"><span class="pre">libedit</span></code> æ‰€ç”¨çš„é…ç½®æ–‡ä»¶ä¸ GNU readline çš„ä¸åŒã€‚ å¦‚æœä½ è¦åœ¨ç¨‹åºä¸­è½½å…¥é…ç½®å­—ç¬¦ä¸²ä½ å¯ä»¥åœ¨ <code class="xref py py-const docutils literal notranslate"><span class="pre">readline.__doc__</span></code> ä¸­æ£€æµ‹æ–‡æœ¬ &quot;libedit&quot; æ¥åŒºåˆ† GNU readline å’Œ libeditã€‚</p>
<p>å¦‚æœä½ æ˜¯åœ¨ macOS ä¸Šä½¿ç”¨ <em>editline</em>/<code class="docutils literal notranslate"><span class="pre">libedit</span></code> readline æ¨¡æ‹Ÿï¼Œåˆ™ä½äºä½ çš„ä¸»ç›®å½•ä¸­çš„åˆå§‹åŒ–æ–‡ä»¶åç§°ä¸º <code class="docutils literal notranslate"><span class="pre">.editrc</span></code>ã€‚ ä¾‹å¦‚ï¼Œ<code class="docutils literal notranslate"><span class="pre">~/.editrc</span></code> ä¸­çš„ä»¥ä¸‹å†…å®¹å°†å¼€å¯ <em>vi</em> æŒ‰é”®ç»‘å®šä»¥åŠ TAB è¡¥å…¨:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">python</span><span class="p">:</span><span class="n">bind</span> <span class="o">-</span><span class="n">v</span>
<span class="n">python</span><span class="p">:</span><span class="n">bind</span> <span class="o">^</span><span class="n">I</span> <span class="n">rl_complete</span>
</pre></div>
</div>
</div>
<div class="section" id="init-file">
<h2>åˆå§‹åŒ–æ–‡ä»¶<a class="headerlink" href="#init-file" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>ä¸‹åˆ—å‡½æ•°ä¸åˆå§‹åŒ–æ–‡ä»¶å’Œç”¨æˆ·é…ç½®æœ‰å…³ï¼š</p>
<dl class="function">
<dt id="readline.parse_and_bind">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">parse_and_bind</code><span class="sig-paren">(</span><em class="sig-param">string</em><span class="sig-paren">)</span><a class="headerlink" href="#readline.parse_and_bind" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>æ‰§è¡Œåœ¨ <em>string</em> å‚æ•°ä¸­æä¾›çš„åˆå§‹åŒ–è¡Œã€‚ æ­¤å‡½æ•°ä¼šè°ƒç”¨åº•å±‚åº“ä¸­çš„ <code class="xref c c-func docutils literal notranslate"><span class="pre">rl_parse_and_bind()</span></code>ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="readline.read_init_file">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">read_init_file</code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param">filename</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.read_init_file" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>æ‰§è¡Œä¸€ä¸ª readline åˆå§‹åŒ–æ–‡ä»¶ã€‚ é»˜è®¤æ–‡ä»¶åä¸ºæœ€è¿‘æ‰€ä½¿ç”¨çš„æ–‡ä»¶åã€‚ æ­¤å‡½æ•°ä¼šè°ƒç”¨åº•å±‚åº“ä¸­çš„ <code class="xref c c-func docutils literal notranslate"><span class="pre">rl_read_init_file()</span></code>ã€‚</p>
</dd></dl>

</div>
<div class="section" id="line-buffer">
<h2>è¡Œç¼“å†²åŒº<a class="headerlink" href="#line-buffer" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>ä¸‹åˆ—å‡½æ•°ä¼šåœ¨è¡Œç¼“å†²åŒºä¸Šæ“ä½œã€‚</p>
<dl class="function">
<dt id="readline.get_line_buffer">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">get_line_buffer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.get_line_buffer" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è¿”å›è¡Œç¼“å†²åŒºçš„å½“å‰å†…å®¹ (åº•å±‚åº“ä¸­çš„ <code class="xref c c-data docutils literal notranslate"><span class="pre">rl_line_buffer</span></code>)ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="readline.insert_text">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">insert_text</code><span class="sig-paren">(</span><em class="sig-param">string</em><span class="sig-paren">)</span><a class="headerlink" href="#readline.insert_text" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å°†æ–‡æœ¬æ’å…¥è¡Œç¼“å†²åŒºçš„å½“å‰æ¸¸æ ‡ä½ç½®ã€‚ è¯¥å‡½æ•°ä¼šè°ƒç”¨åº•å±‚åº“ä¸­çš„ <code class="xref c c-func docutils literal notranslate"><span class="pre">rl_insert_text()</span></code>ï¼Œä½†ä¼šå¿½ç•¥å…¶è¿”å›å€¼ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="readline.redisplay">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">redisplay</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.redisplay" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>æ”¹å˜å±å¹•çš„æ˜¾ç¤ºä»¥åæ˜ è¡Œç¼“å†²åŒºçš„å½“å‰å†…å®¹ã€‚ è¯¥å‡½æ•°ä¼šè°ƒç”¨åº•å±‚åº“ä¸­çš„ <code class="xref c c-func docutils literal notranslate"><span class="pre">rl_redisplay()</span></code>ã€‚</p>
</dd></dl>

</div>
<div class="section" id="history-file">
<h2>å†å²æ–‡ä»¶<a class="headerlink" href="#history-file" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>ä¸‹åˆ—å‡½æ•°ä¼šåœ¨å†å²æ–‡ä»¶ä¸Šæ“ä½œï¼š</p>
<dl class="function">
<dt id="readline.read_history_file">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">read_history_file</code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param">filename</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.read_history_file" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è½½å…¥ä¸€ä¸ª readline å†å²æ–‡ä»¶ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°å†å²åˆ—è¡¨ã€‚ é»˜è®¤æ–‡ä»¶åä¸º <code class="file docutils literal notranslate"><span class="pre">~/.history</span></code>ã€‚ æ­¤å‡½æ•°ä¼šè°ƒç”¨åº•å±‚åº“ä¸­çš„ <code class="xref c c-func docutils literal notranslate"><span class="pre">read_history()</span></code>ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="readline.write_history_file">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">write_history_file</code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param">filename</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.write_history_file" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å°†å†å²åˆ—è¡¨ä¿å­˜ä¸º readline å†å²æ–‡ä»¶ï¼Œè¦†ç›–ä»»ä½•ç°æœ‰æ–‡ä»¶ã€‚ é»˜è®¤æ–‡ä»¶åä¸º <code class="file docutils literal notranslate"><span class="pre">~/.history</span></code>ã€‚ æ­¤å‡½æ•°ä¼šè°ƒç”¨åº•å±‚åº“ä¸­çš„ <code class="xref c c-func docutils literal notranslate"><span class="pre">write_history()</span></code>ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="readline.append_history_file">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">append_history_file</code><span class="sig-paren">(</span><em class="sig-param">nelements</em><span class="optional">[</span>, <em class="sig-param">filename</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.append_history_file" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å°†å†å²åˆ—è¡¨çš„æœ€å <em>nelements</em> é¡¹æ·»åŠ åˆ°å†å²æ–‡ä»¶ã€‚ é»˜è®¤æ–‡ä»¶åä¸º <code class="file docutils literal notranslate"><span class="pre">~/.history</span></code>ã€‚ æ–‡ä»¶å¿…é¡»å·²å­˜åœ¨ã€‚ æ­¤å‡½æ•°ä¼šè°ƒç”¨åº•å±‚åº“ä¸­çš„ <code class="xref c c-func docutils literal notranslate"><span class="pre">append_history()</span></code>ã€‚ æ­¤å‡½æ•°ä»…å½“ Python ç¼–è¯‘åŒ…å¸¦æœ‰æ”¯æŒæ­¤åŠŸèƒ½çš„åº“ç‰ˆæœ¬æ—¶æ‰ä¼šå­˜åœ¨ã€‚</p>
<div class="versionadded">
<p><span class="versionmodified added">3.5 æ–°ç‰ˆåŠŸèƒ½.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="readline.get_history_length">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">get_history_length</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.get_history_length" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dt id="readline.set_history_length">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">set_history_length</code><span class="sig-paren">(</span><em class="sig-param">length</em><span class="sig-paren">)</span><a class="headerlink" href="#readline.set_history_length" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è®¾ç½®æˆ–è¿”å›éœ€è¦ä¿å­˜åˆ°å†å²æ–‡ä»¶çš„è¡Œæ•°ã€‚ <a class="reference internal" href="#readline.write_history_file" title="readline.write_history_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_history_file()</span></code></a> å‡½æ•°ä¼šé€šè¿‡è°ƒç”¨åº•å±‚åº“ä¸­çš„ <code class="xref c c-func docutils literal notranslate"><span class="pre">history_truncate_file()</span></code> ä»¥ä½¿ç”¨è¯¥å€¼æ¥æˆªå–å†å²æ–‡ä»¶ã€‚ è´Ÿå€¼æ„å‘³ç€ä¸é™åˆ¶å†å²æ–‡ä»¶çš„å¤§å°ã€‚</p>
</dd></dl>

</div>
<div class="section" id="history-list">
<h2>å†å²åˆ—è¡¨<a class="headerlink" href="#history-list" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>ä»¥ä¸‹å‡½æ•°ä¼šåœ¨å…¨å±€å†å²åˆ—è¡¨ä¸Šæ“ä½œï¼š</p>
<dl class="function">
<dt id="readline.clear_history">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">clear_history</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.clear_history" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>æ¸…é™¤å½“å‰å†å²ã€‚ æ­¤å‡½æ•°ä¼šè°ƒç”¨åº•å±‚åº“çš„ <code class="xref c c-func docutils literal notranslate"><span class="pre">clear_history()</span></code>ã€‚ æ­¤ Python å‡½æ•°ä»…å½“ Python ç¼–è¯‘åŒ…å¸¦æœ‰æ”¯æŒæ­¤åŠŸèƒ½çš„åº“ç‰ˆæœ¬æ—¶æ‰ä¼šå­˜åœ¨ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="readline.get_current_history_length">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">get_current_history_length</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.get_current_history_length" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è¿”å›å†å²åˆ—è¡¨çš„å½“å‰é¡¹æ•°ã€‚ ï¼ˆæ­¤å‡½æ•°ä¸åŒäº <a class="reference internal" href="#readline.get_history_length" title="readline.get_history_length"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_history_length()</span></code></a>ï¼Œåè€…æ˜¯è¿”å›å°†è¢«å†™å…¥å†å²æ–‡ä»¶çš„æœ€å¤§è¡Œæ•°ã€‚ï¼‰</p>
</dd></dl>

<dl class="function">
<dt id="readline.get_history_item">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">get_history_item</code><span class="sig-paren">(</span><em class="sig-param">index</em><span class="sig-paren">)</span><a class="headerlink" href="#readline.get_history_item" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è¿”å›åºå·ä¸º <em>index</em> çš„å†å²æ¡ç›®çš„å½“å‰å†…å®¹ã€‚ æ¡ç›®åºå·ä»ä¸€å¼€å§‹ã€‚ æ­¤å‡½æ•°ä¼šè°ƒç”¨åº•å±‚åº“ä¸­çš„ <code class="xref c c-func docutils literal notranslate"><span class="pre">history_get()</span></code>ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="readline.remove_history_item">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">remove_history_item</code><span class="sig-paren">(</span><em class="sig-param">pos</em><span class="sig-paren">)</span><a class="headerlink" href="#readline.remove_history_item" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>ä»å†å²åˆ—è¡¨ä¸­ç§»é™¤æŒ‡å®šä½ç½®ä¸Šçš„å†å²æ¡ç›®ã€‚ æ¡ç›®ä½ç½®ä»é›¶å¼€å§‹ã€‚ æ­¤å‡½æ•°ä¼šè°ƒç”¨åº•å±‚åº“ä¸­çš„ <code class="xref c c-func docutils literal notranslate"><span class="pre">remove_history()</span></code>ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="readline.replace_history_item">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">replace_history_item</code><span class="sig-paren">(</span><em class="sig-param">pos</em>, <em class="sig-param">line</em><span class="sig-paren">)</span><a class="headerlink" href="#readline.replace_history_item" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å°†æŒ‡å®šä½ç½®ä¸Šçš„å†å²æ¡ç›®æ›¿æ¢ä¸º <em>line</em>ã€‚ æ¡ç›®ä½ç½®ä»é›¶å¼€å§‹ã€‚ æ­¤å‡½æ•°ä¼šè°ƒç”¨åº•å±‚åº“ä¸­çš„ <code class="xref c c-func docutils literal notranslate"><span class="pre">replace_history_entry()</span></code>ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="readline.add_history">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">add_history</code><span class="sig-paren">(</span><em class="sig-param">line</em><span class="sig-paren">)</span><a class="headerlink" href="#readline.add_history" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å°† <em>line</em> æ·»åŠ åˆ°å†å²ç¼“å†²åŒºï¼Œç›¸å½“äºæ˜¯æœ€è¿‘è¾“å…¥çš„ä¸€è¡Œã€‚ æ­¤å‡½æ•°ä¼šè°ƒç”¨åº•å±‚åº“ä¸­çš„ <code class="xref c c-func docutils literal notranslate"><span class="pre">add_history()</span></code>ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="readline.set_auto_history">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">set_auto_history</code><span class="sig-paren">(</span><em class="sig-param">enabled</em><span class="sig-paren">)</span><a class="headerlink" href="#readline.set_auto_history" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>å¯ç”¨æˆ–ç¦ç”¨å½“é€šè¿‡ readline è¯»å–è¾“å…¥æ—¶è‡ªåŠ¨è°ƒç”¨ <code class="xref c c-func docutils literal notranslate"><span class="pre">add_history()</span></code>ã€‚ <em>enabled</em> å‚æ•°åº”ä¸ºä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå½“å…¶ä¸ºçœŸå€¼æ—¶å¯ç”¨è‡ªåŠ¨å†å²ï¼Œå½“å…¶ä¸ºå‡å€¼æ—¶ç¦ç”¨è‡ªåŠ¨å†å²ã€‚</p>
<div class="versionadded">
<p><span class="versionmodified added">3.6 æ–°ç‰ˆåŠŸèƒ½.</span></p>
</div>
<div class="impl-detail compound">
<p><strong>CPython implementation detail:</strong> Auto history is enabled by default, and changes to this do not persist
across multiple sessions.</p>
</div>
</dd></dl>

</div>
<div class="section" id="startup-hooks">
<h2>å¯åŠ¨é’©å­<a class="headerlink" href="#startup-hooks" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<dl class="function">
<dt id="readline.set_startup_hook">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">set_startup_hook</code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param">function</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.set_startup_hook" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è®¾ç½®æˆ–ç§»é™¤åº•å±‚åº“çš„ <code class="xref c c-data docutils literal notranslate"><span class="pre">rl_startup_hook</span></code> å›è°ƒæ‰€å‘èµ·è°ƒç”¨çš„å‡½æ•°ã€‚ å¦‚æœæŒ‡å®šäº† <em>function</em>ï¼Œå®ƒå°†è¢«ç”¨ä½œæ–°çš„é’©å­å‡½æ•°ï¼›å¦‚æœçœç•¥æˆ–ä¸º <code class="docutils literal notranslate"><span class="pre">None</span></code>ï¼Œä»»ä½•å·²å®‰è£…çš„å‡½æ•°å°†è¢«ç§»é™¤ã€‚ é’©å­å‡½æ•°å°†åœ¨ readline æ‰“å°ç¬¬ä¸€ä¸ªæç¤ºä¿¡æ¯ä¹‹å‰ä¸å¸¦å‚æ•°åœ°è¢«è°ƒç”¨ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="readline.set_pre_input_hook">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">set_pre_input_hook</code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param">function</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.set_pre_input_hook" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è®¾ç½®æˆ–ç§»é™¤åº•å±‚åº“çš„ <code class="xref c c-data docutils literal notranslate"><span class="pre">rl_pre_input_hook</span></code> å›è°ƒæ‰€å‘èµ·è°ƒç”¨çš„å‡½æ•°ã€‚ å¦‚æœæŒ‡å®šäº† <em>function</em>ï¼Œå®ƒå°†è¢«ç”¨ä½œæ–°çš„é’©å­å‡½æ•°ï¼›å¦‚æœçœç•¥æˆ–ä¸º <code class="docutils literal notranslate"><span class="pre">None</span></code>ï¼Œä»»ä½•å·²å®‰è£…çš„å‡½æ•°å°†è¢«ç§»é™¤ã€‚ é’©å­å‡½æ•°å°†åœ¨æ‰“å°ç¬¬ä¸€ä¸ªæç¤ºä¿¡æ¯ä¹‹åã€readline å¼€å§‹è¯»å–è¾“å…¥å­—ç¬¦ä¹‹å‰ä¸å¸¦å‚æ•°åœ°è¢«è°ƒç”¨ã€‚ æ­¤å‡½æ•°ä»…å½“ Python ç¼–è¯‘åŒ…å¸¦æœ‰æ”¯æŒæ­¤åŠŸèƒ½çš„åº“ç‰ˆæœ¬æ—¶æ‰ä¼šå­˜åœ¨ã€‚</p>
</dd></dl>

</div>
<div class="section" id="completion">
<h2>Completion<a class="headerlink" href="#completion" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>ä»¥ä¸‹å‡½æ•°ä¸è‡ªå®šä¹‰å•è¯è¡¥å…¨å‡½æ•°çš„å®ç°æœ‰å…³ã€‚ è¿™é€šå¸¸ä½¿ç”¨ Tab é”®è¿›è¡Œæ“ä½œï¼Œèƒ½å¤Ÿæç¤ºå¹¶è‡ªåŠ¨è¡¥å…¨æ­£åœ¨è¾“å…¥çš„å•è¯ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒReadline è®¾ç½®ä¸ºç”± <a class="reference internal" href="rlcompleter.html#module-rlcompleter" tppabs="https://docs.python.org/zh-cn/3/library/rlcompleter.html#module-rlcompleter" title="rlcompleter: Python identifier completion, suitable for the GNU readline library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">rlcompleter</span></code></a> æ¥è¡¥å…¨äº¤äº’æ¨¡å¼è§£é‡Šå™¨çš„ Python æ ‡è¯†ç¬¦ã€‚ å¦‚æœ <a class="reference internal" href="#module-readline" title="readline: GNU readline support for Python. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code></a> æ¨¡å—è¦é…åˆè‡ªå®šä¹‰çš„è¡¥å…¨å‡½æ•°æ¥ä½¿ç”¨ï¼Œåˆ™éœ€è¦è®¾ç½®ä¸åŒçš„å•è¯åˆ†éš”ç¬¦ã€‚</p>
<dl class="function">
<dt id="readline.set_completer">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">set_completer</code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param">function</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.set_completer" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è®¾ç½®æˆ–ç§»é™¤è¡¥å…¨å‡½æ•°ã€‚ å¦‚æœæŒ‡å®šäº† <em>function</em>ï¼Œå®ƒå°†è¢«ç”¨ä½œæ–°çš„è¡¥å…¨å‡½æ•°ï¼›å¦‚æœçœç•¥æˆ–ä¸º <code class="docutils literal notranslate"><span class="pre">None</span></code>ï¼Œä»»ä½•å·²å®‰è£…çš„è¡¥å…¨å‡½æ•°å°†è¢«ç§»é™¤ã€‚ è¡¥å…¨å‡½æ•°çš„è°ƒç”¨å½¢å¼ä¸º <code class="docutils literal notranslate"><span class="pre">function(text,</span> <span class="pre">state)</span></code>ï¼Œå…¶ä¸­ <em>state</em> ä¸º <code class="docutils literal notranslate"><span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">2</span></code>, ..., ç›´è‡³å…¶è¿”å›ä¸€ä¸ªéå­—ç¬¦ä¸²å€¼ã€‚ å®ƒåº”å½“è¿”å›ä¸‹ä¸€ä¸ªä»¥ <em>text</em> å¼€å¤´çš„å€™é€‰è¡¥å…¨å†…å®¹ã€‚</p>
<p>å·²å®‰è£…çš„è¡¥å…¨å‡½æ•°å°†ç”±ä¼ é€’ç»™åº•å±‚åº“ä¸­ <code class="xref c c-func docutils literal notranslate"><span class="pre">rl_completion_matches()</span></code> çš„ <em>entry_func</em> å›è°ƒå‡½æ•°æ¥å‘èµ·è°ƒç”¨ã€‚ <em>text</em> å­—ç¬¦ä¸²æ¥è‡ªäºåº•å±‚åº“ä¸­ <code class="xref c c-data docutils literal notranslate"><span class="pre">rl_attempted_completion_function</span></code> å›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå½¢å‚ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="readline.get_completer">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">get_completer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.get_completer" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è·å–è¡¥å…¨å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®è¡¥å…¨å‡½æ•°åˆ™è¿”å› <code class="docutils literal notranslate"><span class="pre">None</span></code>ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="readline.get_completion_type">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">get_completion_type</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.get_completion_type" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è·å–æ­£åœ¨å°è¯•çš„è¡¥å…¨ç±»å‹ã€‚ æ­¤å‡½æ•°ä¼šå°†åº•å±‚åº“ä¸­çš„ <code class="xref c c-data docutils literal notranslate"><span class="pre">rl_completion_type</span></code> å˜é‡ä½œä¸ºä¸€ä¸ªæ•´æ•°è¿”å›ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="readline.get_begidx">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">get_begidx</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.get_begidx" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dt id="readline.get_endidx">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">get_endidx</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.get_endidx" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è·å–è¡¥å…¨åŸŸçš„å¼€å§‹å’Œç»“æŸåºå·ã€‚ è¿™äº›åºå·å°±æ˜¯ä¼ ç»™åº•å±‚åº“ä¸­ <code class="xref c c-data docutils literal notranslate"><span class="pre">rl_attempted_completion_function</span></code> å›è°ƒå‡½æ•°çš„ <em>start</em> å’Œ <em>end</em> å‚æ•°ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="readline.set_completer_delims">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">set_completer_delims</code><span class="sig-paren">(</span><em class="sig-param">string</em><span class="sig-paren">)</span><a class="headerlink" href="#readline.set_completer_delims" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dt id="readline.get_completer_delims">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">get_completer_delims</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.get_completer_delims" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è®¾ç½®æˆ–è·å–è¡¥å…¨çš„å•è¯åˆ†éš”ç¬¦ã€‚ æ­¤åˆ†éš”ç¬¦ç¡®å®šäº†è¦è€ƒè™‘è¡¥å…¨çš„å•è¯çš„å¼€å§‹å’Œç»“æŸä½ç½®ï¼ˆè¡¥å…¨åŸŸï¼‰ã€‚ è¿™äº›å‡½æ•°ä¼šè®¿é—®åº•å±‚åº“çš„ <code class="xref c c-data docutils literal notranslate"><span class="pre">rl_completer_word_break_characters</span></code> å˜é‡ã€‚</p>
</dd></dl>

<dl class="function">
<dt id="readline.set_completion_display_matches_hook">
<code class="sig-prename descclassname">readline.</code><code class="sig-name descname">set_completion_display_matches_hook</code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param">function</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#readline.set_completion_display_matches_hook" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡">Â¶</a></dt>
<dd><p>è®¾ç½®æˆ–ç§»é™¤è¡¥å…¨æ˜¾ç¤ºå‡½æ•°ã€‚ å¦‚æœæŒ‡å®šäº† <em>function</em>ï¼Œå®ƒå°†è¢«ç”¨ä½œæ–°çš„è¡¥å…¨æ˜¾ç¤ºå‡½æ•°ï¼›å¦‚æœçœç•¥æˆ–ä¸º <code class="docutils literal notranslate"><span class="pre">None</span></code>ï¼Œä»»ä½•å·²å®‰è£…çš„è¡¥å…¨æ˜¾ç¤ºå‡½æ•°å°†è¢«ç§»é™¤ã€‚ æ­¤å‡½æ•°ä¼šè®¾ç½®æˆ–æ¸…é™¤åº•å±‚åº“çš„ <code class="xref c c-data docutils literal notranslate"><span class="pre">rl_completion_display_matches_hook</span></code> å›è°ƒå‡½æ•°ã€‚ è¡¥å…¨æ˜¾ç¤ºå‡½æ•°ä¼šåœ¨æ¯æ¬¡éœ€è¦æ˜¾ç¤ºåŒ¹é…é¡¹æ—¶ä»¥ <code class="docutils literal notranslate"><span class="pre">function(substitution,</span> <span class="pre">[matches],</span> <span class="pre">longest_match_length)</span></code> çš„å½¢å¼è¢«è°ƒç”¨ã€‚</p>
</dd></dl>

</div>
<div class="section" id="example">
<span id="readline-example"></span><h2>ç¤ºä¾‹<a class="headerlink" href="#example" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <a class="reference internal" href="#module-readline" title="readline: GNU readline support for Python. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code></a> æ¨¡å—çš„å†å²è¯»å–æˆ–å†™å…¥å‡½æ•°æ¥è‡ªåŠ¨åŠ è½½å’Œä¿å­˜ç”¨æˆ·ä¸»ç›®å½•ä¸‹åä¸º <code class="file docutils literal notranslate"><span class="pre">.python_history</span></code> çš„å†å²æ–‡ä»¶ã€‚ ä»¥ä¸‹ä»£ç é€šå¸¸åº”å½“åœ¨äº¤äº’ä¼šè¯æœŸé—´ä»ç”¨æˆ·çš„ <span class="target" id="index-2"></span><a class="reference internal" href="cmdline.html#envvar-PYTHONSTARTUP" tppabs="https://docs.python.org/zh-cn/3/using/cmdline.html#envvar-PYTHONSTARTUP"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONSTARTUP</span></code></a> æ–‡ä»¶è‡ªåŠ¨æ‰§è¡Œã€‚</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">atexit</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">readline</span>

<span class="n">histfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">),</span> <span class="s2">&quot;.python_history&quot;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">readline</span><span class="o">.</span><span class="n">read_history_file</span><span class="p">(</span><span class="n">histfile</span><span class="p">)</span>
    <span class="c1"># default history len is -1 (infinite), which may grow unruly</span>
    <span class="n">readline</span><span class="o">.</span><span class="n">set_history_length</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="n">atexit</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">readline</span><span class="o">.</span><span class="n">write_history_file</span><span class="p">,</span> <span class="n">histfile</span><span class="p">)</span>
</pre></div>
</div>
<p>æ­¤ä»£ç å®é™…ä¸Šä¼šåœ¨ Python è¿è¡Œäº <a class="reference internal" href="interpreter.html#tut-interactive" tppabs="https://docs.python.org/zh-cn/3/tutorial/interpreter.html#tut-interactive"><span class="std std-ref">äº¤äº’æ¨¡å¼</span></a> æ—¶è‡ªåŠ¨è¿è¡Œ (å‚è§ <a class="reference internal" href="site.html#rlcompleter-config" tppabs="https://docs.python.org/zh-cn/3/library/site.html#rlcompleter-config"><span class="std std-ref">Readline configuration</span></a>)ã€‚</p>
<p>ä»¥ä¸‹ç¤ºä¾‹å®ç°äº†åŒæ ·çš„ç›®æ ‡ï¼Œä½†æ˜¯é€šè¿‡åªæ·»åŠ æ–°å†å²çš„æ–¹å¼æ¥æ”¯æŒå¹¶å‘çš„äº¤äº’ä¼šè¯ã€‚</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">atexit</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">readline</span>
<span class="n">histfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">),</span> <span class="s2">&quot;.python_history&quot;</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">readline</span><span class="o">.</span><span class="n">read_history_file</span><span class="p">(</span><span class="n">histfile</span><span class="p">)</span>
    <span class="n">h_len</span> <span class="o">=</span> <span class="n">readline</span><span class="o">.</span><span class="n">get_current_history_length</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
    <span class="nb">open</span><span class="p">(</span><span class="n">histfile</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">h_len</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="n">prev_h_len</span><span class="p">,</span> <span class="n">histfile</span><span class="p">):</span>
    <span class="n">new_h_len</span> <span class="o">=</span> <span class="n">readline</span><span class="o">.</span><span class="n">get_current_history_length</span><span class="p">()</span>
    <span class="n">readline</span><span class="o">.</span><span class="n">set_history_length</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
    <span class="n">readline</span><span class="o">.</span><span class="n">append_history_file</span><span class="p">(</span><span class="n">new_h_len</span> <span class="o">-</span> <span class="n">prev_h_len</span><span class="p">,</span> <span class="n">histfile</span><span class="p">)</span>
<span class="n">atexit</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">save</span><span class="p">,</span> <span class="n">h_len</span><span class="p">,</span> <span class="n">histfile</span><span class="p">)</span>
</pre></div>
</div>
<p>ä»¥ä¸‹ç¤ºä¾‹æ‰©å±•äº† <a class="reference internal" href="code.html#code.InteractiveConsole" tppabs="https://docs.python.org/zh-cn/3/library/code.html#code.InteractiveConsole" title="code.InteractiveConsole"><code class="xref py py-class docutils literal notranslate"><span class="pre">code.InteractiveConsole</span></code></a> ç±»ä»¥æ”¯æŒå†å²ä¿å­˜/æ¢å¤ã€‚</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">atexit</span>
<span class="kn">import</span> <span class="nn">code</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">readline</span>

<span class="k">class</span> <span class="nc">HistoryConsole</span><span class="p">(</span><span class="n">code</span><span class="o">.</span><span class="n">InteractiveConsole</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">locals</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;&lt;console&gt;&quot;</span><span class="p">,</span>
                 <span class="n">histfile</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~/.console-history&quot;</span><span class="p">)):</span>
        <span class="n">code</span><span class="o">.</span><span class="n">InteractiveConsole</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">locals</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_history</span><span class="p">(</span><span class="n">histfile</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">init_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">histfile</span><span class="p">):</span>
        <span class="n">readline</span><span class="o">.</span><span class="n">parse_and_bind</span><span class="p">(</span><span class="s2">&quot;tab: complete&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">readline</span><span class="p">,</span> <span class="s2">&quot;read_history_file&quot;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">readline</span><span class="o">.</span><span class="n">read_history_file</span><span class="p">(</span><span class="n">histfile</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">atexit</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_history</span><span class="p">,</span> <span class="n">histfile</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">histfile</span><span class="p">):</span>
        <span class="n">readline</span><span class="o">.</span><span class="n">set_history_length</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
        <span class="n">readline</span><span class="o">.</span><span class="n">write_history_file</span><span class="p">(</span><span class="n">histfile</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="contents.html" tppabs="https://docs.python.org/zh-cn/3/contents.html">ç›®å½•</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code> --- GNU readline æ¥å£</a><ul>
<li><a class="reference internal" href="#init-file">åˆå§‹åŒ–æ–‡ä»¶</a></li>
<li><a class="reference internal" href="#line-buffer">è¡Œç¼“å†²åŒº</a></li>
<li><a class="reference internal" href="#history-file">å†å²æ–‡ä»¶</a></li>
<li><a class="reference internal" href="#history-list">å†å²åˆ—è¡¨</a></li>
<li><a class="reference internal" href="#startup-hooks">å¯åŠ¨é’©å­</a></li>
<li><a class="reference internal" href="#completion">Completion</a></li>
<li><a class="reference internal" href="#example">ç¤ºä¾‹</a></li>
</ul>
</li>
</ul>

  <h4>ä¸Šä¸€ä¸ªä¸»é¢˜</h4>
  <p class="topless"><a href="stringprep.html" tppabs="https://docs.python.org/zh-cn/3/library/stringprep.html"
                        title="ä¸Šä¸€ç« "><code class="xref py py-mod docutils literal notranslate"><span class="pre">stringprep</span></code> --- å› ç‰¹ç½‘å­—ç¬¦ä¸²é¢„å¤‡</a></p>
  <h4>ä¸‹ä¸€ä¸ªä¸»é¢˜</h4>
  <p class="topless"><a href="rlcompleter.html" tppabs="https://docs.python.org/zh-cn/3/library/rlcompleter.html"
                        title="ä¸‹ä¸€ç« "><code class="xref py py-mod docutils literal notranslate"><span class="pre">rlcompleter</span></code> --- GNU readline çš„è¡¥å…¨å‡½æ•°</a></p>
  <div role="note" aria-label="source link">
    <h3>æœ¬é¡µ</h3>
    <ul class="this-page-menu">
      <li><a href="bugs.html" tppabs="https://docs.python.org/zh-cn/3/bugs.html">æäº¤ Bug</a></li>
      <li>
        <a href="javascript:if(confirm('https://github.com/python/cpython/blob/3.8/Doc/library/readline.rst  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/python/cpython/blob/3.8/Doc/library/readline.rst'" tppabs="https://github.com/python/cpython/blob/3.8/Doc/library/readline.rst"
            rel="nofollow">æ˜¾ç¤ºæºä»£ç 
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>å¯¼èˆª</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" tppabs="https://docs.python.org/zh-cn/3/genindex.html" title="æ€»ç›®å½•"
             >ç´¢å¼•</a></li>
        <li class="right" >
          <a href="py-modindex.html" tppabs="https://docs.python.org/zh-cn/3/py-modindex.html" title="Python æ¨¡å—ç´¢å¼•"
             >æ¨¡å—</a> |</li>
        <li class="right" >
          <a href="rlcompleter.html" tppabs="https://docs.python.org/zh-cn/3/library/rlcompleter.html" title="rlcompleter --- GNU readline çš„è¡¥å…¨å‡½æ•°"
             >ä¸‹ä¸€é¡µ</a> |</li>
        <li class="right" >
          <a href="stringprep.html" tppabs="https://docs.python.org/zh-cn/3/library/stringprep.html" title="stringprep --- å› ç‰¹ç½‘å­—ç¬¦ä¸²é¢„å¤‡"
             >ä¸Šä¸€é¡µ</a> |</li>

    <li><img src="py.png" tppabs="https://docs.python.org/zh-cn/3/_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="javascript:if(confirm('https://www.python.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.python.org/'" tppabs="https://www.python.org/">Python</a> &#187;</li>
    

    <li>
      <span class="language_switcher_placeholder">zh_CN</span>
      <span class="version_switcher_placeholder">3.8.2</span>
      <a href="index-11.html" tppabs="https://docs.python.org/zh-cn/3/index.html">æ–‡æ¡£</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index-2.html" tppabs="https://docs.python.org/zh-cn/3/library/index.html" >Python æ ‡å‡†åº“</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="text.html" tppabs="https://docs.python.org/zh-cn/3/library/text.html" >æ–‡æœ¬å¤„ç†æœåŠ¡</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="https://docs.python.org/zh-cn/3/search.html" method="get">
          <input placeholder="å¿«é€Ÿæœç´¢" type="text" name="q" />
          <input type="submit" value="è½¬å‘" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="copyright.html" tppabs="https://docs.python.org/zh-cn/3/copyright.html">ç‰ˆæƒæ‰€æœ‰</a> 2001-2020, Python Software Foundation.
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="javascript:if(confirm('https://www.python.org/psf/donations/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.python.org/psf/donations/'" tppabs="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    æœ€åæ›´æ–°äº 3æœˆ 26, 2020.
    <a href="javascript:if(confirm('https://docs.python.org/3/bugs.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/bugs.html'" tppabs="https://docs.python.org/3/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="javascript:if(confirm('https://www.sphinx-doc.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.sphinx-doc.org/'" tppabs="https://www.sphinx-doc.org/">Sphinx</a> 2.3.1.
    </div>

  </body>
</html>