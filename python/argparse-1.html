
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <title>Argparse æ•™ç¨‹ &#8212; Python 3.8.2 æ–‡æ¡£</title>
    <link rel="stylesheet" href="pydoctheme.css" tppabs="https://docs.python.org/zh-cn/3/_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="pygments.css" tppabs="https://docs.python.org/zh-cn/3/_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="documentation_options.js" tppabs="https://docs.python.org/zh-cn/3/_static/documentation_options.js"></script>
    <script type="text/javascript" src="jquery.js" tppabs="https://docs.python.org/zh-cn/3/_static/jquery.js"></script>
    <script type="text/javascript" src="underscore.js" tppabs="https://docs.python.org/zh-cn/3/_static/underscore.js"></script>
    <script type="text/javascript" src="doctools.js" tppabs="https://docs.python.org/zh-cn/3/_static/doctools.js"></script>
    <script type="text/javascript" src="language_data.js" tppabs="https://docs.python.org/zh-cn/3/_static/language_data.js"></script>
    <script type="text/javascript" src="translations.js" tppabs="https://docs.python.org/zh-cn/3/_static/translations.js"></script>
    
    <script type="text/javascript" src="sidebar.js" tppabs="https://docs.python.org/zh-cn/3/_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="åœ¨ Python 3.8.2 æ–‡æ¡£ ä¸­æœç´¢"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="å…³äºè¿™äº›æ–‡æ¡£" href="../about.html" />
    <link rel="index" title="ç´¢å¼•" href="../genindex.html" />
    <link rel="search" title="æœç´¢" href="../search.html" />
    <link rel="copyright" title="ç‰ˆæƒæ‰€æœ‰" href="../copyright.html" />
    <link rel="next" title="ipaddressæ¨¡å—ä»‹ç»" href="ipaddress.html" />
    <link rel="prev" title="HOWTO ä½¿ç”¨ urllib åŒ…è·å–ç½‘ç»œèµ„æº" href="urllib2.html" />
    <link rel="canonical" href="https://docs.python.org/3/howto/argparse.html" />
    
      
      <script type="text/javascript" src="switchers.js" tppabs="https://docs.python.org/zh-cn/3/_static/switchers.js"></script>
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>

    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    
    <script type="text/javascript" src="copybutton.js" tppabs="https://docs.python.org/zh-cn/3/_static/copybutton.js"></script>
    
     


  </head><body>
  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>å¯¼èˆª</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" tppabs="https://docs.python.org/zh-cn/3/genindex.html" title="æ€»ç›®å½•"
             accesskey="I">ç´¢å¼•</a></li>
        <li class="right" >
          <a href="py-modindex.html" tppabs="https://docs.python.org/zh-cn/3/py-modindex.html" title="Python æ¨¡å—ç´¢å¼•"
             >æ¨¡å—</a> |</li>
        <li class="right" >
          <a href="ipaddress-1.html" tppabs="https://docs.python.org/zh-cn/3/howto/ipaddress.html" title="ipaddressæ¨¡å—ä»‹ç»"
             accesskey="N">ä¸‹ä¸€é¡µ</a> |</li>
        <li class="right" >
          <a href="urllib2.html" tppabs="https://docs.python.org/zh-cn/3/howto/urllib2.html" title="HOWTO ä½¿ç”¨ urllib åŒ…è·å–ç½‘ç»œèµ„æº"
             accesskey="P">ä¸Šä¸€é¡µ</a> |</li>

    <li><img src="py.png" tppabs="https://docs.python.org/zh-cn/3/_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="javascript:if(confirm('https://www.python.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.python.org/'" tppabs="https://www.python.org/">Python</a> &#187;</li>
    

    <li>
      <span class="language_switcher_placeholder">zh_CN</span>
      <span class="version_switcher_placeholder">3.8.2</span>
      <a href="index-11.html" tppabs="https://docs.python.org/zh-cn/3/index.html">æ–‡æ¡£</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index-5.html" tppabs="https://docs.python.org/zh-cn/3/howto/index.html" accesskey="U">Python å¸¸ç”¨æŒ‡å¼•</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="https://docs.python.org/zh-cn/3/search.html" method="get">
          <input placeholder="å¿«é€Ÿæœç´¢" type="text" name="q" />
          <input type="submit" value="è½¬å‘" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="argparse-tutorial">
<h1>Argparse æ•™ç¨‹<a class="headerlink" href="#argparse-tutorial" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">ä½œè€…</dt>
<dd class="field-odd"><p>Tshepang Lekhonkhobe</p>
</dd>
</dl>
<p id="id1">è¿™ç¯‡æ•™ç¨‹æ—¨åœ¨ä½œä¸º <a class="reference internal" href="argparse.html#module-argparse" tppabs="https://docs.python.org/zh-cn/3/library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> çš„å…¥é—¨ä»‹ç»ï¼Œæ­¤æ¨¡å—æ˜¯ Python æ ‡å‡†åº“ä¸­æ¨èçš„å‘½ä»¤è¡Œè§£ææ¨¡å—ã€‚</p>
<div class="admonition note">
<p class="admonition-title">æ³¨è§£</p>
<p>è¿˜æœ‰å¦å¤–ä¸¤ä¸ªæ¨¡å—å¯ä»¥å®ŒæˆåŒæ ·çš„ä»»åŠ¡ï¼Œç§°ä¸º <a class="reference internal" href="getopt.html#module-getopt" tppabs="https://docs.python.org/zh-cn/3/library/getopt.html#module-getopt" title="getopt: Portable parser for command line options; support both short and long option names."><code class="xref py py-mod docutils literal notranslate"><span class="pre">getopt</span></code></a> (å¯¹åº”äº C è¯­è¨€ä¸­çš„ <code class="xref c c-func docutils literal notranslate"><span class="pre">getopt()</span></code> å‡½æ•°) å’Œè¢«å¼ƒç”¨çš„ <a class="reference internal" href="optparse.html#module-optparse" tppabs="https://docs.python.org/zh-cn/3/library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (å·²ç§»é™¤)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">optparse</span></code></a>ã€‚è¿˜è¦æ³¨æ„ <a class="reference internal" href="argparse.html#module-argparse" tppabs="https://docs.python.org/zh-cn/3/library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> æ˜¯åŸºäº <a class="reference internal" href="optparse.html#module-optparse" tppabs="https://docs.python.org/zh-cn/3/library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (å·²ç§»é™¤)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">optparse</span></code></a> çš„ï¼Œå› æ­¤ç”¨æ³•ä¸å…¶éå¸¸ç›¸ä¼¼ã€‚</p>
</div>
<div class="section" id="concepts">
<h2>æ¦‚å¿µ<a class="headerlink" href="#concepts" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>è®©æˆ‘ä»¬åˆ©ç”¨ <strong class="command">ls</strong> å‘½ä»¤æ¥å±•ç¤ºæˆ‘ä»¬å°†è¦åœ¨è¿™ç¯‡å…¥é—¨æ•™ç¨‹ä¸­æ¢ç´¢çš„åŠŸèƒ½ï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ls
<span class="go">cpython  devguide  prog.py  pypy  rm-unused-function.patch</span>
<span class="gp">$</span> ls pypy
<span class="go">ctypes_configure  demo  dotviewer  include  lib_pypy  lib-python ...</span>
<span class="gp">$</span> ls -l
<span class="go">total 20</span>
<span class="go">drwxr-xr-x 19 wena wena 4096 Feb 18 18:51 cpython</span>
<span class="go">drwxr-xr-x  4 wena wena 4096 Feb  8 12:04 devguide</span>
<span class="go">-rwxr-xr-x  1 wena wena  535 Feb 19 00:05 prog.py</span>
<span class="go">drwxr-xr-x 14 wena wena 4096 Feb  7 00:59 pypy</span>
<span class="go">-rw-r--r--  1 wena wena  741 Feb 18 01:01 rm-unused-function.patch</span>
<span class="gp">$</span> ls --help
<span class="go">Usage: ls [OPTION]... [FILE]...</span>
<span class="go">List information about the FILEs (the current directory by default).</span>
<span class="go">Sort entries alphabetically if none of -cftuvSUX nor --sort is specified.</span>
<span class="go">...</span>
</pre></div>
</div>
<p>æˆ‘ä»¬å¯ä»¥ä»è¿™å››ä¸ªå‘½ä»¤ä¸­å­¦åˆ°å‡ ä¸ªæ¦‚å¿µï¼š</p>
<ul class="simple">
<li><p><strong class="command">ls</strong> æ˜¯ä¸€ä¸ªå³ä½¿åœ¨è¿è¡Œçš„æ—¶å€™æ²¡æœ‰æä¾›ä»»ä½•é€‰é¡¹ï¼Œä¹Ÿéå¸¸æœ‰ç”¨çš„å‘½ä»¤ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ä»–ä¼šè¾“å‡ºå½“å‰æ–‡ä»¶å¤¹åŒ…å«çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚</p></li>
<li><p>å¦‚æœæˆ‘ä»¬æƒ³è¦ä½¿ç”¨æ¯”å®ƒé»˜è®¤æä¾›çš„æ›´å¤šåŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰è¯¥å‘½ä»¤æ›´å¤šä¿¡æ¯ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬æƒ³è¦æŸ¥çœ‹ä¸€ä¸ªä¸åŒçš„ç›®å½•ï¼Œ<code class="docutils literal notranslate"><span class="pre">pypy</span></code>ã€‚æˆ‘ä»¬æ‰€åšçš„æ˜¯æŒ‡å®šæ‰€è°“çš„ä½ç½®å‚æ•°ã€‚ä¹‹æ‰€ä»¥è¿™æ ·å‘½åï¼Œæ˜¯å› ä¸ºç¨‹åºåº”è¯¥å¦‚ä½•å¤„ç†è¯¥å‚æ•°å€¼ï¼Œå®Œå…¨å–å†³äºå®ƒåœ¨å‘½ä»¤è¡Œå‡ºç°çš„ä½ç½®ã€‚æ›´èƒ½ä½“ç°è¿™ä¸ªæ¦‚å¿µçš„å‘½ä»¤å¦‚ <strong class="command">cp</strong>ï¼Œå®ƒæœ€åŸºæœ¬çš„ç”¨æ³•æ˜¯ <code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">SRC</span> <span class="pre">DEST</span></code>ã€‚ç¬¬ä¸€ä¸ªä½ç½®å‚æ•°æŒ‡çš„æ˜¯*ä½ æƒ³è¦å¤åˆ¶çš„*ï¼Œç¬¬äºŒä¸ªä½ç½®å‚æ•°æŒ‡çš„æ˜¯*ä½ æƒ³è¦å¤åˆ¶åˆ°çš„ä½ç½®*ã€‚</p></li>
<li><p>ç°åœ¨å‡è®¾æˆ‘ä»¬æƒ³è¦æ”¹å˜è¿™ä¸ªç¨‹åºçš„è¡Œä¸ºã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…ä»…åªæ˜¯è¾“å‡ºæ¯ä¸ªæ–‡ä»¶çš„æ–‡ä»¶åï¼Œè¿˜è¾“å‡ºäº†æ›´å¤šä¿¡æ¯ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code class="docutils literal notranslate"><span class="pre">-l</span></code> è¢«ç§°ä¸ºå¯é€‰å‚æ•°ã€‚</p></li>
<li><p>è¿™æ˜¯ä¸€æ®µå¸®åŠ©æ–‡æ¡£çš„æ–‡å­—ã€‚å®ƒæ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå› ä¸ºå½“ä½ é‡åˆ°ä¸€ä¸ªä½ ä»æœªä½¿ç”¨è¿‡çš„ç¨‹åºæ—¶ï¼Œä½ å¯ä»¥é€šè¿‡é˜…è¯»å®ƒçš„å¸®åŠ©æ–‡æ¡£æ¥å¼„æ¸…æ¥šå®ƒæ˜¯å¦‚ä½•è¿è¡Œçš„ã€‚</p></li>
</ul>
</div>
<div class="section" id="the-basics">
<h2>åŸºç¡€<a class="headerlink" href="#the-basics" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•åˆ°ï¼ˆå‡ ä¹ï¼‰ä»€ä¹ˆä¹Ÿåšä¸äº†çš„ä¾‹å­å¼€å§‹ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
</pre></div>
</div>
<p>ä»¥ä¸‹æ˜¯è¯¥ä»£ç çš„è¿è¡Œç»“æœï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py
<span class="gp">$</span> python3 prog.py --help
<span class="go">usage: prog.py [-h]</span>

<span class="go">optional arguments:</span>
<span class="go">  -h, --help  show this help message and exit</span>
<span class="gp">$</span> python3 prog.py --verbose
<span class="go">usage: prog.py [-h]</span>
<span class="go">prog.py: error: unrecognized arguments: --verbose</span>
<span class="gp">$</span> python3 prog.py foo
<span class="go">usage: prog.py [-h]</span>
<span class="go">prog.py: error: unrecognized arguments: foo</span>
</pre></div>
</div>
<p>ç¨‹åºè¿è¡Œæƒ…å†µå¦‚ä¸‹ï¼š</p>
<ul class="simple">
<li><p>åœ¨æ²¡æœ‰ä»»ä½•é€‰é¡¹çš„æƒ…å†µä¸‹è¿è¡Œè„šæœ¬ä¸ä¼šåœ¨æ ‡å‡†è¾“å‡ºæ˜¾ç¤ºä»»ä½•å†…å®¹ã€‚è¿™æ²¡æœ‰ä»€ä¹ˆç”¨å¤„ã€‚</p></li>
<li><p>ç¬¬äºŒè¡Œä»£ç å¼€å§‹å±•ç°å‡º <a class="reference internal" href="argparse.html#module-argparse" tppabs="https://docs.python.org/zh-cn/3/library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> æ¨¡å—çš„ä½œç”¨ã€‚æˆ‘ä»¬å‡ ä¹ä»€ä¹ˆä¹Ÿæ²¡æœ‰åšï¼Œä½†å·²ç»å¾—åˆ°ä¸€æ¡å¾ˆå¥½çš„å¸®åŠ©ä¿¡æ¯ã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--help</span></code> é€‰é¡¹ï¼Œä¹Ÿå¯ç¼©å†™ä¸º <code class="docutils literal notranslate"><span class="pre">-h</span></code>ï¼Œæ˜¯å”¯ä¸€ä¸€ä¸ªå¯ä»¥ç›´æ¥ä½¿ç”¨çš„é€‰é¡¹ï¼ˆå³ä¸éœ€è¦æŒ‡å®šè¯¥é€‰é¡¹çš„å†…å®¹ï¼‰ã€‚æŒ‡å®šä»»ä½•å†…å®¹éƒ½ä¼šå¯¼è‡´é”™è¯¯ã€‚å³ä¾¿å¦‚æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½ç›´æ¥å¾—åˆ°ä¸€æ¡æœ‰ç”¨çš„ç”¨æ³•ä¿¡æ¯ã€‚</p></li>
</ul>
</div>
<div class="section" id="introducing-positional-arguments">
<h2>ä½ç½®å‚æ•°ä»‹ç»<a class="headerlink" href="#introducing-positional-arguments" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;echo&quot;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">echo</span><span class="p">)</span>
</pre></div>
</div>
<p>è¿è¡Œæ­¤ç¨‹åºï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py
<span class="go">usage: prog.py [-h] echo</span>
<span class="go">prog.py: error: the following arguments are required: echo</span>
<span class="gp">$</span> python3 prog.py --help
<span class="go">usage: prog.py [-h] echo</span>

<span class="go">positional arguments:</span>
<span class="go">  echo</span>

<span class="go">optional arguments:</span>
<span class="go">  -h, --help  show this help message and exit</span>
<span class="gp">$</span> python3 prog.py foo
<span class="go">foo</span>
</pre></div>
</div>
<p>ç¨‹åºè¿è¡Œæƒ…å†µå¦‚ä¸‹ï¼š</p>
<ul class="simple">
<li><p>æˆ‘ä»¬å¢åŠ äº† <code class="xref py py-meth docutils literal notranslate"><span class="pre">add_argument()</span></code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨äºæŒ‡å®šç¨‹åºèƒ½å¤Ÿæ¥å—å“ªäº›å‘½ä»¤è¡Œé€‰é¡¹ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘å°†é€‰é¡¹å‘½åä¸º <code class="docutils literal notranslate"><span class="pre">echo</span></code>ï¼Œä¸å…¶åŠŸèƒ½ä¸€è‡´ã€‚</p></li>
<li><p>ç°åœ¨è°ƒç”¨æˆ‘ä»¬çš„ç¨‹åºå¿…é¡»è¦æŒ‡å®šä¸€ä¸ªé€‰é¡¹ã€‚</p></li>
<li><p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">parse_args()</span></code> method actually returns some data from the
options specified, in this case, <code class="docutils literal notranslate"><span class="pre">echo</span></code>.</p></li>
<li><p>è¿™ä¸€å˜é‡æ˜¯ <a class="reference internal" href="argparse.html#module-argparse" tppabs="https://docs.python.org/zh-cn/3/library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> å…è´¹æ–½æ”¾çš„æŸç§ â€œé­”æ³•â€ï¼ˆå³æ˜¯è¯´ï¼Œä¸éœ€è¦æŒ‡å®šå“ªä¸ªå˜é‡æ˜¯å­˜å‚¨å“ªä¸ªå€¼çš„ï¼‰ã€‚ä½ ä¹Ÿå¯ä»¥æ³¨æ„åˆ°ï¼Œè¿™ä¸€åç§°ä¸ä¼ é€’ç»™æ–¹æ³•çš„å­—ç¬¦ä¸²å‚æ•°ä¸€è‡´ï¼Œéƒ½æ˜¯  <code class="docutils literal notranslate"><span class="pre">echo</span></code>ã€‚</p></li>
</ul>
<p>ç„¶è€Œè¯·æ³¨æ„ï¼Œå°½ç®¡æ˜¾ç¤ºçš„å¸®åŠ©çœ‹èµ·æ¥æ¸…æ¥šå®Œæ•´ï¼Œä½†å®ƒå¯ä»¥æ¯”ç°åœ¨æ›´æœ‰å¸®åŠ©ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥çŸ¥é“ <code class="docutils literal notranslate"><span class="pre">echo</span></code> æ˜¯ä¸€ä¸ªä½ç½®å‚æ•°ï¼Œä½†æˆ‘ä»¬é™¤äº†é çŒœæˆ–è€…çœ‹æºä»£ç ï¼Œæ²¡æ³•çŸ¥é“å®ƒæ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ”¹é€ å¾—æ›´æœ‰ç”¨ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;echo&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;echo the string you use here&quot;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">echo</span><span class="p">)</span>
</pre></div>
</div>
<p>ç„¶åæˆ‘ä»¬å¾—åˆ°ï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py -h
<span class="go">usage: prog.py [-h] echo</span>

<span class="go">positional arguments:</span>
<span class="go">  echo        echo the string you use here</span>

<span class="go">optional arguments:</span>
<span class="go">  -h, --help  show this help message and exit</span>
</pre></div>
</div>
<p>ç°åœ¨ï¼Œæ¥åšä¸€äº›æ›´æœ‰ç”¨çš„äº‹æƒ…ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;display a square of a given number&quot;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>ä»¥ä¸‹æ˜¯è¯¥ä»£ç çš„è¿è¡Œç»“æœï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py <span class="m">4</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">  File &quot;prog.py&quot;, line 5, in &lt;module&gt;</span>
<span class="go">    print(args.square**2)</span>
<span class="go">TypeError: unsupported operand type(s) for ** or pow(): &#39;str&#39; and &#39;int&#39;</span>
</pre></div>
</div>
<p>è¿›å±•ä¸å¤ªé¡ºåˆ©ã€‚é‚£æ˜¯å› ä¸º <a class="reference internal" href="argparse.html#module-argparse" tppabs="https://docs.python.org/zh-cn/3/library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> ä¼šæŠŠæˆ‘ä»¬ä¼ é€’ç»™å®ƒçš„é€‰é¡¹è§†ä½œä¸ºå­—ç¬¦ä¸²ï¼Œé™¤éæˆ‘ä»¬å‘Šè¯‰å®ƒåˆ«è¿™æ ·ã€‚æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬æ¥å‘Šè¯‰ <a class="reference internal" href="argparse.html#module-argparse" tppabs="https://docs.python.org/zh-cn/3/library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> æ¥æŠŠè¿™ä¸€è¾“å…¥è§†ä¸ºæ•´æ•°ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;display a square of a given number&quot;</span><span class="p">,</span>
                    <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>ä»¥ä¸‹æ˜¯è¯¥ä»£ç çš„è¿è¡Œç»“æœï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py <span class="m">4</span>
<span class="go">16</span>
<span class="gp">$</span> python3 prog.py four
<span class="go">usage: prog.py [-h] square</span>
<span class="go">prog.py: error: argument square: invalid int value: &#39;four&#39;</span>
</pre></div>
</div>
<p>åšå¾—ä¸é”™ã€‚å½“è¿™ä¸ªç¨‹åºåœ¨æ”¶åˆ°é”™è¯¯çš„æ— æ•ˆçš„è¾“å…¥æ—¶ï¼Œå®ƒç”šè‡³èƒ½åœ¨æ‰§è¡Œè®¡ç®—ä¹‹å‰å…ˆé€€å‡ºï¼Œè¿˜èƒ½æ˜¾ç¤ºå¾ˆæœ‰å¸®åŠ©çš„é”™è¯¯ä¿¡æ¯ã€‚</p>
</div>
<div class="section" id="introducing-optional-arguments">
<h2>å¯é€‰å‚æ•°ä»‹ç»<a class="headerlink" href="#introducing-optional-arguments" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨ç ”ç©¶ä½ç½®å‚æ•°ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•æ·»åŠ å¯é€‰çš„ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--verbosity&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;increase output verbosity&quot;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbosity</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;verbosity turned on&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>å’Œè¾“å‡ºï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py --verbosity <span class="m">1</span>
<span class="go">verbosity turned on</span>
<span class="gp">$</span> python3 prog.py
<span class="gp">$</span> python3 prog.py --help
<span class="go">usage: prog.py [-h] [--verbosity VERBOSITY]</span>

<span class="go">optional arguments:</span>
<span class="go">  -h, --help            show this help message and exit</span>
<span class="go">  --verbosity VERBOSITY</span>
<span class="go">                        increase output verbosity</span>
<span class="gp">$</span> python3 prog.py --verbosity
<span class="go">usage: prog.py [-h] [--verbosity VERBOSITY]</span>
<span class="go">prog.py: error: argument --verbosity: expected one argument</span>
</pre></div>
</div>
<p>ç¨‹åºè¿è¡Œæƒ…å†µå¦‚ä¸‹ï¼š</p>
<ul class="simple">
<li><p>è¿™ä¸€ç¨‹åºè¢«è®¾è®¡ä¸ºå½“æŒ‡å®š <code class="docutils literal notranslate"><span class="pre">--verbosity</span></code> é€‰é¡¹æ—¶æ˜¾ç¤ºæŸäº›ä¸œè¥¿ï¼Œå¦åˆ™ä¸æ˜¾ç¤ºã€‚</p></li>
<li><p>ä¸æ·»åŠ è¿™ä¸€é€‰é¡¹æ—¶ç¨‹åºæ²¡æœ‰æç¤ºä»»ä½•é”™è¯¯è€Œé€€å‡ºï¼Œè¡¨æ˜è¿™ä¸€é€‰é¡¹ç¡®å®æ˜¯å¯é€‰çš„ã€‚æ³¨æ„ï¼Œå¦‚æœä¸€ä¸ªå¯é€‰å‚æ•°æ²¡æœ‰è¢«ä½¿ç”¨æ—¶ï¼Œç›¸å…³å˜é‡è¢«èµ‹å€¼ä¸º <code class="docutils literal notranslate"><span class="pre">None</span></code>ï¼Œåœ¨æ­¤ä¾‹ä¸­æ˜¯ <code class="xref py py-attr docutils literal notranslate"><span class="pre">args.verbosity</span></code>ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå®ƒåœ¨ <a class="reference internal" href="compound_stmts.html#if" tppabs="https://docs.python.org/zh-cn/3/reference/compound_stmts.html#if"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">if</span></code></a> è¯­å¥ä¸­è¢«å½“ä½œé€»è¾‘å‡ã€‚</p></li>
<li><p>å¸®åŠ©ä¿¡æ¯æœ‰ç‚¹ä¸åŒã€‚</p></li>
<li><p>ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">--verbosity</span></code> é€‰é¡¹æ—¶ï¼Œå¿…é¡»æŒ‡å®šä¸€ä¸ªå€¼ï¼Œä½†å¯ä»¥æ˜¯ä»»ä½•å€¼ã€‚</p></li>
</ul>
<p>ä¸Šè¿°ä¾‹å­æ¥å—ä»»ä½•æ•´æ•°å€¼ä½œä¸º <code class="docutils literal notranslate"><span class="pre">--verbosity</span></code> çš„å‚æ•°ï¼Œä½†å¯¹äºæˆ‘ä»¬çš„ç®€å•ç¨‹åºè€Œè¨€ï¼Œåªæœ‰ä¸¤ä¸ªå€¼æœ‰å®é™…æ„ä¹‰ï¼š<code class="docutils literal notranslate"><span class="pre">True</span></code> æˆ–è€… <code class="docutils literal notranslate"><span class="pre">False</span></code>ã€‚è®©æˆ‘ä»¬æ®æ­¤ä¿®æ”¹ä»£ç ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--verbose&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;increase output verbosity&quot;</span><span class="p">,</span>
                    <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;verbosity turned on&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>å’Œè¾“å‡ºï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py --verbose
<span class="go">verbosity turned on</span>
<span class="gp">$</span> python3 prog.py --verbose <span class="m">1</span>
<span class="go">usage: prog.py [-h] [--verbose]</span>
<span class="go">prog.py: error: unrecognized arguments: 1</span>
<span class="gp">$</span> python3 prog.py --help
<span class="go">usage: prog.py [-h] [--verbose]</span>

<span class="go">optional arguments:</span>
<span class="go">  -h, --help  show this help message and exit</span>
<span class="go">  --verbose   increase output verbosity</span>
</pre></div>
</div>
<p>ç¨‹åºè¿è¡Œæƒ…å†µå¦‚ä¸‹ï¼š</p>
<ul class="simple">
<li><p>ç°åœ¨ï¼Œè¿™ä¸€é€‰é¡¹æ›´å¤šåœ°æ˜¯ä¸€ä¸ªæ ‡å¿—ï¼Œè€Œééœ€è¦æ¥å—ä¸€ä¸ªå€¼çš„ä»€ä¹ˆä¸œè¥¿ã€‚æˆ‘ä»¬ç”šè‡³æ”¹å˜äº†é€‰é¡¹çš„åå­—æ¥ç¬¦åˆè¿™ä¸€æ€è·¯ã€‚æ³¨æ„æˆ‘ä»¬ç°åœ¨æŒ‡å®šäº†ä¸€ä¸ªæ–°çš„å…³é”®è¯ <code class="docutils literal notranslate"><span class="pre">action</span></code>ï¼Œå¹¶èµ‹å€¼ä¸º <code class="docutils literal notranslate"><span class="pre">&quot;store_true&quot;</span></code>ã€‚è¿™æ„å‘³ç€ï¼Œå½“è¿™ä¸€é€‰é¡¹å­˜åœ¨æ—¶ï¼Œä¸º <code class="xref py py-data docutils literal notranslate"><span class="pre">args.verbose</span></code> èµ‹å€¼ä¸º <code class="docutils literal notranslate"><span class="pre">True</span></code>ã€‚æ²¡æœ‰æŒ‡å®šæ—¶åˆ™éšå«åœ°èµ‹å€¼ä¸º <code class="docutils literal notranslate"><span class="pre">False</span></code>ã€‚</p></li>
<li><p>å½“ä½ ä¸ºå…¶æŒ‡å®šä¸€ä¸ªå€¼æ—¶ï¼Œå®ƒä¼šæŠ¥é”™ï¼Œç¬¦åˆä½œä¸ºæ ‡å¿—çš„çœŸæ­£çš„ç²¾ç¥ã€‚</p></li>
<li><p>ç•™æ„ä¸åŒçš„å¸®åŠ©æ–‡å­—ã€‚</p></li>
</ul>
<div class="section" id="short-options">
<h3>çŸ­é€‰é¡¹<a class="headerlink" href="#short-options" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>å¦‚æœä½ ç†Ÿæ‚‰å‘½ä»¤è¡Œçš„ç”¨æ³•ï¼Œä½ ä¼šå‘ç°æˆ‘è¿˜æ²¡è®²åˆ°è¿™ä¸€é€‰é¡¹çš„çŸ­ç‰ˆæœ¬ã€‚è¿™ä¹Ÿå¾ˆç®€å•ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-v&quot;</span><span class="p">,</span> <span class="s2">&quot;--verbose&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;increase output verbosity&quot;</span><span class="p">,</span>
                    <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;verbosity turned on&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>æ•ˆæœå°±åƒè¿™æ ·ï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py -v
<span class="go">verbosity turned on</span>
<span class="gp">$</span> python3 prog.py --help
<span class="go">usage: prog.py [-h] [-v]</span>

<span class="go">optional arguments:</span>
<span class="go">  -h, --help     show this help message and exit</span>
<span class="go">  -v, --verbose  increase output verbosity</span>
</pre></div>
</div>
<p>å¯ä»¥æ³¨æ„åˆ°ï¼Œè¿™ä¸€æ–°çš„èƒ½åŠ›ä¹Ÿåæ˜ åœ¨å¸®åŠ©æ–‡æœ¬é‡Œã€‚</p>
</div>
</div>
<div class="section" id="combining-positional-and-optional-arguments">
<h2>ç»“åˆä½ç½®å‚æ•°å’Œå¯é€‰å‚æ•°<a class="headerlink" href="#combining-positional-and-optional-arguments" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>æˆ‘ä»¬çš„ç¨‹åºå˜å¾—è¶Šæ¥è¶Šå¤æ‚äº†ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;display a square of a given number&quot;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-v&quot;</span><span class="p">,</span> <span class="s2">&quot;--verbose&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;increase output verbosity&quot;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="o">**</span><span class="mi">2</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;the square of </span><span class="si">{}</span><span class="s2"> equals </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
</pre></div>
</div>
<p>æ¥ç€æ˜¯è¾“å‡ºï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py
<span class="go">usage: prog.py [-h] [-v] square</span>
<span class="go">prog.py: error: the following arguments are required: square</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span>
<span class="go">16</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> --verbose
<span class="go">the square of 4 equals 16</span>
<span class="gp">$</span> python3 prog.py --verbose <span class="m">4</span>
<span class="go">the square of 4 equals 16</span>
</pre></div>
</div>
<ul class="simple">
<li><p>æˆ‘ä»¬å¸¦å›äº†ä¸€ä¸ªä½ç½®å‚æ•°ï¼Œç»“æœå‘ç”Ÿäº†æŠ¥é”™ã€‚</p></li>
<li><p>æ³¨æ„é¡ºåºæ— å…³ç´§è¦ã€‚</p></li>
</ul>
<p>ç»™æˆ‘ä»¬çš„ç¨‹åºåŠ ä¸Šæ¥å—å¤šä¸ªå†—é•¿åº¦çš„å€¼ï¼Œç„¶åå®é™…æ¥ç”¨ç”¨ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;display a square of a given number&quot;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-v&quot;</span><span class="p">,</span> <span class="s2">&quot;--verbosity&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;increase output verbosity&quot;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="o">**</span><span class="mi">2</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbosity</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;the square of </span><span class="si">{}</span><span class="s2"> equals </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">verbosity</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">^2 == </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
</pre></div>
</div>
<p>å’Œè¾“å‡ºï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py <span class="m">4</span>
<span class="go">16</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> -v
<span class="go">usage: prog.py [-h] [-v VERBOSITY] square</span>
<span class="go">prog.py: error: argument -v/--verbosity: expected one argument</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> -v <span class="m">1</span>
<span class="go">4^2 == 16</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> -v <span class="m">2</span>
<span class="go">the square of 4 equals 16</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> -v <span class="m">3</span>
<span class="go">16</span>
</pre></div>
</div>
<p>é™¤äº†æœ€åä¸€ä¸ªï¼Œçœ‹ä¸Šå»éƒ½ä¸é”™ã€‚æœ€åä¸€ä¸ªæš´éœ²äº†æˆ‘ä»¬çš„ç¨‹åºä¸­æœ‰ä¸€ä¸ª bugã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡é™åˆ¶ <code class="docutils literal notranslate"><span class="pre">--verbosity</span></code> é€‰é¡¹å¯ä»¥æ¥å—çš„å€¼æ¥ä¿®å¤å®ƒï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;display a square of a given number&quot;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-v&quot;</span><span class="p">,</span> <span class="s2">&quot;--verbosity&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;increase output verbosity&quot;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="o">**</span><span class="mi">2</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbosity</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;the square of </span><span class="si">{}</span><span class="s2"> equals </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">verbosity</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">^2 == </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
</pre></div>
</div>
<p>å’Œè¾“å‡ºï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py <span class="m">4</span> -v <span class="m">3</span>
<span class="go">usage: prog.py [-h] [-v {0,1,2}] square</span>
<span class="go">prog.py: error: argument -v/--verbosity: invalid choice: 3 (choose from 0, 1, 2)</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> -h
<span class="go">usage: prog.py [-h] [-v {0,1,2}] square</span>

<span class="go">positional arguments:</span>
<span class="go">  square                display a square of a given number</span>

<span class="go">optional arguments:</span>
<span class="go">  -h, --help            show this help message and exit</span>
<span class="go">  -v {0,1,2}, --verbosity {0,1,2}</span>
<span class="go">                        increase output verbosity</span>
</pre></div>
</div>
<p>æ³¨æ„è¿™ä¸€æ”¹å˜åŒæ—¶ååº”åœ¨é”™è¯¯ä¿¡æ¯å’Œå¸®åŠ©ä¿¡æ¯é‡Œã€‚</p>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨å¦ä¸€ç§çš„æ–¹å¼æ¥æ”¹å˜å†—é•¿åº¦ã€‚è¿™ç§æ–¹å¼æ›´å¸¸è§ï¼Œä¹Ÿå’Œ CPython çš„å¯æ‰§è¡Œæ–‡ä»¶å¤„ç†å®ƒè‡ªå·±çš„å†—é•¿åº¦å‚æ•°çš„æ–¹å¼ä¸€è‡´ï¼ˆå‚è€ƒ <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">--help</span></code> çš„è¾“å‡ºï¼‰ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;display the square of a given number&quot;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-v&quot;</span><span class="p">,</span> <span class="s2">&quot;--verbosity&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;increase output verbosity&quot;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="o">**</span><span class="mi">2</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbosity</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;the square of </span><span class="si">{}</span><span class="s2"> equals </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">verbosity</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">^2 == </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
</pre></div>
</div>
<p>æˆ‘ä»¬å¼•å…¥äº†å¦ä¸€ç§åŠ¨ä½œ <code class="docutils literal notranslate"><span class="pre">count</span></code>ï¼Œæ¥æ•°æŸä¸€ä¸ªå¯é€‰å‚æ•°å‡ºç°äº†å‡ æ¬¡ï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py <span class="m">4</span>
<span class="go">16</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> -v
<span class="go">4^2 == 16</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> -vv
<span class="go">the square of 4 equals 16</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> --verbosity --verbosity
<span class="go">the square of 4 equals 16</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> -v <span class="m">1</span>
<span class="go">usage: prog.py [-h] [-v] square</span>
<span class="go">prog.py: error: unrecognized arguments: 1</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> -h
<span class="go">usage: prog.py [-h] [-v] square</span>

<span class="go">positional arguments:</span>
<span class="go">  square           display a square of a given number</span>

<span class="go">optional arguments:</span>
<span class="go">  -h, --help       show this help message and exit</span>
<span class="go">  -v, --verbosity  increase output verbosity</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> -vvv
<span class="go">16</span>
</pre></div>
</div>
<ul class="simple">
<li><p>æ˜¯çš„ï¼Œå®ƒç°åœ¨æ¯”å‰ä¸€ç‰ˆæœ¬æ›´åƒæ˜¯ä¸€ä¸ªæ ‡å¿—ï¼ˆå’Œ <code class="docutils literal notranslate"><span class="pre">action=&quot;store_true&quot;</span></code> ç›¸ä¼¼ï¼‰ã€‚è¿™èƒ½è§£é‡Šå®ƒä¸ºä»€ä¹ˆæŠ¥é”™ã€‚</p></li>
<li><p>å®ƒä¹Ÿè¡¨ç°å¾—ä¸ â€œstore_trueâ€ çš„è¡Œä¸ºç›¸ä¼¼ã€‚</p></li>
<li><p>è¿™ç»™å‡ºäº†ä¸€ä¸ªå…³äº <code class="docutils literal notranslate"><span class="pre">count</span></code> åŠ¨ä½œçš„æ•ˆæœçš„æ¼”ç¤ºã€‚ä½ ä¹‹å‰å¾ˆå¯èƒ½åº”è¯¥å·²ç»çœ‹è¿‡è¿™ç§ç”¨æ³•ã€‚</p></li>
<li><p>å¦‚æœä½ ä¸æ·»åŠ  <code class="docutils literal notranslate"><span class="pre">-v</span></code> æ ‡å¿—ï¼Œè¿™ä¸€æ ‡å¿—çš„å€¼ä¼šæ˜¯ <code class="docutils literal notranslate"><span class="pre">None</span></code>ã€‚</p></li>
<li><p>å¦‚æœŸæœ›çš„é‚£æ ·ï¼Œæ·»åŠ è¯¥æ ‡å¿—çš„é•¿å½¢æ€èƒ½å¤Ÿè·å¾—ç›¸åŒçš„è¾“å‡ºã€‚</p></li>
<li><p>å¯æƒœçš„æ˜¯ï¼Œå¯¹äºæˆ‘ä»¬çš„è„šæœ¬è·å¾—çš„æ–°èƒ½åŠ›ï¼Œæˆ‘ä»¬çš„å¸®åŠ©è¾“å‡ºå¹¶æ²¡æœ‰æä¾›å¾ˆå¤šä¿¡æ¯ï¼Œä½†æˆ‘ä»¬æ€»æ˜¯å¯ä»¥é€šè¿‡æ”¹å–„æ–‡æ¡£æ¥ä¿®å¤è¿™ä¸€é—®é¢˜ï¼ˆæ¯”å¦‚é€šè¿‡ <code class="docutils literal notranslate"><span class="pre">help</span></code> å…³é”®å­—å‚æ•°ï¼‰ã€‚</p></li>
<li><p>æœ€åä¸€ä¸ªè¾“å‡ºæš´éœ²äº†æˆ‘ä»¬ç¨‹åºä¸­çš„ä¸€ä¸ª bugã€‚</p></li>
</ul>
<p>è®©æˆ‘ä»¬ä¿®å¤ä¸€ä¸‹ï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;display a square of a given number&quot;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-v&quot;</span><span class="p">,</span> <span class="s2">&quot;--verbosity&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;increase output verbosity&quot;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="o">**</span><span class="mi">2</span>

<span class="c1"># bugfix: replace == with &gt;=</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbosity</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;the square of </span><span class="si">{}</span><span class="s2"> equals </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">verbosity</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">^2 == </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
</pre></div>
</div>
<p>è¿™æ˜¯å®ƒç»™æˆ‘ä»¬çš„è¾“å‡ºï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py <span class="m">4</span> -vvv
<span class="go">the square of 4 equals 16</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> -vvvv
<span class="go">the square of 4 equals 16</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">  File &quot;prog.py&quot;, line 11, in &lt;module&gt;</span>
<span class="go">    if args.verbosity &gt;= 2:</span>
<span class="go">TypeError: &#39;&gt;=&#39; not supported between instances of &#39;NoneType&#39; and &#39;int&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>ç¬¬ä¸€ç»„è¾“å‡ºå¾ˆå¥½ï¼Œä¿®å¤äº†ä¹‹å‰çš„ bugã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›ä»»ä½• &gt;= 2 çš„å€¼å°½å¯èƒ½è¯¦å°½ã€‚</p></li>
<li><p>ç¬¬ä¸‰ç»„è¾“å‡ºå¹¶ä¸ç†æƒ³ã€‚</p></li>
</ul>
<p>è®©æˆ‘ä»¬ä¿®å¤é‚£ä¸ª bugï¼š</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;square&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;display a square of a given number&quot;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-v&quot;</span><span class="p">,</span> <span class="s2">&quot;--verbosity&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">&quot;increase output verbosity&quot;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="o">**</span><span class="mi">2</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbosity</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;the square of </span><span class="si">{}</span><span class="s2"> equals </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">verbosity</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">^2 == </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
</pre></div>
</div>
<p>æˆ‘ä»¬åˆšåˆšå¼•å…¥äº†åˆä¸€ä¸ªæ–°çš„å…³é”®å­— <code class="docutils literal notranslate"><span class="pre">default</span></code>ã€‚æˆ‘ä»¬æŠŠå®ƒè®¾ç½®ä¸º <code class="docutils literal notranslate"><span class="pre">0</span></code> æ¥è®©å®ƒå¯ä»¥ä¸å…¶ä»–æ•´æ•°å€¼ç›¸äº’æ¯”è¾ƒã€‚è®°ä½ï¼Œé»˜è®¤æƒ…å†µä¸‹å¦‚æœä¸€ä¸ªå¯é€‰å‚æ•°æ²¡æœ‰è¢«æŒ‡å®šï¼Œå®ƒçš„å€¼ä¼šæ˜¯ <code class="docutils literal notranslate"><span class="pre">None</span></code>ï¼Œå¹¶ä¸”å®ƒä¸èƒ½å’Œæ•´æ•°å€¼ç›¸æ¯”è¾ƒï¼ˆæ‰€ä»¥äº§ç”Ÿäº† <a class="reference internal" href="exceptions.html#TypeError" tppabs="https://docs.python.org/zh-cn/3/library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> å¼‚å¸¸ï¼‰ã€‚</p>
<p>ç„¶åï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py <span class="m">4</span>
<span class="go">16</span>
</pre></div>
</div>
<p>å‡­å€Ÿæˆ‘ä»¬ç›®å‰å·²å­¦çš„ä¸œè¥¿ä½ å°±å¯ä»¥åšåˆ°è®¸å¤šäº‹æƒ…ï¼Œè€Œæˆ‘ä»¬è¿˜ä»…ä»…å­¦äº†ä¸€äº›çš®æ¯›è€Œå·²ã€‚ <a class="reference internal" href="argparse.html#module-argparse" tppabs="https://docs.python.org/zh-cn/3/library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> æ¨¡å—æ˜¯éå¸¸å¼ºå¤§çš„ï¼Œåœ¨ç»“æŸç¯‡æ•™ç¨‹ä¹‹å‰æˆ‘ä»¬å°†å†æ¢ç´¢æ›´å¤šä¸€äº›å†…å®¹ã€‚</p>
</div>
<div class="section" id="getting-a-little-more-advanced">
<h2>è¿›è¡Œä¸€äº›å°å°çš„æ”¹è¿›<a class="headerlink" href="#getting-a-little-more-advanced" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>å¦‚æœæˆ‘ä»¬æƒ³æ‰©å±•æˆ‘ä»¬çš„ç®€çŸ­ç¨‹åºæ¥æ‰§è¡Œå…¶ä»–å¹‚æ¬¡çš„è¿ç®—ï¼Œè€Œä¸ä»…æ˜¯ä¹˜æ–¹:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;the base&quot;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;the exponent&quot;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-v&quot;</span><span class="p">,</span> <span class="s2">&quot;--verbosity&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="o">**</span><span class="n">args</span><span class="o">.</span><span class="n">y</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbosity</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> to the power </span><span class="si">{}</span><span class="s2"> equals </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">verbosity</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">^</span><span class="si">{}</span><span class="s2"> == </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
</pre></div>
</div>
<p>è¾“å‡ºï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py
<span class="go">usage: prog.py [-h] [-v] x y</span>
<span class="go">prog.py: error: the following arguments are required: x, y</span>
<span class="gp">$</span> python3 prog.py -h
<span class="go">usage: prog.py [-h] [-v] x y</span>

<span class="go">positional arguments:</span>
<span class="go">  x                the base</span>
<span class="go">  y                the exponent</span>

<span class="go">optional arguments:</span>
<span class="go">  -h, --help       show this help message and exit</span>
<span class="go">  -v, --verbosity</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> <span class="m">2</span> -v
<span class="go">4^2 == 16</span>
</pre></div>
</div>
<p>è¯·æ³¨æ„åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬ä¸€ç›´åœ¨ä½¿ç”¨è¯¦ç»†çº§åˆ«æ¥ <em>æ›´æ”¹</em> æ‰€æ˜¾ç¤ºçš„æ–‡æœ¬ã€‚ ä»¥ä¸‹ç¤ºä¾‹åˆ™ä½¿ç”¨è¯¦ç»†çº§åˆ«æ¥æ˜¾ç¤º <em>æ›´å¤šçš„</em> æ–‡æœ¬:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;the base&quot;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;the exponent&quot;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-v&quot;</span><span class="p">,</span> <span class="s2">&quot;--verbosity&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="o">**</span><span class="n">args</span><span class="o">.</span><span class="n">y</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbosity</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbosity</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">^</span><span class="si">{}</span><span class="s2"> == &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">y</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
</pre></div>
</div>
<p>è¾“å‡ºï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py <span class="m">4</span> <span class="m">2</span>
<span class="go">16</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> <span class="m">2</span> -v
<span class="go">4^2 == 16</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> <span class="m">2</span> -vv
<span class="go">Running &#39;prog.py&#39;</span>
<span class="go">4^2 == 16</span>
</pre></div>
</div>
<div class="section" id="conflicting-options">
<h3>çŸ›ç›¾çš„é€‰é¡¹<a class="headerlink" href="#conflicting-options" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h3>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨ä½¿ç”¨ <a class="reference internal" href="argparse.html#argparse.ArgumentParser" tppabs="https://docs.python.org/zh-cn/3/library/argparse.html#argparse.ArgumentParser" title="argparse.ArgumentParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.ArgumentParser</span></code></a> å®ä¾‹çš„ä¸¤ä¸ªæ–¹æ³•ã€‚ è®©æˆ‘ä»¬å†ä»‹ç»ç¬¬ä¸‰ä¸ªæ–¹æ³• <code class="xref py py-meth docutils literal notranslate"><span class="pre">add_mutually_exclusive_group()</span></code>ã€‚ å®ƒå…è®¸æˆ‘ä»¬æŒ‡å®šå½¼æ­¤ç›¸äº’å†²çªçš„é€‰é¡¹ã€‚ è®©æˆ‘ä»¬å†æ›´æ”¹ç¨‹åºçš„å…¶ä½™éƒ¨åˆ†ä»¥ä¾¿ä½¿ç”¨æ–°åŠŸèƒ½æ›´æœ‰æ„ä¹‰ï¼šæˆ‘ä»¬å°†å¼•å…¥ <code class="docutils literal notranslate"><span class="pre">--quiet</span></code> é€‰é¡¹ï¼Œå®ƒå°†ä¸ <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> æ­£å¥½ç›¸å:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
<span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-v&quot;</span><span class="p">,</span> <span class="s2">&quot;--verbose&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">)</span>
<span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-q&quot;</span><span class="p">,</span> <span class="s2">&quot;--quiet&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;the base&quot;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;the exponent&quot;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="o">**</span><span class="n">args</span><span class="o">.</span><span class="n">y</span>

<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> to the power </span><span class="si">{}</span><span class="s2"> equals </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">^</span><span class="si">{}</span><span class="s2"> == </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
</pre></div>
</div>
<p>æˆ‘ä»¬çš„ç¨‹åºç°åœ¨å˜å¾—æ›´ç®€æ´äº†ï¼Œæˆ‘ä»¬å‡ºäºæ¼”ç¤ºéœ€è¦ç•¥å»äº†ä¸€äº›åŠŸèƒ½ã€‚ æ— è®ºå¦‚ä½•ï¼Œè¾“å‡ºæ˜¯è¿™æ ·çš„:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py <span class="m">4</span> <span class="m">2</span>
<span class="go">4^2 == 16</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> <span class="m">2</span> -q
<span class="go">16</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> <span class="m">2</span> -v
<span class="go">4 to the power 2 equals 16</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> <span class="m">2</span> -vq
<span class="go">usage: prog.py [-h] [-v | -q] x y</span>
<span class="go">prog.py: error: argument -q/--quiet: not allowed with argument -v/--verbose</span>
<span class="gp">$</span> python3 prog.py <span class="m">4</span> <span class="m">2</span> -v --quiet
<span class="go">usage: prog.py [-h] [-v | -q] x y</span>
<span class="go">prog.py: error: argument -q/--quiet: not allowed with argument -v/--verbose</span>
</pre></div>
</div>
<p>è¿™åº”è¯¥å¾ˆå®¹æ˜“ç†è§£ã€‚ æˆ‘æ·»åŠ äº†æœ«å°¾çš„è¾“å‡ºè¿™æ ·ä½ å°±å¯ä»¥çœ‹åˆ°å…¶æ‰€è¾¾åˆ°çš„çµæ´»æ€§ï¼Œå³æ··åˆä½¿ç”¨é•¿å’ŒçŸ­ä¸¤ç§å½¢å¼çš„é€‰é¡¹ã€‚</p>
<p>åœ¨æˆ‘ä»¬æ”¶å°¾ä¹‹å‰ï¼Œä½ ä¹Ÿè®¸å¸Œæœ›å‘Šè¯‰ä½ çš„ç”¨æˆ·è¿™ä¸ªç¨‹åºçš„ä¸»è¦ç›®æ ‡ï¼Œä»¥å…ä»–ä»¬è¿˜ä¸æ¸…æ¥š:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;calculate X to the power of Y&quot;</span><span class="p">)</span>
<span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
<span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-v&quot;</span><span class="p">,</span> <span class="s2">&quot;--verbose&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">)</span>
<span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-q&quot;</span><span class="p">,</span> <span class="s2">&quot;--quiet&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;the base&quot;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;the exponent&quot;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="o">**</span><span class="n">args</span><span class="o">.</span><span class="n">y</span>

<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> to the power </span><span class="si">{}</span><span class="s2"> equals </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">^</span><span class="si">{}</span><span class="s2"> == </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">answer</span><span class="p">))</span>
</pre></div>
</div>
<p>è¯·æ³¨æ„ç”¨æ³•æ–‡æœ¬ä¸­æœ‰ç»†å¾®çš„å·®å¼‚ã€‚ æ³¨æ„ <code class="docutils literal notranslate"><span class="pre">[-v</span> <span class="pre">|</span> <span class="pre">-q]</span></code>ï¼Œå®ƒçš„æ„æ€æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code class="docutils literal notranslate"><span class="pre">-v</span></code> æˆ– <code class="docutils literal notranslate"><span class="pre">-q</span></code>ï¼Œä½†ä¸èƒ½åŒæ—¶ä½¿ç”¨ä¸¤è€…ï¼š</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python3 prog.py --help
<span class="go">usage: prog.py [-h] [-v | -q] x y</span>

<span class="go">calculate X to the power of Y</span>

<span class="go">positional arguments:</span>
<span class="go">  x              the base</span>
<span class="go">  y              the exponent</span>

<span class="go">optional arguments:</span>
<span class="go">  -h, --help     show this help message and exit</span>
<span class="go">  -v, --verbose</span>
<span class="go">  -q, --quiet</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="conclusion">
<h2>åè®°<a class="headerlink" href="#conclusion" title="æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜">Â¶</a></h2>
<p>é™¤äº†è¿™é‡Œæ˜¾ç¤ºçš„å†…å®¹ï¼Œ<a class="reference internal" href="argparse.html#module-argparse" tppabs="https://docs.python.org/zh-cn/3/library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> æ¨¡å—è¿˜æä¾›äº†æ›´å¤šåŠŸèƒ½ã€‚ å®ƒçš„æ–‡æ¡£ç›¸å½“è¯¦ç»†å’Œå®Œæ•´ï¼ŒåŒ…å«å¤§é‡ç¤ºä¾‹ã€‚ å®Œæˆè¿™ä¸ªæ•™ç¨‹ä¹‹åï¼Œä½ åº”è¯¥èƒ½æ¯«ä¸å›°éš¾åœ°é˜…è¯»è¯¥æ–‡æ¡£ã€‚</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="contents.html" tppabs="https://docs.python.org/zh-cn/3/contents.html">ç›®å½•</a></h3>
  <ul>
<li><a class="reference internal" href="#">Argparse æ•™ç¨‹</a><ul>
<li><a class="reference internal" href="#concepts">æ¦‚å¿µ</a></li>
<li><a class="reference internal" href="#the-basics">åŸºç¡€</a></li>
<li><a class="reference internal" href="#introducing-positional-arguments">ä½ç½®å‚æ•°ä»‹ç»</a></li>
<li><a class="reference internal" href="#introducing-optional-arguments">å¯é€‰å‚æ•°ä»‹ç»</a><ul>
<li><a class="reference internal" href="#short-options">çŸ­é€‰é¡¹</a></li>
</ul>
</li>
<li><a class="reference internal" href="#combining-positional-and-optional-arguments">ç»“åˆä½ç½®å‚æ•°å’Œå¯é€‰å‚æ•°</a></li>
<li><a class="reference internal" href="#getting-a-little-more-advanced">è¿›è¡Œä¸€äº›å°å°çš„æ”¹è¿›</a><ul>
<li><a class="reference internal" href="#conflicting-options">çŸ›ç›¾çš„é€‰é¡¹</a></li>
</ul>
</li>
<li><a class="reference internal" href="#conclusion">åè®°</a></li>
</ul>
</li>
</ul>

  <h4>ä¸Šä¸€ä¸ªä¸»é¢˜</h4>
  <p class="topless"><a href="urllib2.html" tppabs="https://docs.python.org/zh-cn/3/howto/urllib2.html"
                        title="ä¸Šä¸€ç« ">HOWTO ä½¿ç”¨ urllib åŒ…è·å–ç½‘ç»œèµ„æº</a></p>
  <h4>ä¸‹ä¸€ä¸ªä¸»é¢˜</h4>
  <p class="topless"><a href="ipaddress-1.html" tppabs="https://docs.python.org/zh-cn/3/howto/ipaddress.html"
                        title="ä¸‹ä¸€ç« ">ipaddressæ¨¡å—ä»‹ç»</a></p>
  <div role="note" aria-label="source link">
    <h3>æœ¬é¡µ</h3>
    <ul class="this-page-menu">
      <li><a href="bugs.html" tppabs="https://docs.python.org/zh-cn/3/bugs.html">æäº¤ Bug</a></li>
      <li>
        <a href="javascript:if(confirm('https://github.com/python/cpython/blob/3.8/Doc/howto/argparse.rst  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/python/cpython/blob/3.8/Doc/howto/argparse.rst'" tppabs="https://github.com/python/cpython/blob/3.8/Doc/howto/argparse.rst"
            rel="nofollow">æ˜¾ç¤ºæºä»£ç 
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>å¯¼èˆª</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" tppabs="https://docs.python.org/zh-cn/3/genindex.html" title="æ€»ç›®å½•"
             >ç´¢å¼•</a></li>
        <li class="right" >
          <a href="py-modindex.html" tppabs="https://docs.python.org/zh-cn/3/py-modindex.html" title="Python æ¨¡å—ç´¢å¼•"
             >æ¨¡å—</a> |</li>
        <li class="right" >
          <a href="ipaddress-1.html" tppabs="https://docs.python.org/zh-cn/3/howto/ipaddress.html" title="ipaddressæ¨¡å—ä»‹ç»"
             >ä¸‹ä¸€é¡µ</a> |</li>
        <li class="right" >
          <a href="urllib2.html" tppabs="https://docs.python.org/zh-cn/3/howto/urllib2.html" title="HOWTO ä½¿ç”¨ urllib åŒ…è·å–ç½‘ç»œèµ„æº"
             >ä¸Šä¸€é¡µ</a> |</li>

    <li><img src="py.png" tppabs="https://docs.python.org/zh-cn/3/_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="javascript:if(confirm('https://www.python.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.python.org/'" tppabs="https://www.python.org/">Python</a> &#187;</li>
    

    <li>
      <span class="language_switcher_placeholder">zh_CN</span>
      <span class="version_switcher_placeholder">3.8.2</span>
      <a href="index-11.html" tppabs="https://docs.python.org/zh-cn/3/index.html">æ–‡æ¡£</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index-5.html" tppabs="https://docs.python.org/zh-cn/3/howto/index.html" >Python å¸¸ç”¨æŒ‡å¼•</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="https://docs.python.org/zh-cn/3/search.html" method="get">
          <input placeholder="å¿«é€Ÿæœç´¢" type="text" name="q" />
          <input type="submit" value="è½¬å‘" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="copyright.html" tppabs="https://docs.python.org/zh-cn/3/copyright.html">ç‰ˆæƒæ‰€æœ‰</a> 2001-2020, Python Software Foundation.
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="javascript:if(confirm('https://www.python.org/psf/donations/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.python.org/psf/donations/'" tppabs="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    æœ€åæ›´æ–°äº 3æœˆ 26, 2020.
    <a href="javascript:if(confirm('https://docs.python.org/3/bugs.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docs.python.org/3/bugs.html'" tppabs="https://docs.python.org/3/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="javascript:if(confirm('https://www.sphinx-doc.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.sphinx-doc.org/'" tppabs="https://www.sphinx-doc.org/">Sphinx</a> 2.3.1.
    </div>

  </body>
</html>